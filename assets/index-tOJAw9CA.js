(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();function h_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var f_={exports:{}},xc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HS=Symbol.for("react.transitional.element"),FS=Symbol.for("react.fragment");function d_(t,e,n){var a=null;if(n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),"key"in e){n={};for(var i in e)i!=="key"&&(n[i]=e[i])}else n=e;return e=n.ref,{$$typeof:HS,type:t,key:a,ref:e!==void 0?e:null,props:n}}xc.Fragment=FS;xc.jsx=d_;xc.jsxs=d_;f_.exports=xc;var p=f_.exports,m_={exports:{}},J={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zd=Symbol.for("react.transitional.element"),GS=Symbol.for("react.portal"),YS=Symbol.for("react.fragment"),QS=Symbol.for("react.strict_mode"),$S=Symbol.for("react.profiler"),XS=Symbol.for("react.consumer"),KS=Symbol.for("react.context"),WS=Symbol.for("react.forward_ref"),JS=Symbol.for("react.suspense"),ZS=Symbol.for("react.memo"),g_=Symbol.for("react.lazy"),ew=Symbol.for("react.activity"),Zp=Symbol.iterator;function tw(t){return t===null||typeof t!="object"?null:(t=Zp&&t[Zp]||t["@@iterator"],typeof t=="function"?t:null)}var p_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y_=Object.assign,v_={};function rs(t,e,n){this.props=t,this.context=e,this.refs=v_,this.updater=n||p_}rs.prototype.isReactComponent={};rs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};rs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function __(){}__.prototype=rs.prototype;function em(t,e,n){this.props=t,this.context=e,this.refs=v_,this.updater=n||p_}var tm=em.prototype=new __;tm.constructor=em;y_(tm,rs.prototype);tm.isPureReactComponent=!0;var ey=Array.isArray;function Of(){}var Ce={H:null,A:null,T:null,S:null},b_=Object.prototype.hasOwnProperty;function nm(t,e,n){var a=n.ref;return{$$typeof:Zd,type:t,key:e,ref:a!==void 0?a:null,props:n}}function nw(t,e){return nm(t.type,e,t.props)}function am(t){return typeof t=="object"&&t!==null&&t.$$typeof===Zd}function aw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ty=/\/+/g;function Mh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?aw(""+t.key):e.toString(36)}function iw(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(Of,Of):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function cr(t,e,n,a,i){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(r){case"bigint":case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Zd:case GS:s=!0;break;case g_:return s=t._init,cr(s(t._payload),e,n,a,i)}}if(s)return i=i(t),s=a===""?"."+Mh(t,0):a,ey(i)?(n="",s!=null&&(n=s.replace(ty,"$&/")+"/"),cr(i,e,n,"",function(c){return c})):i!=null&&(am(i)&&(i=nw(i,n+(i.key==null||t&&t.key===i.key?"":(""+i.key).replace(ty,"$&/")+"/")+s)),e.push(i)),1;s=0;var o=a===""?".":a+":";if(ey(t))for(var u=0;u<t.length;u++)a=t[u],r=o+Mh(a,u),s+=cr(a,e,n,r,i);else if(u=tw(t),typeof u=="function")for(t=u.call(t),u=0;!(a=t.next()).done;)a=a.value,r=o+Mh(a,u++),s+=cr(a,e,n,r,i);else if(r==="object"){if(typeof t.then=="function")return cr(iw(t),e,n,a,i);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return s}function Mo(t,e,n){if(t==null)return t;var a=[],i=0;return cr(t,a,"","",function(r){return e.call(n,r,i++)}),a}function rw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ny=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},sw={map:Mo,forEach:function(t,e,n){Mo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Mo(t,function(){e++}),e},toArray:function(t){return Mo(t,function(e){return e})||[]},only:function(t){if(!am(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};J.Activity=ew;J.Children=sw;J.Component=rs;J.Fragment=YS;J.Profiler=$S;J.PureComponent=em;J.StrictMode=QS;J.Suspense=JS;J.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ce;J.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Ce.H.useMemoCache(t)}};J.cache=function(t){return function(){return t.apply(null,arguments)}};J.cacheSignal=function(){return null};J.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var a=y_({},t.props),i=t.key;if(e!=null)for(r in e.key!==void 0&&(i=""+e.key),e)!b_.call(e,r)||r==="key"||r==="__self"||r==="__source"||r==="ref"&&e.ref===void 0||(a[r]=e[r]);var r=arguments.length-2;if(r===1)a.children=n;else if(1<r){for(var s=Array(r),o=0;o<r;o++)s[o]=arguments[o+2];a.children=s}return nm(t.type,i,a)};J.createContext=function(t){return t={$$typeof:KS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:XS,_context:t},t};J.createElement=function(t,e,n){var a,i={},r=null;if(e!=null)for(a in e.key!==void 0&&(r=""+e.key),e)b_.call(e,a)&&a!=="key"&&a!=="__self"&&a!=="__source"&&(i[a]=e[a]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var o=Array(s),u=0;u<s;u++)o[u]=arguments[u+2];i.children=o}if(t&&t.defaultProps)for(a in s=t.defaultProps,s)i[a]===void 0&&(i[a]=s[a]);return nm(t,r,i)};J.createRef=function(){return{current:null}};J.forwardRef=function(t){return{$$typeof:WS,render:t}};J.isValidElement=am;J.lazy=function(t){return{$$typeof:g_,_payload:{_status:-1,_result:t},_init:rw}};J.memo=function(t,e){return{$$typeof:ZS,type:t,compare:e===void 0?null:e}};J.startTransition=function(t){var e=Ce.T,n={};Ce.T=n;try{var a=t(),i=Ce.S;i!==null&&i(n,a),typeof a=="object"&&a!==null&&typeof a.then=="function"&&a.then(Of,ny)}catch(r){ny(r)}finally{e!==null&&n.types!==null&&(e.types=n.types),Ce.T=e}};J.unstable_useCacheRefresh=function(){return Ce.H.useCacheRefresh()};J.use=function(t){return Ce.H.use(t)};J.useActionState=function(t,e,n){return Ce.H.useActionState(t,e,n)};J.useCallback=function(t,e){return Ce.H.useCallback(t,e)};J.useContext=function(t){return Ce.H.useContext(t)};J.useDebugValue=function(){};J.useDeferredValue=function(t,e){return Ce.H.useDeferredValue(t,e)};J.useEffect=function(t,e){return Ce.H.useEffect(t,e)};J.useEffectEvent=function(t){return Ce.H.useEffectEvent(t)};J.useId=function(){return Ce.H.useId()};J.useImperativeHandle=function(t,e,n){return Ce.H.useImperativeHandle(t,e,n)};J.useInsertionEffect=function(t,e){return Ce.H.useInsertionEffect(t,e)};J.useLayoutEffect=function(t,e){return Ce.H.useLayoutEffect(t,e)};J.useMemo=function(t,e){return Ce.H.useMemo(t,e)};J.useOptimistic=function(t,e){return Ce.H.useOptimistic(t,e)};J.useReducer=function(t,e,n){return Ce.H.useReducer(t,e,n)};J.useRef=function(t){return Ce.H.useRef(t)};J.useState=function(t){return Ce.H.useState(t)};J.useSyncExternalStore=function(t,e,n){return Ce.H.useSyncExternalStore(t,e,n)};J.useTransition=function(){return Ce.H.useTransition()};J.version="19.2.4";m_.exports=J;var M=m_.exports;const lw=h_(M);var E_={exports:{}},Sc={},T_={exports:{}},x_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,W){var $=q.length;q.push(W);e:for(;0<$;){var ue=$-1>>>1,xe=q[ue];if(0<i(xe,W))q[ue]=W,q[$]=xe,$=ue;else break e}}function n(q){return q.length===0?null:q[0]}function a(q){if(q.length===0)return null;var W=q[0],$=q.pop();if($!==W){q[0]=$;e:for(var ue=0,xe=q.length,_t=xe>>>1;ue<_t;){var bt=2*(ue+1)-1,Et=q[bt],rt=bt+1,xn=q[rt];if(0>i(Et,$))rt<xe&&0>i(xn,Et)?(q[ue]=xn,q[rt]=$,ue=rt):(q[ue]=Et,q[bt]=$,ue=bt);else if(rt<xe&&0>i(xn,$))q[ue]=xn,q[rt]=$,ue=rt;else break e}}return W}function i(q,W){var $=q.sortIndex-W.sortIndex;return $!==0?$:q.id-W.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var u=[],c=[],f=1,m=null,d=3,v=!1,R=!1,O=!1,D=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function N(q){for(var W=n(c);W!==null;){if(W.callback===null)a(c);else if(W.startTime<=q)a(c),W.sortIndex=W.expirationTime,e(u,W);else break;W=n(c)}}function V(q){if(O=!1,N(q),!R)if(n(u)!==null)R=!0,k||(k=!0,I());else{var W=n(c);W!==null&&mt(V,W.startTime-q)}}var k=!1,E=-1,b=5,S=-1;function C(){return D?!0:!(t.unstable_now()-S<b)}function w(){if(D=!1,k){var q=t.unstable_now();S=q;var W=!0;try{e:{R=!1,O&&(O=!1,y(E),E=-1),v=!0;var $=d;try{t:{for(N(q),m=n(u);m!==null&&!(m.expirationTime>q&&C());){var ue=m.callback;if(typeof ue=="function"){m.callback=null,d=m.priorityLevel;var xe=ue(m.expirationTime<=q);if(q=t.unstable_now(),typeof xe=="function"){m.callback=xe,N(q),W=!0;break t}m===n(u)&&a(u),N(q)}else a(u);m=n(u)}if(m!==null)W=!0;else{var _t=n(c);_t!==null&&mt(V,_t.startTime-q),W=!1}}break e}finally{m=null,d=$,v=!1}W=void 0}}finally{W?I():k=!1}}}var I;if(typeof _=="function")I=function(){_(w)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,fe=A.port2;A.port1.onmessage=w,I=function(){fe.postMessage(null)}}else I=function(){x(w,0)};function mt(q,W){E=x(function(){q(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_next=function(q){switch(d){case 1:case 2:case 3:var W=3;break;default:W=d}var $=d;d=W;try{return q()}finally{d=$}},t.unstable_requestPaint=function(){D=!0},t.unstable_runWithPriority=function(q,W){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var $=d;d=q;try{return W()}finally{d=$}},t.unstable_scheduleCallback=function(q,W,$){var ue=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?ue+$:ue):$=ue,q){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=$+xe,q={id:f++,callback:W,priorityLevel:q,startTime:$,expirationTime:xe,sortIndex:-1},$>ue?(q.sortIndex=$,e(c,q),n(u)===null&&q===n(c)&&(O?(y(E),E=-1):O=!0,mt(V,$-ue))):(q.sortIndex=xe,e(u,q),R||v||(R=!0,k||(k=!0,I()))),q},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(q){var W=d;return function(){var $=d;d=W;try{return q.apply(this,arguments)}finally{d=$}}}})(x_);T_.exports=x_;var ow=T_.exports,S_={exports:{}},Nt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uw=M;function w_(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Sa(){}var Rt={d:{f:Sa,r:function(){throw Error(w_(522))},D:Sa,C:Sa,L:Sa,m:Sa,X:Sa,S:Sa,M:Sa},p:0,findDOMNode:null},cw=Symbol.for("react.portal");function hw(t,e,n){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cw,key:a==null?null:""+a,children:t,containerInfo:e,implementation:n}}var il=uw.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function wc(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Nt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Rt;Nt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(w_(299));return hw(t,e,null,n)};Nt.flushSync=function(t){var e=il.T,n=Rt.p;try{if(il.T=null,Rt.p=2,t)return t()}finally{il.T=e,Rt.p=n,Rt.d.f()}};Nt.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,Rt.d.C(t,e))};Nt.prefetchDNS=function(t){typeof t=="string"&&Rt.d.D(t)};Nt.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,a=wc(n,e.crossOrigin),i=typeof e.integrity=="string"?e.integrity:void 0,r=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?Rt.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:a,integrity:i,fetchPriority:r}):n==="script"&&Rt.d.X(t,{crossOrigin:a,integrity:i,fetchPriority:r,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Nt.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=wc(e.as,e.crossOrigin);Rt.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&Rt.d.M(t)};Nt.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,a=wc(n,e.crossOrigin);Rt.d.L(t,n,{crossOrigin:a,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Nt.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=wc(e.as,e.crossOrigin);Rt.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else Rt.d.m(t)};Nt.requestFormReset=function(t){Rt.d.r(t)};Nt.unstable_batchedUpdates=function(t,e){return t(e)};Nt.useFormState=function(t,e,n){return il.H.useFormState(t,e,n)};Nt.useFormStatus=function(){return il.H.useHostTransitionStatus()};Nt.version="19.2.4";function A_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(A_)}catch(t){console.error(t)}}A_(),S_.exports=Nt;var fw=S_.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ze=ow,R_=M,dw=fw;function P(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function C_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Xl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function N_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function D_(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ay(t){if(Xl(t)!==t)throw Error(P(188))}function mw(t){var e=t.alternate;if(!e){if(e=Xl(t),e===null)throw Error(P(188));return e!==t?null:t}for(var n=t,a=e;;){var i=n.return;if(i===null)break;var r=i.alternate;if(r===null){if(a=i.return,a!==null){n=a;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===n)return ay(i),t;if(r===a)return ay(i),e;r=r.sibling}throw Error(P(188))}if(n.return!==a.return)n=i,a=r;else{for(var s=!1,o=i.child;o;){if(o===n){s=!0,n=i,a=r;break}if(o===a){s=!0,a=i,n=r;break}o=o.sibling}if(!s){for(o=r.child;o;){if(o===n){s=!0,n=r,a=i;break}if(o===a){s=!0,a=r,n=i;break}o=o.sibling}if(!s)throw Error(P(189))}}if(n.alternate!==a)throw Error(P(190))}if(n.tag!==3)throw Error(P(188));return n.stateNode.current===n?t:e}function I_(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=I_(t),e!==null)return e;t=t.sibling}return null}var Ne=Object.assign,gw=Symbol.for("react.element"),Vo=Symbol.for("react.transitional.element"),$s=Symbol.for("react.portal"),yr=Symbol.for("react.fragment"),O_=Symbol.for("react.strict_mode"),Mf=Symbol.for("react.profiler"),M_=Symbol.for("react.consumer"),Kn=Symbol.for("react.context"),im=Symbol.for("react.forward_ref"),Vf=Symbol.for("react.suspense"),jf=Symbol.for("react.suspense_list"),rm=Symbol.for("react.memo"),Aa=Symbol.for("react.lazy"),Lf=Symbol.for("react.activity"),pw=Symbol.for("react.memo_cache_sentinel"),iy=Symbol.iterator;function ks(t){return t===null||typeof t!="object"?null:(t=iy&&t[iy]||t["@@iterator"],typeof t=="function"?t:null)}var yw=Symbol.for("react.client.reference");function kf(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===yw?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case yr:return"Fragment";case Mf:return"Profiler";case O_:return"StrictMode";case Vf:return"Suspense";case jf:return"SuspenseList";case Lf:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case $s:return"Portal";case Kn:return t.displayName||"Context";case M_:return(t._context.displayName||"Context")+".Consumer";case im:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case rm:return e=t.displayName||null,e!==null?e:kf(t.type)||"Memo";case Aa:e=t._payload,t=t._init;try{return kf(t(e))}catch{}}return null}var Xs=Array.isArray,Q=R_.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=dw.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ni={pending:!1,data:null,method:null,action:null},Uf=[],vr=-1;function Pn(t){return{current:t}}function it(t){0>vr||(t.current=Uf[vr],Uf[vr]=null,vr--)}function Te(t,e){vr++,Uf[vr]=t.current,t.current=e}var Mn=Pn(null),Sl=Pn(null),Pa=Pn(null),Du=Pn(null);function Iu(t,e){switch(Te(Pa,e),Te(Sl,t),Te(Mn,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?c0(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=c0(e),t=ZE(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}it(Mn),Te(Mn,t)}function zr(){it(Mn),it(Sl),it(Pa)}function Pf(t){t.memoizedState!==null&&Te(Du,t);var e=Mn.current,n=ZE(e,t.type);e!==n&&(Te(Sl,t),Te(Mn,n))}function Ou(t){Sl.current===t&&(it(Mn),it(Sl)),Du.current===t&&(it(Du),jl._currentValue=Ni)}var Vh,ry;function Ti(t){if(Vh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Vh=e&&e[1]||"",ry=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Vh+t+ry}var jh=!1;function Lh(t,e){if(!t||jh)return"";jh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(e){var m=function(){throw Error()};if(Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(v){var d=v}Reflect.construct(t,[],m)}else{try{m.call()}catch(v){d=v}t.call(m.prototype)}}else{try{throw Error()}catch(v){d=v}(m=t())&&typeof m.catch=="function"&&m.catch(function(){})}}catch(v){if(v&&d&&typeof v.stack=="string")return[v.stack,d.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=a.DetermineComponentFrameRoot(),s=r[0],o=r[1];if(s&&o){var u=s.split(`
`),c=o.split(`
`);for(i=a=0;a<u.length&&!u[a].includes("DetermineComponentFrameRoot");)a++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(a===u.length||i===c.length)for(a=u.length-1,i=c.length-1;1<=a&&0<=i&&u[a]!==c[i];)i--;for(;1<=a&&0<=i;a--,i--)if(u[a]!==c[i]){if(a!==1||i!==1)do if(a--,i--,0>i||u[a]!==c[i]){var f=`
`+u[a].replace(" at new "," at ");return t.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",t.displayName)),f}while(1<=a&&0<=i);break}}}finally{jh=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Ti(n):""}function vw(t,e){switch(t.tag){case 26:case 27:case 5:return Ti(t.type);case 16:return Ti("Lazy");case 13:return t.child!==e&&e!==null?Ti("Suspense Fallback"):Ti("Suspense");case 19:return Ti("SuspenseList");case 0:case 15:return Lh(t.type,!1);case 11:return Lh(t.type.render,!1);case 1:return Lh(t.type,!0);case 31:return Ti("Activity");default:return""}}function sy(t){try{var e="",n=null;do e+=vw(t,n),n=t,t=t.return;while(t);return e}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var zf=Object.prototype.hasOwnProperty,sm=Ze.unstable_scheduleCallback,kh=Ze.unstable_cancelCallback,_w=Ze.unstable_shouldYield,bw=Ze.unstable_requestPaint,Xt=Ze.unstable_now,Ew=Ze.unstable_getCurrentPriorityLevel,V_=Ze.unstable_ImmediatePriority,j_=Ze.unstable_UserBlockingPriority,Mu=Ze.unstable_NormalPriority,Tw=Ze.unstable_LowPriority,L_=Ze.unstable_IdlePriority,xw=Ze.log,Sw=Ze.unstable_setDisableYieldValue,Kl=null,Kt=null;function Ma(t){if(typeof xw=="function"&&Sw(t),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode(Kl,t)}catch{}}var Wt=Math.clz32?Math.clz32:Rw,ww=Math.log,Aw=Math.LN2;function Rw(t){return t>>>=0,t===0?32:31-(ww(t)/Aw|0)|0}var jo=256,Lo=262144,ko=4194304;function xi(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ac(t,e,n){var a=t.pendingLanes;if(a===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes;t=t.warmLanes;var o=a&134217727;return o!==0?(a=o&~r,a!==0?i=xi(a):(s&=o,s!==0?i=xi(s):n||(n=o&~t,n!==0&&(i=xi(n))))):(o=a&~r,o!==0?i=xi(o):s!==0?i=xi(s):n||(n=a&~t,n!==0&&(i=xi(n)))),i===0?0:e!==0&&e!==i&&!(e&r)&&(r=i&-i,n=e&-e,r>=n||r===32&&(n&4194048)!==0)?e:i}function Wl(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function Cw(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function k_(){var t=ko;return ko<<=1,!(ko&62914560)&&(ko=4194304),t}function Uh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Jl(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Nw(t,e,n,a,i,r){var s=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var o=t.entanglements,u=t.expirationTimes,c=t.hiddenUpdates;for(n=s&~n;0<n;){var f=31-Wt(n),m=1<<f;o[f]=0,u[f]=-1;var d=c[f];if(d!==null)for(c[f]=null,f=0;f<d.length;f++){var v=d[f];v!==null&&(v.lane&=-536870913)}n&=~m}a!==0&&U_(t,a,0),r!==0&&i===0&&t.tag!==0&&(t.suspendedLanes|=r&~(s&~e))}function U_(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var a=31-Wt(e);t.entangledLanes|=e,t.entanglements[a]=t.entanglements[a]|1073741824|n&261930}function P_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var a=31-Wt(n),i=1<<a;i&e|t[a]&e&&(t[a]|=e),n&=~i}}function z_(t,e){var n=e&-e;return n=n&42?1:lm(n),n&(t.suspendedLanes|e)?0:n}function lm(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function om(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function B_(){var t=he.p;return t!==0?t:(t=window.event,t===void 0?32:cT(t.type))}function ly(t,e){var n=he.p;try{return he.p=t,e()}finally{he.p=n}}var ui=Math.random().toString(36).slice(2),ot="__reactFiber$"+ui,Ut="__reactProps$"+ui,ss="__reactContainer$"+ui,Bf="__reactEvents$"+ui,Dw="__reactListeners$"+ui,Iw="__reactHandles$"+ui,oy="__reactResources$"+ui,Zl="__reactMarker$"+ui;function um(t){delete t[ot],delete t[Ut],delete t[Bf],delete t[Dw],delete t[Iw]}function _r(t){var e=t[ot];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ss]||n[ot]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=g0(t);t!==null;){if(n=t[ot])return n;t=g0(t)}return e}t=n,n=t.parentNode}return null}function ls(t){if(t=t[ot]||t[ss]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function Ks(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(P(33))}function Dr(t){var e=t[oy];return e||(e=t[oy]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function at(t){t[Zl]=!0}var q_=new Set,H_={};function Qi(t,e){Br(t,e),Br(t+"Capture",e)}function Br(t,e){for(H_[t]=e,t=0;t<e.length;t++)q_.add(e[t])}var Ow=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),uy={},cy={};function Mw(t){return zf.call(cy,t)?!0:zf.call(uy,t)?!1:Ow.test(t)?cy[t]=!0:(uy[t]=!0,!1)}function ru(t,e,n){if(Mw(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var a=e.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Uo(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function Hn(t,e,n,a){if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+a)}}function an(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function F_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Vw(t,e,n){var a=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var i=a.get,r=a.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){n=""+s,r.call(this,s)}}),Object.defineProperty(t,e,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function qf(t){if(!t._valueTracker){var e=F_(t)?"checked":"value";t._valueTracker=Vw(t,e,""+t[e])}}function G_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),a="";return t&&(a=F_(t)?t.checked?"true":"false":t.value),t=a,t!==n?(e.setValue(t),!0):!1}function Vu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var jw=/[\n"\\]/g;function ln(t){return t.replace(jw,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function Hf(t,e,n,a,i,r,s,o){t.name="",s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"?t.type=s:t.removeAttribute("type"),e!=null?s==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+an(e)):t.value!==""+an(e)&&(t.value=""+an(e)):s!=="submit"&&s!=="reset"||t.removeAttribute("value"),e!=null?Ff(t,s,an(e)):n!=null?Ff(t,s,an(n)):a!=null&&t.removeAttribute("value"),i==null&&r!=null&&(t.defaultChecked=!!r),i!=null&&(t.checked=i&&typeof i!="function"&&typeof i!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.name=""+an(o):t.removeAttribute("name")}function Y_(t,e,n,a,i,r,s,o){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.type=r),e!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||e!=null)){qf(t);return}n=n!=null?""+an(n):"",e=e!=null?""+an(e):n,o||e===t.value||(t.value=e),t.defaultValue=e}a=a??i,a=typeof a!="function"&&typeof a!="symbol"&&!!a,t.checked=o?t.checked:!!a,t.defaultChecked=!!a,s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.name=s),qf(t)}function Ff(t,e,n){e==="number"&&Vu(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Ir(t,e,n,a){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&a&&(t[n].defaultSelected=!0)}else{for(n=""+an(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,a&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Q_(t,e,n){if(e!=null&&(e=""+an(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+an(n):""}function $_(t,e,n,a){if(e==null){if(a!=null){if(n!=null)throw Error(P(92));if(Xs(a)){if(1<a.length)throw Error(P(93));a=a[0]}n=a}n==null&&(n=""),e=n}n=an(e),t.defaultValue=n,a=t.textContent,a===n&&a!==""&&a!==null&&(t.value=a),qf(t)}function qr(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Lw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hy(t,e,n){var a=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?a?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":a?t.setProperty(e,n):typeof n!="number"||n===0||Lw.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function X_(t,e,n){if(e!=null&&typeof e!="object")throw Error(P(62));if(t=t.style,n!=null){for(var a in n)!n.hasOwnProperty(a)||e!=null&&e.hasOwnProperty(a)||(a.indexOf("--")===0?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="");for(var i in e)a=e[i],e.hasOwnProperty(i)&&n[i]!==a&&hy(t,i,a)}else for(var r in e)e.hasOwnProperty(r)&&hy(t,r,e[r])}function cm(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kw=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Uw=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function su(t){return Uw.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Wn(){}var Gf=null;function hm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var br=null,Or=null;function fy(t){var e=ls(t);if(e&&(t=e.stateNode)){var n=t[Ut]||null;e:switch(t=e.stateNode,e.type){case"input":if(Hf(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ln(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var a=n[e];if(a!==t&&a.form===t.form){var i=a[Ut]||null;if(!i)throw Error(P(90));Hf(a,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(e=0;e<n.length;e++)a=n[e],a.form===t.form&&G_(a)}break e;case"textarea":Q_(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&Ir(t,!!n.multiple,e,!1)}}}var Ph=!1;function K_(t,e,n){if(Ph)return t(e,n);Ph=!0;try{var a=t(e);return a}finally{if(Ph=!1,(br!==null||Or!==null)&&(Uc(),br&&(e=br,t=Or,Or=br=null,fy(e),t)))for(e=0;e<t.length;e++)fy(t[e])}}function wl(t,e){var n=t.stateNode;if(n===null)return null;var a=n[Ut]||null;if(a===null)return null;n=a[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(P(231,e,typeof n));return n}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yf=!1;if(ia)try{var Us={};Object.defineProperty(Us,"passive",{get:function(){Yf=!0}}),window.addEventListener("test",Us,Us),window.removeEventListener("test",Us,Us)}catch{Yf=!1}var Va=null,fm=null,lu=null;function W_(){if(lu)return lu;var t,e=fm,n=e.length,a,i="value"in Va?Va.value:Va.textContent,r=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(a=1;a<=s&&e[n-a]===i[r-a];a++);return lu=i.slice(t,1<a?1-a:void 0)}function ou(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Po(){return!0}function dy(){return!1}function zt(t){function e(n,a,i,r,s){this._reactName=n,this._targetInst=i,this.type=a,this.nativeEvent=r,this.target=s,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(r):r[o]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Po:dy,this.isPropagationStopped=dy,this}return Ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Po)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Po)},persist:function(){},isPersistent:Po}),e}var $i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rc=zt($i),eo=Ne({},$i,{view:0,detail:0}),Pw=zt(eo),zh,Bh,Ps,Cc=Ne({},eo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ps&&(Ps&&t.type==="mousemove"?(zh=t.screenX-Ps.screenX,Bh=t.screenY-Ps.screenY):Bh=zh=0,Ps=t),zh)},movementY:function(t){return"movementY"in t?t.movementY:Bh}}),my=zt(Cc),zw=Ne({},Cc,{dataTransfer:0}),Bw=zt(zw),qw=Ne({},eo,{relatedTarget:0}),qh=zt(qw),Hw=Ne({},$i,{animationName:0,elapsedTime:0,pseudoElement:0}),Fw=zt(Hw),Gw=Ne({},$i,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Yw=zt(Gw),Qw=Ne({},$i,{data:0}),gy=zt(Qw),$w={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ww(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Kw[t])?!!e[t]:!1}function dm(){return Ww}var Jw=Ne({},eo,{key:function(t){if(t.key){var e=$w[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ou(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Xw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dm,charCode:function(t){return t.type==="keypress"?ou(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ou(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Zw=zt(Jw),eA=Ne({},Cc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),py=zt(eA),tA=Ne({},eo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dm}),nA=zt(tA),aA=Ne({},$i,{propertyName:0,elapsedTime:0,pseudoElement:0}),iA=zt(aA),rA=Ne({},Cc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),sA=zt(rA),lA=Ne({},$i,{newState:0,oldState:0}),oA=zt(lA),uA=[9,13,27,32],mm=ia&&"CompositionEvent"in window,rl=null;ia&&"documentMode"in document&&(rl=document.documentMode);var cA=ia&&"TextEvent"in window&&!rl,J_=ia&&(!mm||rl&&8<rl&&11>=rl),yy=" ",vy=!1;function Z_(t,e){switch(t){case"keyup":return uA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Er=!1;function hA(t,e){switch(t){case"compositionend":return eb(e);case"keypress":return e.which!==32?null:(vy=!0,yy);case"textInput":return t=e.data,t===yy&&vy?null:t;default:return null}}function fA(t,e){if(Er)return t==="compositionend"||!mm&&Z_(t,e)?(t=W_(),lu=fm=Va=null,Er=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return J_&&e.locale!=="ko"?null:e.data;default:return null}}var dA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _y(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!dA[t.type]:e==="textarea"}function tb(t,e,n,a){br?Or?Or.push(a):Or=[a]:br=a,e=Ju(e,"onChange"),0<e.length&&(n=new Rc("onChange","change",null,n,a),t.push({event:n,listeners:e}))}var sl=null,Al=null;function mA(t){KE(t,0)}function Nc(t){var e=Ks(t);if(G_(e))return t}function by(t,e){if(t==="change")return e}var nb=!1;if(ia){var Hh;if(ia){var Fh="oninput"in document;if(!Fh){var Ey=document.createElement("div");Ey.setAttribute("oninput","return;"),Fh=typeof Ey.oninput=="function"}Hh=Fh}else Hh=!1;nb=Hh&&(!document.documentMode||9<document.documentMode)}function Ty(){sl&&(sl.detachEvent("onpropertychange",ab),Al=sl=null)}function ab(t){if(t.propertyName==="value"&&Nc(Al)){var e=[];tb(e,Al,t,hm(t)),K_(mA,e)}}function gA(t,e,n){t==="focusin"?(Ty(),sl=e,Al=n,sl.attachEvent("onpropertychange",ab)):t==="focusout"&&Ty()}function pA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Nc(Al)}function yA(t,e){if(t==="click")return Nc(e)}function vA(t,e){if(t==="input"||t==="change")return Nc(e)}function _A(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var en=typeof Object.is=="function"?Object.is:_A;function Rl(t,e){if(en(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),a=Object.keys(e);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var i=n[a];if(!zf.call(e,i)||!en(t[i],e[i]))return!1}return!0}function xy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Sy(t,e){var n=xy(t);t=0;for(var a;n;){if(n.nodeType===3){if(a=t+n.textContent.length,t<=e&&a>=e)return{node:n,offset:e-t};t=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=xy(n)}}function ib(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ib(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function rb(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Vu(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Vu(t.document)}return e}function gm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var bA=ia&&"documentMode"in document&&11>=document.documentMode,Tr=null,Qf=null,ll=null,$f=!1;function wy(t,e,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$f||Tr==null||Tr!==Vu(a)||(a=Tr,"selectionStart"in a&&gm(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),ll&&Rl(ll,a)||(ll=a,a=Ju(Qf,"onSelect"),0<a.length&&(e=new Rc("onSelect","select",null,e,n),t.push({event:e,listeners:a}),e.target=Tr)))}function Ei(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var xr={animationend:Ei("Animation","AnimationEnd"),animationiteration:Ei("Animation","AnimationIteration"),animationstart:Ei("Animation","AnimationStart"),transitionrun:Ei("Transition","TransitionRun"),transitionstart:Ei("Transition","TransitionStart"),transitioncancel:Ei("Transition","TransitionCancel"),transitionend:Ei("Transition","TransitionEnd")},Gh={},sb={};ia&&(sb=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);function Xi(t){if(Gh[t])return Gh[t];if(!xr[t])return t;var e=xr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in sb)return Gh[t]=e[n];return t}var lb=Xi("animationend"),ob=Xi("animationiteration"),ub=Xi("animationstart"),EA=Xi("transitionrun"),TA=Xi("transitionstart"),xA=Xi("transitioncancel"),cb=Xi("transitionend"),hb=new Map,Xf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xf.push("scrollEnd");function Tn(t,e){hb.set(t,e),Qi(e,[t])}var ju=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},nn=[],Sr=0,pm=0;function Dc(){for(var t=Sr,e=pm=Sr=0;e<t;){var n=nn[e];nn[e++]=null;var a=nn[e];nn[e++]=null;var i=nn[e];nn[e++]=null;var r=nn[e];if(nn[e++]=null,a!==null&&i!==null){var s=a.pending;s===null?i.next=i:(i.next=s.next,s.next=i),a.pending=i}r!==0&&fb(n,i,r)}}function Ic(t,e,n,a){nn[Sr++]=t,nn[Sr++]=e,nn[Sr++]=n,nn[Sr++]=a,pm|=a,t.lanes|=a,t=t.alternate,t!==null&&(t.lanes|=a)}function ym(t,e,n,a){return Ic(t,e,n,a),Lu(t)}function Ki(t,e){return Ic(t,null,null,e),Lu(t)}function fb(t,e,n){t.lanes|=n;var a=t.alternate;a!==null&&(a.lanes|=n);for(var i=!1,r=t.return;r!==null;)r.childLanes|=n,a=r.alternate,a!==null&&(a.childLanes|=n),r.tag===22&&(t=r.stateNode,t===null||t._visibility&1||(i=!0)),t=r,r=r.return;return t.tag===3?(r=t.stateNode,i&&e!==null&&(i=31-Wt(n),t=r.hiddenUpdates,a=t[i],a===null?t[i]=[e]:a.push(e),e.lane=n|536870912),r):null}function Lu(t){if(50<pl)throw pl=0,pd=null,Error(P(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var wr={};function SA(t,e,n,a){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(t,e,n,a){return new SA(t,e,n,a)}function vm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Zn(t,e){var n=t.alternate;return n===null?(n=Gt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function db(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function uu(t,e,n,a,i,r){var s=0;if(a=t,typeof t=="function")vm(t)&&(s=1);else if(typeof t=="string")s=N2(t,n,Mn.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Lf:return t=Gt(31,n,e,i),t.elementType=Lf,t.lanes=r,t;case yr:return Di(n.children,i,r,e);case O_:s=8,i|=24;break;case Mf:return t=Gt(12,n,e,i|2),t.elementType=Mf,t.lanes=r,t;case Vf:return t=Gt(13,n,e,i),t.elementType=Vf,t.lanes=r,t;case jf:return t=Gt(19,n,e,i),t.elementType=jf,t.lanes=r,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Kn:s=10;break e;case M_:s=9;break e;case im:s=11;break e;case rm:s=14;break e;case Aa:s=16,a=null;break e}s=29,n=Error(P(130,t===null?"null":typeof t,"")),a=null}return e=Gt(s,n,e,i),e.elementType=t,e.type=a,e.lanes=r,e}function Di(t,e,n,a){return t=Gt(7,t,a,e),t.lanes=n,t}function Yh(t,e,n){return t=Gt(6,t,null,e),t.lanes=n,t}function mb(t){var e=Gt(18,null,null,0);return e.stateNode=t,e}function Qh(t,e,n){return e=Gt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var Ay=new WeakMap;function on(t,e){if(typeof t=="object"&&t!==null){var n=Ay.get(t);return n!==void 0?n:(e={value:t,source:e,stack:sy(e)},Ay.set(t,e),e)}return{value:t,source:e,stack:sy(e)}}var Ar=[],Rr=0,ku=null,Cl=0,rn=[],sn=0,Za=null,Nn=1,Dn="";function $n(t,e){Ar[Rr++]=Cl,Ar[Rr++]=ku,ku=t,Cl=e}function gb(t,e,n){rn[sn++]=Nn,rn[sn++]=Dn,rn[sn++]=Za,Za=t;var a=Nn;t=Dn;var i=32-Wt(a)-1;a&=~(1<<i),n+=1;var r=32-Wt(e)+i;if(30<r){var s=i-i%5;r=(a&(1<<s)-1).toString(32),a>>=s,i-=s,Nn=1<<32-Wt(e)+i|n<<i|a,Dn=r+t}else Nn=1<<r|n<<i|a,Dn=t}function _m(t){t.return!==null&&($n(t,1),gb(t,1,0))}function bm(t){for(;t===ku;)ku=Ar[--Rr],Ar[Rr]=null,Cl=Ar[--Rr],Ar[Rr]=null;for(;t===Za;)Za=rn[--sn],rn[sn]=null,Dn=rn[--sn],rn[sn]=null,Nn=rn[--sn],rn[sn]=null}function pb(t,e){rn[sn++]=Nn,rn[sn++]=Dn,rn[sn++]=Za,Nn=e.id,Dn=e.overflow,Za=t}var ut=null,Ae=null,se=!1,za=null,un=!1,Kf=Error(P(519));function ei(t){var e=Error(P(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Nl(on(e,t)),Kf}function Ry(t){var e=t.stateNode,n=t.type,a=t.memoizedProps;switch(e[ot]=t,e[Ut]=a,n){case"dialog":te("cancel",e),te("close",e);break;case"iframe":case"object":case"embed":te("load",e);break;case"video":case"audio":for(n=0;n<Ml.length;n++)te(Ml[n],e);break;case"source":te("error",e);break;case"img":case"image":case"link":te("error",e),te("load",e);break;case"details":te("toggle",e);break;case"input":te("invalid",e),Y_(e,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":te("invalid",e);break;case"textarea":te("invalid",e),$_(e,a.value,a.defaultValue,a.children)}n=a.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||a.suppressHydrationWarning===!0||JE(e.textContent,n)?(a.popover!=null&&(te("beforetoggle",e),te("toggle",e)),a.onScroll!=null&&te("scroll",e),a.onScrollEnd!=null&&te("scrollend",e),a.onClick!=null&&(e.onclick=Wn),e=!0):e=!1,e||ei(t,!0)}function Cy(t){for(ut=t.return;ut;)switch(ut.tag){case 5:case 31:case 13:un=!1;return;case 27:case 3:un=!0;return;default:ut=ut.return}}function lr(t){if(t!==ut)return!1;if(!se)return Cy(t),se=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Ed(t.type,t.memoizedProps)),n=!n),n&&Ae&&ei(t),Cy(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(P(317));Ae=m0(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(P(317));Ae=m0(t)}else e===27?(e=Ae,ci(t.type)?(t=wd,wd=null,Ae=t):Ae=e):Ae=ut?dn(t.stateNode.nextSibling):null;return!0}function ki(){Ae=ut=null,se=!1}function $h(){var t=za;return t!==null&&(Mt===null?Mt=t:Mt.push.apply(Mt,t),za=null),t}function Nl(t){za===null?za=[t]:za.push(t)}var Wf=Pn(null),Wi=null,Jn=null;function Ca(t,e,n){Te(Wf,e._currentValue),e._currentValue=n}function ea(t){t._currentValue=Wf.current,it(Wf)}function Jf(t,e,n){for(;t!==null;){var a=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,a!==null&&(a.childLanes|=e)):a!==null&&(a.childLanes&e)!==e&&(a.childLanes|=e),t===n)break;t=t.return}}function Zf(t,e,n,a){var i=t.child;for(i!==null&&(i.return=t);i!==null;){var r=i.dependencies;if(r!==null){var s=i.child;r=r.firstContext;e:for(;r!==null;){var o=r;r=i;for(var u=0;u<e.length;u++)if(o.context===e[u]){r.lanes|=n,o=r.alternate,o!==null&&(o.lanes|=n),Jf(r.return,n,t),a||(s=null);break e}r=o.next}}else if(i.tag===18){if(s=i.return,s===null)throw Error(P(341));s.lanes|=n,r=s.alternate,r!==null&&(r.lanes|=n),Jf(s,n,t),s=null}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===t){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}}function os(t,e,n,a){t=null;for(var i=e,r=!1;i!==null;){if(!r){if(i.flags&524288)r=!0;else if(i.flags&262144)break}if(i.tag===10){var s=i.alternate;if(s===null)throw Error(P(387));if(s=s.memoizedProps,s!==null){var o=i.type;en(i.pendingProps.value,s.value)||(t!==null?t.push(o):t=[o])}}else if(i===Du.current){if(s=i.alternate,s===null)throw Error(P(387));s.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(t!==null?t.push(jl):t=[jl])}i=i.return}t!==null&&Zf(e,t,n,a),e.flags|=262144}function Uu(t){for(t=t.firstContext;t!==null;){if(!en(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ui(t){Wi=t,Jn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function ht(t){return yb(Wi,t)}function zo(t,e){return Wi===null&&Ui(t),yb(t,e)}function yb(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},Jn===null){if(t===null)throw Error(P(308));Jn=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Jn=Jn.next=e;return n}var wA=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,a){t.push(a)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},AA=Ze.unstable_scheduleCallback,RA=Ze.unstable_NormalPriority,Ye={$$typeof:Kn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Em(){return{controller:new wA,data:new Map,refCount:0}}function to(t){t.refCount--,t.refCount===0&&AA(RA,function(){t.controller.abort()})}var ol=null,ed=0,Hr=0,Mr=null;function CA(t,e){if(ol===null){var n=ol=[];ed=0,Hr=Ym(),Mr={status:"pending",value:void 0,then:function(a){n.push(a)}}}return ed++,e.then(Ny,Ny),e}function Ny(){if(--ed===0&&ol!==null){Mr!==null&&(Mr.status="fulfilled");var t=ol;ol=null,Hr=0,Mr=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function NA(t,e){var n=[],a={status:"pending",value:null,reason:null,then:function(i){n.push(i)}};return t.then(function(){a.status="fulfilled",a.value=e;for(var i=0;i<n.length;i++)(0,n[i])(e)},function(i){for(a.status="rejected",a.reason=i,i=0;i<n.length;i++)(0,n[i])(void 0)}),a}var Dy=Q.S;Q.S=function(t,e){IE=Xt(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&CA(t,e),Dy!==null&&Dy(t,e)};var Ii=Pn(null);function Tm(){var t=Ii.current;return t!==null?t:be.pooledCache}function cu(t,e){e===null?Te(Ii,Ii.current):Te(Ii,e.pool)}function vb(){var t=Tm();return t===null?null:{parent:Ye._currentValue,pool:t}}var us=Error(P(460)),xm=Error(P(474)),Oc=Error(P(542)),Pu={then:function(){}};function Iy(t){return t=t.status,t==="fulfilled"||t==="rejected"}function _b(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(Wn,Wn),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,My(t),t;default:if(typeof e.status=="string")e.then(Wn,Wn);else{if(t=be,t!==null&&100<t.shellSuspendCounter)throw Error(P(482));t=e,t.status="pending",t.then(function(a){if(e.status==="pending"){var i=e;i.status="fulfilled",i.value=a}},function(a){if(e.status==="pending"){var i=e;i.status="rejected",i.reason=a}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,My(t),t}throw Oi=e,us}}function Si(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Oi=n,us):n}}var Oi=null;function Oy(){if(Oi===null)throw Error(P(459));var t=Oi;return Oi=null,t}function My(t){if(t===us||t===Oc)throw Error(P(483))}var Vr=null,Dl=0;function Bo(t){var e=Dl;return Dl+=1,Vr===null&&(Vr=[]),_b(Vr,t,e)}function zs(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function qo(t,e){throw e.$$typeof===gw?Error(P(525)):(t=Object.prototype.toString.call(e),Error(P(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function bb(t){function e(x,y){if(t){var _=x.deletions;_===null?(x.deletions=[y],x.flags|=16):_.push(y)}}function n(x,y){if(!t)return null;for(;y!==null;)e(x,y),y=y.sibling;return null}function a(x){for(var y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function i(x,y){return x=Zn(x,y),x.index=0,x.sibling=null,x}function r(x,y,_){return x.index=_,t?(_=x.alternate,_!==null?(_=_.index,_<y?(x.flags|=67108866,y):_):(x.flags|=67108866,y)):(x.flags|=1048576,y)}function s(x){return t&&x.alternate===null&&(x.flags|=67108866),x}function o(x,y,_,N){return y===null||y.tag!==6?(y=Yh(_,x.mode,N),y.return=x,y):(y=i(y,_),y.return=x,y)}function u(x,y,_,N){var V=_.type;return V===yr?f(x,y,_.props.children,N,_.key):y!==null&&(y.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Aa&&Si(V)===y.type)?(y=i(y,_.props),zs(y,_),y.return=x,y):(y=uu(_.type,_.key,_.props,null,x.mode,N),zs(y,_),y.return=x,y)}function c(x,y,_,N){return y===null||y.tag!==4||y.stateNode.containerInfo!==_.containerInfo||y.stateNode.implementation!==_.implementation?(y=Qh(_,x.mode,N),y.return=x,y):(y=i(y,_.children||[]),y.return=x,y)}function f(x,y,_,N,V){return y===null||y.tag!==7?(y=Di(_,x.mode,N,V),y.return=x,y):(y=i(y,_),y.return=x,y)}function m(x,y,_){if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return y=Yh(""+y,x.mode,_),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Vo:return _=uu(y.type,y.key,y.props,null,x.mode,_),zs(_,y),_.return=x,_;case $s:return y=Qh(y,x.mode,_),y.return=x,y;case Aa:return y=Si(y),m(x,y,_)}if(Xs(y)||ks(y))return y=Di(y,x.mode,_,null),y.return=x,y;if(typeof y.then=="function")return m(x,Bo(y),_);if(y.$$typeof===Kn)return m(x,zo(x,y),_);qo(x,y)}return null}function d(x,y,_,N){var V=y!==null?y.key:null;if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return V!==null?null:o(x,y,""+_,N);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Vo:return _.key===V?u(x,y,_,N):null;case $s:return _.key===V?c(x,y,_,N):null;case Aa:return _=Si(_),d(x,y,_,N)}if(Xs(_)||ks(_))return V!==null?null:f(x,y,_,N,null);if(typeof _.then=="function")return d(x,y,Bo(_),N);if(_.$$typeof===Kn)return d(x,y,zo(x,_),N);qo(x,_)}return null}function v(x,y,_,N,V){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return x=x.get(_)||null,o(y,x,""+N,V);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Vo:return x=x.get(N.key===null?_:N.key)||null,u(y,x,N,V);case $s:return x=x.get(N.key===null?_:N.key)||null,c(y,x,N,V);case Aa:return N=Si(N),v(x,y,_,N,V)}if(Xs(N)||ks(N))return x=x.get(_)||null,f(y,x,N,V,null);if(typeof N.then=="function")return v(x,y,_,Bo(N),V);if(N.$$typeof===Kn)return v(x,y,_,zo(y,N),V);qo(y,N)}return null}function R(x,y,_,N){for(var V=null,k=null,E=y,b=y=0,S=null;E!==null&&b<_.length;b++){E.index>b?(S=E,E=null):S=E.sibling;var C=d(x,E,_[b],N);if(C===null){E===null&&(E=S);break}t&&E&&C.alternate===null&&e(x,E),y=r(C,y,b),k===null?V=C:k.sibling=C,k=C,E=S}if(b===_.length)return n(x,E),se&&$n(x,b),V;if(E===null){for(;b<_.length;b++)E=m(x,_[b],N),E!==null&&(y=r(E,y,b),k===null?V=E:k.sibling=E,k=E);return se&&$n(x,b),V}for(E=a(E);b<_.length;b++)S=v(E,x,b,_[b],N),S!==null&&(t&&S.alternate!==null&&E.delete(S.key===null?b:S.key),y=r(S,y,b),k===null?V=S:k.sibling=S,k=S);return t&&E.forEach(function(w){return e(x,w)}),se&&$n(x,b),V}function O(x,y,_,N){if(_==null)throw Error(P(151));for(var V=null,k=null,E=y,b=y=0,S=null,C=_.next();E!==null&&!C.done;b++,C=_.next()){E.index>b?(S=E,E=null):S=E.sibling;var w=d(x,E,C.value,N);if(w===null){E===null&&(E=S);break}t&&E&&w.alternate===null&&e(x,E),y=r(w,y,b),k===null?V=w:k.sibling=w,k=w,E=S}if(C.done)return n(x,E),se&&$n(x,b),V;if(E===null){for(;!C.done;b++,C=_.next())C=m(x,C.value,N),C!==null&&(y=r(C,y,b),k===null?V=C:k.sibling=C,k=C);return se&&$n(x,b),V}for(E=a(E);!C.done;b++,C=_.next())C=v(E,x,b,C.value,N),C!==null&&(t&&C.alternate!==null&&E.delete(C.key===null?b:C.key),y=r(C,y,b),k===null?V=C:k.sibling=C,k=C);return t&&E.forEach(function(I){return e(x,I)}),se&&$n(x,b),V}function D(x,y,_,N){if(typeof _=="object"&&_!==null&&_.type===yr&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Vo:e:{for(var V=_.key;y!==null;){if(y.key===V){if(V=_.type,V===yr){if(y.tag===7){n(x,y.sibling),N=i(y,_.props.children),N.return=x,x=N;break e}}else if(y.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Aa&&Si(V)===y.type){n(x,y.sibling),N=i(y,_.props),zs(N,_),N.return=x,x=N;break e}n(x,y);break}else e(x,y);y=y.sibling}_.type===yr?(N=Di(_.props.children,x.mode,N,_.key),N.return=x,x=N):(N=uu(_.type,_.key,_.props,null,x.mode,N),zs(N,_),N.return=x,x=N)}return s(x);case $s:e:{for(V=_.key;y!==null;){if(y.key===V)if(y.tag===4&&y.stateNode.containerInfo===_.containerInfo&&y.stateNode.implementation===_.implementation){n(x,y.sibling),N=i(y,_.children||[]),N.return=x,x=N;break e}else{n(x,y);break}else e(x,y);y=y.sibling}N=Qh(_,x.mode,N),N.return=x,x=N}return s(x);case Aa:return _=Si(_),D(x,y,_,N)}if(Xs(_))return R(x,y,_,N);if(ks(_)){if(V=ks(_),typeof V!="function")throw Error(P(150));return _=V.call(_),O(x,y,_,N)}if(typeof _.then=="function")return D(x,y,Bo(_),N);if(_.$$typeof===Kn)return D(x,y,zo(x,_),N);qo(x,_)}return typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint"?(_=""+_,y!==null&&y.tag===6?(n(x,y.sibling),N=i(y,_),N.return=x,x=N):(n(x,y),N=Yh(_,x.mode,N),N.return=x,x=N),s(x)):n(x,y)}return function(x,y,_,N){try{Dl=0;var V=D(x,y,_,N);return Vr=null,V}catch(E){if(E===us||E===Oc)throw E;var k=Gt(29,E,null,x.mode);return k.lanes=N,k.return=x,k}finally{}}}var Pi=bb(!0),Eb=bb(!1),Ra=!1;function Sm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function td(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ba(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function qa(t,e,n){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,ce&2){var i=a.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),a.pending=e,e=Lu(t),fb(t,null,n),e}return Ic(t,a,e,n),Lu(t)}function ul(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var a=e.lanes;a&=t.pendingLanes,n|=a,e.lanes=n,P_(t,n)}}function Xh(t,e){var n=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var i=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?i=r=s:r=r.next=s,n=n.next}while(n!==null);r===null?i=r=e:r=r.next=e}else i=r=e;n={baseState:a.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:a.shared,callbacks:a.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var nd=!1;function cl(){if(nd){var t=Mr;if(t!==null)throw t}}function hl(t,e,n,a){nd=!1;var i=t.updateQueue;Ra=!1;var r=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var u=o,c=u.next;u.next=null,s===null?r=c:s.next=c,s=u;var f=t.alternate;f!==null&&(f=f.updateQueue,o=f.lastBaseUpdate,o!==s&&(o===null?f.firstBaseUpdate=c:o.next=c,f.lastBaseUpdate=u))}if(r!==null){var m=i.baseState;s=0,f=c=u=null,o=r;do{var d=o.lane&-536870913,v=d!==o.lane;if(v?(re&d)===d:(a&d)===d){d!==0&&d===Hr&&(nd=!0),f!==null&&(f=f.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var R=t,O=o;d=e;var D=n;switch(O.tag){case 1:if(R=O.payload,typeof R=="function"){m=R.call(D,m,d);break e}m=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=O.payload,d=typeof R=="function"?R.call(D,m,d):R,d==null)break e;m=Ne({},m,d);break e;case 2:Ra=!0}}d=o.callback,d!==null&&(t.flags|=64,v&&(t.flags|=8192),v=i.callbacks,v===null?i.callbacks=[d]:v.push(d))}else v={lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},f===null?(c=f=v,u=m):f=f.next=v,s|=d;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;v=o,o=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(!0);f===null&&(u=m),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=f,r===null&&(i.shared.lanes=0),ni|=s,t.lanes=s,t.memoizedState=m}}function Tb(t,e){if(typeof t!="function")throw Error(P(191,t));t.call(e)}function xb(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)Tb(n[t],e)}var Fr=Pn(null),zu=Pn(0);function Vy(t,e){t=oa,Te(zu,t),Te(Fr,e),oa=t|e.baseLanes}function ad(){Te(zu,oa),Te(Fr,Fr.current)}function wm(){oa=zu.current,it(Fr),it(zu)}var tn=Pn(null),fn=null;function Na(t){var e=t.alternate;Te(ze,ze.current&1),Te(tn,t),fn===null&&(e===null||Fr.current!==null||e.memoizedState!==null)&&(fn=t)}function id(t){Te(ze,ze.current),Te(tn,t),fn===null&&(fn=t)}function Sb(t){t.tag===22?(Te(ze,ze.current),Te(tn,t),fn===null&&(fn=t)):Da()}function Da(){Te(ze,ze.current),Te(tn,tn.current)}function Ft(t){it(tn),fn===t&&(fn=null),it(ze)}var ze=Pn(0);function Bu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||xd(n)||Sd(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ra=0,Z=null,ve=null,Fe=null,qu=!1,jr=!1,zi=!1,Hu=0,Il=0,Lr=null,DA=0;function Ve(){throw Error(P(321))}function Am(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!en(t[n],e[n]))return!1;return!0}function Rm(t,e,n,a,i,r){return ra=r,Z=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Q.H=t===null||t.memoizedState===null?tE:Um,zi=!1,r=n(a,i),zi=!1,jr&&(r=Ab(e,n,a,i)),wb(t),r}function wb(t){Q.H=Ol;var e=ve!==null&&ve.next!==null;if(ra=0,Fe=ve=Z=null,qu=!1,Il=0,Lr=null,e)throw Error(P(300));t===null||$e||(t=t.dependencies,t!==null&&Uu(t)&&($e=!0))}function Ab(t,e,n,a){Z=t;var i=0;do{if(jr&&(Lr=null),Il=0,jr=!1,25<=i)throw Error(P(301));if(i+=1,Fe=ve=null,t.updateQueue!=null){var r=t.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}Q.H=nE,r=e(n,a)}while(jr);return r}function IA(){var t=Q.H,e=t.useState()[0];return e=typeof e.then=="function"?no(e):e,t=t.useState()[0],(ve!==null?ve.memoizedState:null)!==t&&(Z.flags|=1024),e}function Cm(){var t=Hu!==0;return Hu=0,t}function Nm(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function Dm(t){if(qu){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}qu=!1}ra=0,Fe=ve=Z=null,jr=!1,Il=Hu=0,Lr=null}function At(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?Z.memoizedState=Fe=t:Fe=Fe.next=t,Fe}function Be(){if(ve===null){var t=Z.alternate;t=t!==null?t.memoizedState:null}else t=ve.next;var e=Fe===null?Z.memoizedState:Fe.next;if(e!==null)Fe=e,ve=t;else{if(t===null)throw Z.alternate===null?Error(P(467)):Error(P(310));ve=t,t={memoizedState:ve.memoizedState,baseState:ve.baseState,baseQueue:ve.baseQueue,queue:ve.queue,next:null},Fe===null?Z.memoizedState=Fe=t:Fe=Fe.next=t}return Fe}function Mc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function no(t){var e=Il;return Il+=1,Lr===null&&(Lr=[]),t=_b(Lr,t,e),e=Z,(Fe===null?e.memoizedState:Fe.next)===null&&(e=e.alternate,Q.H=e===null||e.memoizedState===null?tE:Um),t}function Vc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return no(t);if(t.$$typeof===Kn)return ht(t)}throw Error(P(438,String(t)))}function Im(t){var e=null,n=Z.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var a=Z.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(e={data:a.data.map(function(i){return i.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=Mc(),Z.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),a=0;a<t;a++)n[a]=pw;return e.index++,n}function sa(t,e){return typeof e=="function"?e(t):e}function hu(t){var e=Be();return Om(e,ve,t)}function Om(t,e,n){var a=t.queue;if(a===null)throw Error(P(311));a.lastRenderedReducer=n;var i=t.baseQueue,r=a.pending;if(r!==null){if(i!==null){var s=i.next;i.next=r.next,r.next=s}e.baseQueue=i=r,a.pending=null}if(r=t.baseState,i===null)t.memoizedState=r;else{e=i.next;var o=s=null,u=null,c=e,f=!1;do{var m=c.lane&-536870913;if(m!==c.lane?(re&m)===m:(ra&m)===m){var d=c.revertLane;if(d===0)u!==null&&(u=u.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),m===Hr&&(f=!0);else if((ra&d)===d){c=c.next,d===Hr&&(f=!0);continue}else m={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},u===null?(o=u=m,s=r):u=u.next=m,Z.lanes|=d,ni|=d;m=c.action,zi&&n(r,m),r=c.hasEagerState?c.eagerState:n(r,m)}else d={lane:m,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},u===null?(o=u=d,s=r):u=u.next=d,Z.lanes|=m,ni|=m;c=c.next}while(c!==null&&c!==e);if(u===null?s=r:u.next=o,!en(r,t.memoizedState)&&($e=!0,f&&(n=Mr,n!==null)))throw n;t.memoizedState=r,t.baseState=s,t.baseQueue=u,a.lastRenderedState=r}return i===null&&(a.lanes=0),[t.memoizedState,a.dispatch]}function Kh(t){var e=Be(),n=e.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=t;var a=n.dispatch,i=n.pending,r=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do r=t(r,s.action),s=s.next;while(s!==i);en(r,e.memoizedState)||($e=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,a]}function Rb(t,e,n){var a=Z,i=Be(),r=se;if(r){if(n===void 0)throw Error(P(407));n=n()}else n=e();var s=!en((ve||i).memoizedState,n);if(s&&(i.memoizedState=n,$e=!0),i=i.queue,Mm(Db.bind(null,a,i,t),[t]),i.getSnapshot!==e||s||Fe!==null&&Fe.memoizedState.tag&1){if(a.flags|=2048,Gr(9,{destroy:void 0},Nb.bind(null,a,i,n,e),null),be===null)throw Error(P(349));r||ra&127||Cb(a,e,n)}return n}function Cb(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Z.updateQueue,e===null?(e=Mc(),Z.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Nb(t,e,n,a){e.value=n,e.getSnapshot=a,Ib(e)&&Ob(t)}function Db(t,e,n){return n(function(){Ib(e)&&Ob(t)})}function Ib(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!en(t,n)}catch{return!0}}function Ob(t){var e=Ki(t,2);e!==null&&Lt(e,t,2)}function rd(t){var e=At();if(typeof t=="function"){var n=t;if(t=n(),zi){Ma(!0);try{n()}finally{Ma(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sa,lastRenderedState:t},e}function Mb(t,e,n,a){return t.baseState=n,Om(t,ve,typeof a=="function"?a:sa)}function OA(t,e,n,a,i){if(Lc(t))throw Error(P(485));if(t=e.action,t!==null){var r={payload:i,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(s){r.listeners.push(s)}};Q.T!==null?n(!0):r.isTransition=!1,a(r),n=e.pending,n===null?(r.next=e.pending=r,Vb(e,r)):(r.next=n.next,e.pending=n.next=r)}}function Vb(t,e){var n=e.action,a=e.payload,i=t.state;if(e.isTransition){var r=Q.T,s={};Q.T=s;try{var o=n(i,a),u=Q.S;u!==null&&u(s,o),jy(t,e,o)}catch(c){sd(t,e,c)}finally{r!==null&&s.types!==null&&(r.types=s.types),Q.T=r}}else try{r=n(i,a),jy(t,e,r)}catch(c){sd(t,e,c)}}function jy(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(a){Ly(t,e,a)},function(a){return sd(t,e,a)}):Ly(t,e,n)}function Ly(t,e,n){e.status="fulfilled",e.value=n,jb(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,Vb(t,n)))}function sd(t,e,n){var a=t.pending;if(t.pending=null,a!==null){a=a.next;do e.status="rejected",e.reason=n,jb(e),e=e.next;while(e!==a)}t.action=null}function jb(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function Lb(t,e){return e}function ky(t,e){if(se){var n=be.formState;if(n!==null){e:{var a=Z;if(se){if(Ae){t:{for(var i=Ae,r=un;i.nodeType!==8;){if(!r){i=null;break t}if(i=dn(i.nextSibling),i===null){i=null;break t}}r=i.data,i=r==="F!"||r==="F"?i:null}if(i){Ae=dn(i.nextSibling),a=i.data==="F!";break e}}ei(a)}a=!1}a&&(e=n[0])}}return n=At(),n.memoizedState=n.baseState=e,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lb,lastRenderedState:e},n.queue=a,n=Jb.bind(null,Z,a),a.dispatch=n,a=rd(!1),r=km.bind(null,Z,!1,a.queue),a=At(),i={state:e,dispatch:null,action:t,pending:null},a.queue=i,n=OA.bind(null,Z,i,r,n),i.dispatch=n,a.memoizedState=t,[e,n,!1]}function Uy(t){var e=Be();return kb(e,ve,t)}function kb(t,e,n){if(e=Om(t,e,Lb)[0],t=hu(sa)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var a=no(e)}catch(s){throw s===us?Oc:s}else a=e;e=Be();var i=e.queue,r=i.dispatch;return n!==e.memoizedState&&(Z.flags|=2048,Gr(9,{destroy:void 0},MA.bind(null,i,n),null)),[a,r,t]}function MA(t,e){t.action=e}function Py(t){var e=Be(),n=ve;if(n!==null)return kb(e,n,t);Be(),e=e.memoizedState,n=Be();var a=n.queue.dispatch;return n.memoizedState=t,[e,a,!1]}function Gr(t,e,n,a){return t={tag:t,create:n,deps:a,inst:e,next:null},e=Z.updateQueue,e===null&&(e=Mc(),Z.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(a=n.next,n.next=t,t.next=a,e.lastEffect=t),t}function Ub(){return Be().memoizedState}function fu(t,e,n,a){var i=At();Z.flags|=t,i.memoizedState=Gr(1|e,{destroy:void 0},n,a===void 0?null:a)}function jc(t,e,n,a){var i=Be();a=a===void 0?null:a;var r=i.memoizedState.inst;ve!==null&&a!==null&&Am(a,ve.memoizedState.deps)?i.memoizedState=Gr(e,r,n,a):(Z.flags|=t,i.memoizedState=Gr(1|e,r,n,a))}function zy(t,e){fu(8390656,8,t,e)}function Mm(t,e){jc(2048,8,t,e)}function VA(t){Z.flags|=4;var e=Z.updateQueue;if(e===null)e=Mc(),Z.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function Pb(t){var e=Be().memoizedState;return VA({ref:e,nextImpl:t}),function(){if(ce&2)throw Error(P(440));return e.impl.apply(void 0,arguments)}}function zb(t,e){return jc(4,2,t,e)}function Bb(t,e){return jc(4,4,t,e)}function qb(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Hb(t,e,n){n=n!=null?n.concat([t]):null,jc(4,4,qb.bind(null,e,t),n)}function Vm(){}function Fb(t,e){var n=Be();e=e===void 0?null:e;var a=n.memoizedState;return e!==null&&Am(e,a[1])?a[0]:(n.memoizedState=[t,e],t)}function Gb(t,e){var n=Be();e=e===void 0?null:e;var a=n.memoizedState;if(e!==null&&Am(e,a[1]))return a[0];if(a=t(),zi){Ma(!0);try{t()}finally{Ma(!1)}}return n.memoizedState=[a,e],a}function jm(t,e,n){return n===void 0||ra&1073741824&&!(re&261930)?t.memoizedState=e:(t.memoizedState=n,t=ME(),Z.lanes|=t,ni|=t,n)}function Yb(t,e,n,a){return en(n,e)?n:Fr.current!==null?(t=jm(t,n,a),en(t,e)||($e=!0),t):!(ra&42)||ra&1073741824&&!(re&261930)?($e=!0,t.memoizedState=n):(t=ME(),Z.lanes|=t,ni|=t,e)}function Qb(t,e,n,a,i){var r=he.p;he.p=r!==0&&8>r?r:8;var s=Q.T,o={};Q.T=o,km(t,!1,e,n);try{var u=i(),c=Q.S;if(c!==null&&c(o,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var f=NA(u,a);fl(t,e,f,Jt(t))}else fl(t,e,a,Jt(t))}catch(m){fl(t,e,{then:function(){},status:"rejected",reason:m},Jt())}finally{he.p=r,s!==null&&o.types!==null&&(s.types=o.types),Q.T=s}}function jA(){}function ld(t,e,n,a){if(t.tag!==5)throw Error(P(476));var i=$b(t).queue;Qb(t,i,e,Ni,n===null?jA:function(){return Xb(t),n(a)})}function $b(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Ni,baseState:Ni,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sa,lastRenderedState:Ni},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sa,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function Xb(t){var e=$b(t);e.next===null&&(e=t.alternate.memoizedState),fl(t,e.next.queue,{},Jt())}function Lm(){return ht(jl)}function Kb(){return Be().memoizedState}function Wb(){return Be().memoizedState}function LA(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=Jt();t=Ba(n);var a=qa(e,t,n);a!==null&&(Lt(a,e,n),ul(a,e,n)),e={cache:Em()},t.payload=e;return}e=e.return}}function kA(t,e,n){var a=Jt();n={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Lc(t)?Zb(e,n):(n=ym(t,e,n,a),n!==null&&(Lt(n,t,a),eE(n,e,a)))}function Jb(t,e,n){var a=Jt();fl(t,e,n,a)}function fl(t,e,n,a){var i={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Lc(t))Zb(e,i);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var s=e.lastRenderedState,o=r(s,n);if(i.hasEagerState=!0,i.eagerState=o,en(o,s))return Ic(t,e,i,0),be===null&&Dc(),!1}catch{}finally{}if(n=ym(t,e,i,a),n!==null)return Lt(n,t,a),eE(n,e,a),!0}return!1}function km(t,e,n,a){if(a={lane:2,revertLane:Ym(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Lc(t)){if(e)throw Error(P(479))}else e=ym(t,n,a,2),e!==null&&Lt(e,t,2)}function Lc(t){var e=t.alternate;return t===Z||e!==null&&e===Z}function Zb(t,e){jr=qu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function eE(t,e,n){if(n&4194048){var a=e.lanes;a&=t.pendingLanes,n|=a,e.lanes=n,P_(t,n)}}var Ol={readContext:ht,use:Vc,useCallback:Ve,useContext:Ve,useEffect:Ve,useImperativeHandle:Ve,useLayoutEffect:Ve,useInsertionEffect:Ve,useMemo:Ve,useReducer:Ve,useRef:Ve,useState:Ve,useDebugValue:Ve,useDeferredValue:Ve,useTransition:Ve,useSyncExternalStore:Ve,useId:Ve,useHostTransitionStatus:Ve,useFormState:Ve,useActionState:Ve,useOptimistic:Ve,useMemoCache:Ve,useCacheRefresh:Ve};Ol.useEffectEvent=Ve;var tE={readContext:ht,use:Vc,useCallback:function(t,e){return At().memoizedState=[t,e===void 0?null:e],t},useContext:ht,useEffect:zy,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,fu(4194308,4,qb.bind(null,e,t),n)},useLayoutEffect:function(t,e){return fu(4194308,4,t,e)},useInsertionEffect:function(t,e){fu(4,2,t,e)},useMemo:function(t,e){var n=At();e=e===void 0?null:e;var a=t();if(zi){Ma(!0);try{t()}finally{Ma(!1)}}return n.memoizedState=[a,e],a},useReducer:function(t,e,n){var a=At();if(n!==void 0){var i=n(e);if(zi){Ma(!0);try{n(e)}finally{Ma(!1)}}}else i=e;return a.memoizedState=a.baseState=i,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},a.queue=t,t=t.dispatch=kA.bind(null,Z,t),[a.memoizedState,t]},useRef:function(t){var e=At();return t={current:t},e.memoizedState=t},useState:function(t){t=rd(t);var e=t.queue,n=Jb.bind(null,Z,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:Vm,useDeferredValue:function(t,e){var n=At();return jm(n,t,e)},useTransition:function(){var t=rd(!1);return t=Qb.bind(null,Z,t.queue,!0,!1),At().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var a=Z,i=At();if(se){if(n===void 0)throw Error(P(407));n=n()}else{if(n=e(),be===null)throw Error(P(349));re&127||Cb(a,e,n)}i.memoizedState=n;var r={value:n,getSnapshot:e};return i.queue=r,zy(Db.bind(null,a,r,t),[t]),a.flags|=2048,Gr(9,{destroy:void 0},Nb.bind(null,a,r,n,e),null),n},useId:function(){var t=At(),e=be.identifierPrefix;if(se){var n=Dn,a=Nn;n=(a&~(1<<32-Wt(a)-1)).toString(32)+n,e="_"+e+"R_"+n,n=Hu++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=DA++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:Lm,useFormState:ky,useActionState:ky,useOptimistic:function(t){var e=At();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=km.bind(null,Z,!0,n),n.dispatch=e,[t,e]},useMemoCache:Im,useCacheRefresh:function(){return At().memoizedState=LA.bind(null,Z)},useEffectEvent:function(t){var e=At(),n={impl:t};return e.memoizedState=n,function(){if(ce&2)throw Error(P(440));return n.impl.apply(void 0,arguments)}}},Um={readContext:ht,use:Vc,useCallback:Fb,useContext:ht,useEffect:Mm,useImperativeHandle:Hb,useInsertionEffect:zb,useLayoutEffect:Bb,useMemo:Gb,useReducer:hu,useRef:Ub,useState:function(){return hu(sa)},useDebugValue:Vm,useDeferredValue:function(t,e){var n=Be();return Yb(n,ve.memoizedState,t,e)},useTransition:function(){var t=hu(sa)[0],e=Be().memoizedState;return[typeof t=="boolean"?t:no(t),e]},useSyncExternalStore:Rb,useId:Kb,useHostTransitionStatus:Lm,useFormState:Uy,useActionState:Uy,useOptimistic:function(t,e){var n=Be();return Mb(n,ve,t,e)},useMemoCache:Im,useCacheRefresh:Wb};Um.useEffectEvent=Pb;var nE={readContext:ht,use:Vc,useCallback:Fb,useContext:ht,useEffect:Mm,useImperativeHandle:Hb,useInsertionEffect:zb,useLayoutEffect:Bb,useMemo:Gb,useReducer:Kh,useRef:Ub,useState:function(){return Kh(sa)},useDebugValue:Vm,useDeferredValue:function(t,e){var n=Be();return ve===null?jm(n,t,e):Yb(n,ve.memoizedState,t,e)},useTransition:function(){var t=Kh(sa)[0],e=Be().memoizedState;return[typeof t=="boolean"?t:no(t),e]},useSyncExternalStore:Rb,useId:Kb,useHostTransitionStatus:Lm,useFormState:Py,useActionState:Py,useOptimistic:function(t,e){var n=Be();return ve!==null?Mb(n,ve,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:Im,useCacheRefresh:Wb};nE.useEffectEvent=Pb;function Wh(t,e,n,a){e=t.memoizedState,n=n(a,e),n=n==null?e:Ne({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var od={enqueueSetState:function(t,e,n){t=t._reactInternals;var a=Jt(),i=Ba(a);i.payload=e,n!=null&&(i.callback=n),e=qa(t,i,a),e!==null&&(Lt(e,t,a),ul(e,t,a))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var a=Jt(),i=Ba(a);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=qa(t,i,a),e!==null&&(Lt(e,t,a),ul(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Jt(),a=Ba(n);a.tag=2,e!=null&&(a.callback=e),e=qa(t,a,n),e!==null&&(Lt(e,t,n),ul(e,t,n))}};function By(t,e,n,a,i,r,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,r,s):e.prototype&&e.prototype.isPureReactComponent?!Rl(n,a)||!Rl(i,r):!0}function qy(t,e,n,a){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,a),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,a),e.state!==t&&od.enqueueReplaceState(e,e.state,null)}function Bi(t,e){var n=e;if("ref"in e){n={};for(var a in e)a!=="ref"&&(n[a]=e[a])}if(t=t.defaultProps){n===e&&(n=Ne({},n));for(var i in t)n[i]===void 0&&(n[i]=t[i])}return n}function aE(t){ju(t)}function iE(t){console.error(t)}function rE(t){ju(t)}function Fu(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(a){setTimeout(function(){throw a})}}function Hy(t,e,n){try{var a=t.onCaughtError;a(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function ud(t,e,n){return n=Ba(n),n.tag=3,n.payload={element:null},n.callback=function(){Fu(t,e)},n}function sE(t){return t=Ba(t),t.tag=3,t}function lE(t,e,n,a){var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=a.value;t.payload=function(){return i(r)},t.callback=function(){Hy(e,n,a)}}var s=n.stateNode;s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){Hy(e,n,a),typeof i!="function"&&(Ha===null?Ha=new Set([this]):Ha.add(this));var o=a.stack;this.componentDidCatch(a.value,{componentStack:o!==null?o:""})})}function UA(t,e,n,a,i){if(n.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(e=n.alternate,e!==null&&os(e,n,i,!0),n=tn.current,n!==null){switch(n.tag){case 31:case 13:return fn===null?Xu():n.alternate===null&&je===0&&(je=3),n.flags&=-257,n.flags|=65536,n.lanes=i,a===Pu?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([a]):e.add(a),uf(t,a,i)),!1;case 22:return n.flags|=65536,a===Pu?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([a]):n.add(a)),uf(t,a,i)),!1}throw Error(P(435,n.tag))}return uf(t,a,i),Xu(),!1}if(se)return e=tn.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=i,a!==Kf&&(t=Error(P(422),{cause:a}),Nl(on(t,n)))):(a!==Kf&&(e=Error(P(423),{cause:a}),Nl(on(e,n))),t=t.current.alternate,t.flags|=65536,i&=-i,t.lanes|=i,a=on(a,n),i=ud(t.stateNode,a,i),Xh(t,i),je!==4&&(je=2)),!1;var r=Error(P(520),{cause:a});if(r=on(r,n),gl===null?gl=[r]:gl.push(r),je!==4&&(je=2),e===null)return!0;a=on(a,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=i&-i,n.lanes|=t,t=ud(n.stateNode,a,t),Xh(n,t),!1;case 1:if(e=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(Ha===null||!Ha.has(r))))return n.flags|=65536,i&=-i,n.lanes|=i,i=sE(i),lE(i,t,n,a),Xh(n,i),!1}n=n.return}while(n!==null);return!1}var Pm=Error(P(461)),$e=!1;function st(t,e,n,a){e.child=t===null?Eb(e,null,n,a):Pi(e,t.child,n,a)}function Fy(t,e,n,a,i){n=n.render;var r=e.ref;if("ref"in a){var s={};for(var o in a)o!=="ref"&&(s[o]=a[o])}else s=a;return Ui(e),a=Rm(t,e,n,s,r,i),o=Cm(),t!==null&&!$e?(Nm(t,e,i),la(t,e,i)):(se&&o&&_m(e),e.flags|=1,st(t,e,a,i),e.child)}function Gy(t,e,n,a,i){if(t===null){var r=n.type;return typeof r=="function"&&!vm(r)&&r.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=r,oE(t,e,r,a,i)):(t=uu(n.type,null,a,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!zm(t,i)){var s=r.memoizedProps;if(n=n.compare,n=n!==null?n:Rl,n(s,a)&&t.ref===e.ref)return la(t,e,i)}return e.flags|=1,t=Zn(r,a),t.ref=e.ref,t.return=e,e.child=t}function oE(t,e,n,a,i){if(t!==null){var r=t.memoizedProps;if(Rl(r,a)&&t.ref===e.ref)if($e=!1,e.pendingProps=a=r,zm(t,i))t.flags&131072&&($e=!0);else return e.lanes=t.lanes,la(t,e,i)}return cd(t,e,n,a,i)}function uE(t,e,n,a){var i=a.children,r=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if(e.flags&128){if(r=r!==null?r.baseLanes|n:n,t!==null){for(a=e.child=t.child,i=0;a!==null;)i=i|a.lanes|a.childLanes,a=a.sibling;a=i&~r}else a=0,e.child=null;return Yy(t,e,r,n,a)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&cu(e,r!==null?r.cachePool:null),r!==null?Vy(e,r):ad(),Sb(e);else return a=e.lanes=536870912,Yy(t,e,r!==null?r.baseLanes|n:n,n,a)}else r!==null?(cu(e,r.cachePool),Vy(e,r),Da(),e.memoizedState=null):(t!==null&&cu(e,null),ad(),Da());return st(t,e,i,n),e.child}function Ws(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function Yy(t,e,n,a,i){var r=Tm();return r=r===null?null:{parent:Ye._currentValue,pool:r},e.memoizedState={baseLanes:n,cachePool:r},t!==null&&cu(e,null),ad(),Sb(e),t!==null&&os(t,e,a,!0),e.childLanes=i,null}function du(t,e){return e=Gu({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function Qy(t,e,n){return Pi(e,t.child,null,n),t=du(e,e.pendingProps),t.flags|=2,Ft(e),e.memoizedState=null,t}function PA(t,e,n){var a=e.pendingProps,i=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(se){if(a.mode==="hidden")return t=du(e,a),e.lanes=536870912,Ws(null,t);if(id(e),(t=Ae)?(t=tT(t,un),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Za!==null?{id:Nn,overflow:Dn}:null,retryLane:536870912,hydrationErrors:null},n=mb(t),n.return=e,e.child=n,ut=e,Ae=null)):t=null,t===null)throw ei(e);return e.lanes=536870912,null}return du(e,a)}var r=t.memoizedState;if(r!==null){var s=r.dehydrated;if(id(e),i)if(e.flags&256)e.flags&=-257,e=Qy(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(P(558));else if($e||os(t,e,n,!1),i=(n&t.childLanes)!==0,$e||i){if(a=be,a!==null&&(s=z_(a,n),s!==0&&s!==r.retryLane))throw r.retryLane=s,Ki(t,s),Lt(a,t,s),Pm;Xu(),e=Qy(t,e,n)}else t=r.treeContext,Ae=dn(s.nextSibling),ut=e,se=!0,za=null,un=!1,t!==null&&pb(e,t),e=du(e,a),e.flags|=4096;return e}return t=Zn(t.child,{mode:a.mode,children:a.children}),t.ref=e.ref,e.child=t,t.return=e,t}function mu(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(P(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function cd(t,e,n,a,i){return Ui(e),n=Rm(t,e,n,a,void 0,i),a=Cm(),t!==null&&!$e?(Nm(t,e,i),la(t,e,i)):(se&&a&&_m(e),e.flags|=1,st(t,e,n,i),e.child)}function $y(t,e,n,a,i,r){return Ui(e),e.updateQueue=null,n=Ab(e,a,n,i),wb(t),a=Cm(),t!==null&&!$e?(Nm(t,e,r),la(t,e,r)):(se&&a&&_m(e),e.flags|=1,st(t,e,n,r),e.child)}function Xy(t,e,n,a,i){if(Ui(e),e.stateNode===null){var r=wr,s=n.contextType;typeof s=="object"&&s!==null&&(r=ht(s)),r=new n(a,r),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=od,e.stateNode=r,r._reactInternals=e,r=e.stateNode,r.props=a,r.state=e.memoizedState,r.refs={},Sm(e),s=n.contextType,r.context=typeof s=="object"&&s!==null?ht(s):wr,r.state=e.memoizedState,s=n.getDerivedStateFromProps,typeof s=="function"&&(Wh(e,n,s,a),r.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(s=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),s!==r.state&&od.enqueueReplaceState(r,r.state,null),hl(e,a,r,i),cl(),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308),a=!0}else if(t===null){r=e.stateNode;var o=e.memoizedProps,u=Bi(n,o);r.props=u;var c=r.context,f=n.contextType;s=wr,typeof f=="object"&&f!==null&&(s=ht(f));var m=n.getDerivedStateFromProps;f=typeof m=="function"||typeof r.getSnapshotBeforeUpdate=="function",o=e.pendingProps!==o,f||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(o||c!==s)&&qy(e,r,a,s),Ra=!1;var d=e.memoizedState;r.state=d,hl(e,a,r,i),cl(),c=e.memoizedState,o||d!==c||Ra?(typeof m=="function"&&(Wh(e,n,m,a),c=e.memoizedState),(u=Ra||By(e,n,u,a,d,c,s))?(f||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(e.flags|=4194308)):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=a,e.memoizedState=c),r.props=a,r.state=c,r.context=s,a=u):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),a=!1)}else{r=e.stateNode,td(t,e),s=e.memoizedProps,f=Bi(n,s),r.props=f,m=e.pendingProps,d=r.context,c=n.contextType,u=wr,typeof c=="object"&&c!==null&&(u=ht(c)),o=n.getDerivedStateFromProps,(c=typeof o=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(s!==m||d!==u)&&qy(e,r,a,u),Ra=!1,d=e.memoizedState,r.state=d,hl(e,a,r,i),cl();var v=e.memoizedState;s!==m||d!==v||Ra||t!==null&&t.dependencies!==null&&Uu(t.dependencies)?(typeof o=="function"&&(Wh(e,n,o,a),v=e.memoizedState),(f=Ra||By(e,n,f,a,d,v,u)||t!==null&&t.dependencies!==null&&Uu(t.dependencies))?(c||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(a,v,u),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(a,v,u)),typeof r.componentDidUpdate=="function"&&(e.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof r.componentDidUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=a,e.memoizedState=v),r.props=a,r.state=v,r.context=u,a=f):(typeof r.componentDidUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),a=!1)}return r=a,mu(t,e),a=(e.flags&128)!==0,r||a?(r=e.stateNode,n=a&&typeof n.getDerivedStateFromError!="function"?null:r.render(),e.flags|=1,t!==null&&a?(e.child=Pi(e,t.child,null,i),e.child=Pi(e,null,n,i)):st(t,e,n,i),e.memoizedState=r.state,t=e.child):t=la(t,e,i),t}function Ky(t,e,n,a){return ki(),e.flags|=256,st(t,e,n,a),e.child}var Jh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zh(t){return{baseLanes:t,cachePool:vb()}}function ef(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=Yt),t}function cE(t,e,n){var a=e.pendingProps,i=!1,r=(e.flags&128)!==0,s;if((s=r)||(s=t!==null&&t.memoizedState===null?!1:(ze.current&2)!==0),s&&(i=!0,e.flags&=-129),s=(e.flags&32)!==0,e.flags&=-33,t===null){if(se){if(i?Na(e):Da(),(t=Ae)?(t=tT(t,un),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Za!==null?{id:Nn,overflow:Dn}:null,retryLane:536870912,hydrationErrors:null},n=mb(t),n.return=e,e.child=n,ut=e,Ae=null)):t=null,t===null)throw ei(e);return Sd(t)?e.lanes=32:e.lanes=536870912,null}var o=a.children;return a=a.fallback,i?(Da(),i=e.mode,o=Gu({mode:"hidden",children:o},i),a=Di(a,i,n,null),o.return=e,a.return=e,o.sibling=a,e.child=o,a=e.child,a.memoizedState=Zh(n),a.childLanes=ef(t,s,n),e.memoizedState=Jh,Ws(null,a)):(Na(e),hd(e,o))}var u=t.memoizedState;if(u!==null&&(o=u.dehydrated,o!==null)){if(r)e.flags&256?(Na(e),e.flags&=-257,e=tf(t,e,n)):e.memoizedState!==null?(Da(),e.child=t.child,e.flags|=128,e=null):(Da(),o=a.fallback,i=e.mode,a=Gu({mode:"visible",children:a.children},i),o=Di(o,i,n,null),o.flags|=2,a.return=e,o.return=e,a.sibling=o,e.child=a,Pi(e,t.child,null,n),a=e.child,a.memoizedState=Zh(n),a.childLanes=ef(t,s,n),e.memoizedState=Jh,e=Ws(null,a));else if(Na(e),Sd(o)){if(s=o.nextSibling&&o.nextSibling.dataset,s)var c=s.dgst;s=c,a=Error(P(419)),a.stack="",a.digest=s,Nl({value:a,source:null,stack:null}),e=tf(t,e,n)}else if($e||os(t,e,n,!1),s=(n&t.childLanes)!==0,$e||s){if(s=be,s!==null&&(a=z_(s,n),a!==0&&a!==u.retryLane))throw u.retryLane=a,Ki(t,a),Lt(s,t,a),Pm;xd(o)||Xu(),e=tf(t,e,n)}else xd(o)?(e.flags|=192,e.child=t.child,e=null):(t=u.treeContext,Ae=dn(o.nextSibling),ut=e,se=!0,za=null,un=!1,t!==null&&pb(e,t),e=hd(e,a.children),e.flags|=4096);return e}return i?(Da(),o=a.fallback,i=e.mode,u=t.child,c=u.sibling,a=Zn(u,{mode:"hidden",children:a.children}),a.subtreeFlags=u.subtreeFlags&65011712,c!==null?o=Zn(c,o):(o=Di(o,i,n,null),o.flags|=2),o.return=e,a.return=e,a.sibling=o,e.child=a,Ws(null,a),a=e.child,o=t.child.memoizedState,o===null?o=Zh(n):(i=o.cachePool,i!==null?(u=Ye._currentValue,i=i.parent!==u?{parent:u,pool:u}:i):i=vb(),o={baseLanes:o.baseLanes|n,cachePool:i}),a.memoizedState=o,a.childLanes=ef(t,s,n),e.memoizedState=Jh,Ws(t.child,a)):(Na(e),n=t.child,t=n.sibling,n=Zn(n,{mode:"visible",children:a.children}),n.return=e,n.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=n,e.memoizedState=null,n)}function hd(t,e){return e=Gu({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Gu(t,e){return t=Gt(22,t,null,e),t.lanes=0,t}function tf(t,e,n){return Pi(e,t.child,null,n),t=hd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Wy(t,e,n){t.lanes|=e;var a=t.alternate;a!==null&&(a.lanes|=e),Jf(t.return,e,n)}function nf(t,e,n,a,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:i,treeForkCount:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=a,s.tail=n,s.tailMode=i,s.treeForkCount=r)}function hE(t,e,n){var a=e.pendingProps,i=a.revealOrder,r=a.tail;a=a.children;var s=ze.current,o=(s&2)!==0;if(o?(s=s&1|2,e.flags|=128):s&=1,Te(ze,s),st(t,e,a,n),a=se?Cl:0,!o&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Wy(t,n,e);else if(t.tag===19)Wy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Bu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),nf(e,!1,i,n,r,a);break;case"backwards":case"unstable_legacy-backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Bu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}nf(e,!0,n,null,r,a);break;case"together":nf(e,!1,null,null,void 0,a);break;default:e.memoizedState=null}return e.child}function la(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ni|=e.lanes,!(n&e.childLanes))if(t!==null){if(os(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(P(153));if(e.child!==null){for(t=e.child,n=Zn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Zn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function zm(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&Uu(t)))}function zA(t,e,n){switch(e.tag){case 3:Iu(e,e.stateNode.containerInfo),Ca(e,Ye,t.memoizedState.cache),ki();break;case 27:case 5:Pf(e);break;case 4:Iu(e,e.stateNode.containerInfo);break;case 10:Ca(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,id(e),null;break;case 13:var a=e.memoizedState;if(a!==null)return a.dehydrated!==null?(Na(e),e.flags|=128,null):n&e.child.childLanes?cE(t,e,n):(Na(e),t=la(t,e,n),t!==null?t.sibling:null);Na(e);break;case 19:var i=(t.flags&128)!==0;if(a=(n&e.childLanes)!==0,a||(os(t,e,n,!1),a=(n&e.childLanes)!==0),i){if(a)return hE(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Te(ze,ze.current),a)break;return null;case 22:return e.lanes=0,uE(t,e,n,e.pendingProps);case 24:Ca(e,Ye,t.memoizedState.cache)}return la(t,e,n)}function fE(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)$e=!0;else{if(!zm(t,n)&&!(e.flags&128))return $e=!1,zA(t,e,n);$e=!!(t.flags&131072)}else $e=!1,se&&e.flags&1048576&&gb(e,Cl,e.index);switch(e.lanes=0,e.tag){case 16:e:{var a=e.pendingProps;if(t=Si(e.elementType),e.type=t,typeof t=="function")vm(t)?(a=Bi(t,a),e.tag=1,e=Xy(null,e,t,a,n)):(e.tag=0,e=cd(null,e,t,a,n));else{if(t!=null){var i=t.$$typeof;if(i===im){e.tag=11,e=Fy(null,e,t,a,n);break e}else if(i===rm){e.tag=14,e=Gy(null,e,t,a,n);break e}}throw e=kf(t)||t,Error(P(306,e,""))}}return e;case 0:return cd(t,e,e.type,e.pendingProps,n);case 1:return a=e.type,i=Bi(a,e.pendingProps),Xy(t,e,a,i,n);case 3:e:{if(Iu(e,e.stateNode.containerInfo),t===null)throw Error(P(387));a=e.pendingProps;var r=e.memoizedState;i=r.element,td(t,e),hl(e,a,null,n);var s=e.memoizedState;if(a=s.cache,Ca(e,Ye,a),a!==r.cache&&Zf(e,[Ye],n,!0),cl(),a=s.element,r.isDehydrated)if(r={element:a,isDehydrated:!1,cache:s.cache},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){e=Ky(t,e,a,n);break e}else if(a!==i){i=on(Error(P(424)),e),Nl(i),e=Ky(t,e,a,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ae=dn(t.firstChild),ut=e,se=!0,za=null,un=!0,n=Eb(e,null,a,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(ki(),a===i){e=la(t,e,n);break e}st(t,e,a,n)}e=e.child}return e;case 26:return mu(t,e),t===null?(n=y0(e.type,null,e.pendingProps,null))?e.memoizedState=n:se||(n=e.type,t=e.pendingProps,a=Zu(Pa.current).createElement(n),a[ot]=e,a[Ut]=t,ft(a,n,t),at(a),e.stateNode=a):e.memoizedState=y0(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return Pf(e),t===null&&se&&(a=e.stateNode=nT(e.type,e.pendingProps,Pa.current),ut=e,un=!0,i=Ae,ci(e.type)?(wd=i,Ae=dn(a.firstChild)):Ae=i),st(t,e,e.pendingProps.children,n),mu(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&se&&((i=a=Ae)&&(a=p2(a,e.type,e.pendingProps,un),a!==null?(e.stateNode=a,ut=e,Ae=dn(a.firstChild),un=!1,i=!0):i=!1),i||ei(e)),Pf(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,a=r.children,Ed(i,r)?a=null:s!==null&&Ed(i,s)&&(e.flags|=32),e.memoizedState!==null&&(i=Rm(t,e,IA,null,null,n),jl._currentValue=i),mu(t,e),st(t,e,a,n),e.child;case 6:return t===null&&se&&((t=n=Ae)&&(n=y2(n,e.pendingProps,un),n!==null?(e.stateNode=n,ut=e,Ae=null,t=!0):t=!1),t||ei(e)),null;case 13:return cE(t,e,n);case 4:return Iu(e,e.stateNode.containerInfo),a=e.pendingProps,t===null?e.child=Pi(e,null,a,n):st(t,e,a,n),e.child;case 11:return Fy(t,e,e.type,e.pendingProps,n);case 7:return st(t,e,e.pendingProps,n),e.child;case 8:return st(t,e,e.pendingProps.children,n),e.child;case 12:return st(t,e,e.pendingProps.children,n),e.child;case 10:return a=e.pendingProps,Ca(e,e.type,a.value),st(t,e,a.children,n),e.child;case 9:return i=e.type._context,a=e.pendingProps.children,Ui(e),i=ht(i),a=a(i),e.flags|=1,st(t,e,a,n),e.child;case 14:return Gy(t,e,e.type,e.pendingProps,n);case 15:return oE(t,e,e.type,e.pendingProps,n);case 19:return hE(t,e,n);case 31:return PA(t,e,n);case 22:return uE(t,e,n,e.pendingProps);case 24:return Ui(e),a=ht(Ye),t===null?(i=Tm(),i===null&&(i=be,r=Em(),i.pooledCache=r,r.refCount++,r!==null&&(i.pooledCacheLanes|=n),i=r),e.memoizedState={parent:a,cache:i},Sm(e),Ca(e,Ye,i)):(t.lanes&n&&(td(t,e),hl(e,null,null,n),cl()),i=t.memoizedState,r=e.memoizedState,i.parent!==a?(i={parent:a,cache:a},e.memoizedState=i,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=i),Ca(e,Ye,a)):(a=r.cache,Ca(e,Ye,a),a!==i.cache&&Zf(e,[Ye],n,!0))),st(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(P(156,e.tag))}function Fn(t){t.flags|=4}function af(t,e,n,a,i){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(i&335544128)===i)if(t.stateNode.complete)t.flags|=8192;else if(LE())t.flags|=8192;else throw Oi=Pu,xm}else t.flags&=-16777217}function Jy(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!rT(e))if(LE())t.flags|=8192;else throw Oi=Pu,xm}function Ho(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?k_():536870912,t.lanes|=e,Yr|=e)}function Bs(t,e){if(!se)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function we(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,a=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,a|=i.subtreeFlags&65011712,a|=i.flags&65011712,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,a|=i.subtreeFlags,a|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=a,t.childLanes=n,e}function BA(t,e,n){var a=e.pendingProps;switch(bm(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return we(e),null;case 1:return we(e),null;case 3:return n=e.stateNode,a=null,t!==null&&(a=t.memoizedState.cache),e.memoizedState.cache!==a&&(e.flags|=2048),ea(Ye),zr(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(lr(e)?Fn(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,$h())),we(e),null;case 26:var i=e.type,r=e.memoizedState;return t===null?(Fn(e),r!==null?(we(e),Jy(e,r)):(we(e),af(e,i,null,a,n))):r?r!==t.memoizedState?(Fn(e),we(e),Jy(e,r)):(we(e),e.flags&=-16777217):(t=t.memoizedProps,t!==a&&Fn(e),we(e),af(e,i,t,a,n)),null;case 27:if(Ou(e),n=Pa.current,i=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==a&&Fn(e);else{if(!a){if(e.stateNode===null)throw Error(P(166));return we(e),null}t=Mn.current,lr(e)?Ry(e):(t=nT(i,a,n),e.stateNode=t,Fn(e))}return we(e),null;case 5:if(Ou(e),i=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==a&&Fn(e);else{if(!a){if(e.stateNode===null)throw Error(P(166));return we(e),null}if(r=Mn.current,lr(e))Ry(e);else{var s=Zu(Pa.current);switch(r){case 1:r=s.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:r=s.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":r=s.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":r=s.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":r=s.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof a.is=="string"?s.createElement("select",{is:a.is}):s.createElement("select"),a.multiple?r.multiple=!0:a.size&&(r.size=a.size);break;default:r=typeof a.is=="string"?s.createElement(i,{is:a.is}):s.createElement(i)}}r[ot]=e,r[Ut]=a;e:for(s=e.child;s!==null;){if(s.tag===5||s.tag===6)r.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}e.stateNode=r;e:switch(ft(r,i,a),i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Fn(e)}}return we(e),af(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==a&&Fn(e);else{if(typeof a!="string"&&e.stateNode===null)throw Error(P(166));if(t=Pa.current,lr(e)){if(t=e.stateNode,n=e.memoizedProps,a=null,i=ut,i!==null)switch(i.tag){case 27:case 5:a=i.memoizedProps}t[ot]=e,t=!!(t.nodeValue===n||a!==null&&a.suppressHydrationWarning===!0||JE(t.nodeValue,n)),t||ei(e,!0)}else t=Zu(t).createTextNode(a),t[ot]=e,e.stateNode=t}return we(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(a=lr(e),n!==null){if(t===null){if(!a)throw Error(P(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(P(557));t[ot]=e}else ki(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;we(e),t=!1}else n=$h(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(Ft(e),e):(Ft(e),null);if(e.flags&128)throw Error(P(558))}return we(e),null;case 13:if(a=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(i=lr(e),a!==null&&a.dehydrated!==null){if(t===null){if(!i)throw Error(P(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(P(317));i[ot]=e}else ki(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;we(e),i=!1}else i=$h(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),i=!0;if(!i)return e.flags&256?(Ft(e),e):(Ft(e),null)}return Ft(e),e.flags&128?(e.lanes=n,e):(n=a!==null,t=t!==null&&t.memoizedState!==null,n&&(a=e.child,i=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(i=a.alternate.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==i&&(a.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),Ho(e,e.updateQueue),we(e),null);case 4:return zr(),t===null&&Qm(e.stateNode.containerInfo),we(e),null;case 10:return ea(e.type),we(e),null;case 19:if(it(ze),a=e.memoizedState,a===null)return we(e),null;if(i=(e.flags&128)!==0,r=a.rendering,r===null)if(i)Bs(a,!1);else{if(je!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(r=Bu(t),r!==null){for(e.flags|=128,Bs(a,!1),t=r.updateQueue,e.updateQueue=t,Ho(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)db(n,t),n=n.sibling;return Te(ze,ze.current&1|2),se&&$n(e,a.treeForkCount),e.child}t=t.sibling}a.tail!==null&&Xt()>Qu&&(e.flags|=128,i=!0,Bs(a,!1),e.lanes=4194304)}else{if(!i)if(t=Bu(r),t!==null){if(e.flags|=128,i=!0,t=t.updateQueue,e.updateQueue=t,Ho(e,t),Bs(a,!0),a.tail===null&&a.tailMode==="hidden"&&!r.alternate&&!se)return we(e),null}else 2*Xt()-a.renderingStartTime>Qu&&n!==536870912&&(e.flags|=128,i=!0,Bs(a,!1),e.lanes=4194304);a.isBackwards?(r.sibling=e.child,e.child=r):(t=a.last,t!==null?t.sibling=r:e.child=r,a.last=r)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Xt(),t.sibling=null,n=ze.current,Te(ze,i?n&1|2:n&1),se&&$n(e,a.treeForkCount),t):(we(e),null);case 22:case 23:return Ft(e),wm(),a=e.memoizedState!==null,t!==null?t.memoizedState!==null!==a&&(e.flags|=8192):a&&(e.flags|=8192),a?n&536870912&&!(e.flags&128)&&(we(e),e.subtreeFlags&6&&(e.flags|=8192)):we(e),n=e.updateQueue,n!==null&&Ho(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),a=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),a!==n&&(e.flags|=2048),t!==null&&it(Ii),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),ea(Ye),we(e),null;case 25:return null;case 30:return null}throw Error(P(156,e.tag))}function qA(t,e){switch(bm(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ea(Ye),zr(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Ou(e),null;case 31:if(e.memoizedState!==null){if(Ft(e),e.alternate===null)throw Error(P(340));ki()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(Ft(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(P(340));ki()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return it(ze),null;case 4:return zr(),null;case 10:return ea(e.type),null;case 22:case 23:return Ft(e),wm(),t!==null&&it(Ii),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return ea(Ye),null;case 25:return null;default:return null}}function dE(t,e){switch(bm(e),e.tag){case 3:ea(Ye),zr();break;case 26:case 27:case 5:Ou(e);break;case 4:zr();break;case 31:e.memoizedState!==null&&Ft(e);break;case 13:Ft(e);break;case 19:it(ze);break;case 10:ea(e.type);break;case 22:case 23:Ft(e),wm(),t!==null&&it(Ii);break;case 24:ea(Ye)}}function ao(t,e){try{var n=e.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var i=a.next;n=i;do{if((n.tag&t)===t){a=void 0;var r=n.create,s=n.inst;a=r(),s.destroy=a}n=n.next}while(n!==i)}}catch(o){pe(e,e.return,o)}}function ti(t,e,n){try{var a=e.updateQueue,i=a!==null?a.lastEffect:null;if(i!==null){var r=i.next;a=r;do{if((a.tag&t)===t){var s=a.inst,o=s.destroy;if(o!==void 0){s.destroy=void 0,i=e;var u=n,c=o;try{c()}catch(f){pe(i,u,f)}}}a=a.next}while(a!==r)}}catch(f){pe(e,e.return,f)}}function mE(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{xb(e,n)}catch(a){pe(t,t.return,a)}}}function gE(t,e,n){n.props=Bi(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(a){pe(t,e,a)}}function dl(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var a=t.stateNode;break;case 30:a=t.stateNode;break;default:a=t.stateNode}typeof n=="function"?t.refCleanup=n(a):n.current=a}}catch(i){pe(t,e,i)}}function In(t,e){var n=t.ref,a=t.refCleanup;if(n!==null)if(typeof a=="function")try{a()}catch(i){pe(t,e,i)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(i){pe(t,e,i)}else n.current=null}function pE(t){var e=t.type,n=t.memoizedProps,a=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break e;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(i){pe(t,t.return,i)}}function rf(t,e,n){try{var a=t.stateNode;c2(a,t.type,n,e),a[Ut]=e}catch(i){pe(t,t.return,i)}}function yE(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ci(t.type)||t.tag===4}function sf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||yE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ci(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function fd(t,e,n){var a=t.tag;if(a===5||a===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Wn));else if(a!==4&&(a===27&&ci(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(fd(t,e,n),t=t.sibling;t!==null;)fd(t,e,n),t=t.sibling}function Yu(t,e,n){var a=t.tag;if(a===5||a===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(a!==4&&(a===27&&ci(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Yu(t,e,n),t=t.sibling;t!==null;)Yu(t,e,n),t=t.sibling}function vE(t){var e=t.stateNode,n=t.memoizedProps;try{for(var a=t.type,i=e.attributes;i.length;)e.removeAttributeNode(i[0]);ft(e,a,n),e[ot]=t,e[Ut]=n}catch(r){pe(t,t.return,r)}}var Xn=!1,Ge=!1,lf=!1,Zy=typeof WeakSet=="function"?WeakSet:Set,nt=null;function HA(t,e){if(t=t.containerInfo,_d=ac,t=rb(t),gm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var i=a.anchorOffset,r=a.focusNode;a=a.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var s=0,o=-1,u=-1,c=0,f=0,m=t,d=null;t:for(;;){for(var v;m!==n||i!==0&&m.nodeType!==3||(o=s+i),m!==r||a!==0&&m.nodeType!==3||(u=s+a),m.nodeType===3&&(s+=m.nodeValue.length),(v=m.firstChild)!==null;)d=m,m=v;for(;;){if(m===t)break t;if(d===n&&++c===i&&(o=s),d===r&&++f===a&&(u=s),(v=m.nextSibling)!==null)break;m=d,d=m.parentNode}m=v}n=o===-1||u===-1?null:{start:o,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(bd={focusedElem:t,selectionRange:n},ac=!1,nt=e;nt!==null;)if(e=nt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,nt=t;else for(;nt!==null;){switch(e=nt,r=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)i=t[n],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&r!==null){t=void 0,n=e,i=r.memoizedProps,r=r.memoizedState,a=n.stateNode;try{var R=Bi(n.type,i);t=a.getSnapshotBeforeUpdate(R,r),a.__reactInternalSnapshotBeforeUpdate=t}catch(O){pe(n,n.return,O)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)Td(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Td(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(P(163))}if(t=e.sibling,t!==null){t.return=e.return,nt=t;break}nt=e.return}}function _E(t,e,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:Yn(t,n),a&4&&ao(5,n);break;case 1:if(Yn(t,n),a&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(s){pe(n,n.return,s)}else{var i=Bi(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(i,e,t.__reactInternalSnapshotBeforeUpdate)}catch(s){pe(n,n.return,s)}}a&64&&mE(n),a&512&&dl(n,n.return);break;case 3:if(Yn(t,n),a&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{xb(t,e)}catch(s){pe(n,n.return,s)}}break;case 27:e===null&&a&4&&vE(n);case 26:case 5:Yn(t,n),e===null&&a&4&&pE(n),a&512&&dl(n,n.return);break;case 12:Yn(t,n);break;case 31:Yn(t,n),a&4&&TE(t,n);break;case 13:Yn(t,n),a&4&&xE(t,n),a&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=JA.bind(null,n),v2(t,n))));break;case 22:if(a=n.memoizedState!==null||Xn,!a){e=e!==null&&e.memoizedState!==null||Ge,i=Xn;var r=Ge;Xn=a,(Ge=e)&&!r?Qn(t,n,(n.subtreeFlags&8772)!==0):Yn(t,n),Xn=i,Ge=r}break;case 30:break;default:Yn(t,n)}}function bE(t){var e=t.alternate;e!==null&&(t.alternate=null,bE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&um(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var De=null,Ot=!1;function Gn(t,e,n){for(n=n.child;n!==null;)EE(t,e,n),n=n.sibling}function EE(t,e,n){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(Kl,n)}catch{}switch(n.tag){case 26:Ge||In(n,e),Gn(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Ge||In(n,e);var a=De,i=Ot;ci(n.type)&&(De=n.stateNode,Ot=!1),Gn(t,e,n),yl(n.stateNode),De=a,Ot=i;break;case 5:Ge||In(n,e);case 6:if(a=De,i=Ot,De=null,Gn(t,e,n),De=a,Ot=i,De!==null)if(Ot)try{(De.nodeType===9?De.body:De.nodeName==="HTML"?De.ownerDocument.body:De).removeChild(n.stateNode)}catch(r){pe(n,e,r)}else try{De.removeChild(n.stateNode)}catch(r){pe(n,e,r)}break;case 18:De!==null&&(Ot?(t=De,f0(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Kr(t)):f0(De,n.stateNode));break;case 4:a=De,i=Ot,De=n.stateNode.containerInfo,Ot=!0,Gn(t,e,n),De=a,Ot=i;break;case 0:case 11:case 14:case 15:ti(2,n,e),Ge||ti(4,n,e),Gn(t,e,n);break;case 1:Ge||(In(n,e),a=n.stateNode,typeof a.componentWillUnmount=="function"&&gE(n,e,a)),Gn(t,e,n);break;case 21:Gn(t,e,n);break;case 22:Ge=(a=Ge)||n.memoizedState!==null,Gn(t,e,n),Ge=a;break;default:Gn(t,e,n)}}function TE(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Kr(t)}catch(n){pe(e,e.return,n)}}}function xE(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Kr(t)}catch(n){pe(e,e.return,n)}}function FA(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new Zy),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new Zy),e;default:throw Error(P(435,t.tag))}}function Fo(t,e){var n=FA(t);e.forEach(function(a){if(!n.has(a)){n.add(a);var i=ZA.bind(null,t,a);a.then(i,i)}})}function Dt(t,e){var n=e.deletions;if(n!==null)for(var a=0;a<n.length;a++){var i=n[a],r=t,s=e,o=s;e:for(;o!==null;){switch(o.tag){case 27:if(ci(o.type)){De=o.stateNode,Ot=!1;break e}break;case 5:De=o.stateNode,Ot=!1;break e;case 3:case 4:De=o.stateNode.containerInfo,Ot=!0;break e}o=o.return}if(De===null)throw Error(P(160));EE(r,s,i),De=null,Ot=!1,r=i.alternate,r!==null&&(r.return=null),i.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)SE(e,t),e=e.sibling}var vn=null;function SE(t,e){var n=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Dt(e,t),It(t),a&4&&(ti(3,t,t.return),ao(3,t),ti(5,t,t.return));break;case 1:Dt(e,t),It(t),a&512&&(Ge||n===null||In(n,n.return)),a&64&&Xn&&(t=t.updateQueue,t!==null&&(a=t.callbacks,a!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?a:n.concat(a))));break;case 26:var i=vn;if(Dt(e,t),It(t),a&512&&(Ge||n===null||In(n,n.return)),a&4){var r=n!==null?n.memoizedState:null;if(a=t.memoizedState,n===null)if(a===null)if(t.stateNode===null){e:{a=t.type,n=t.memoizedProps,i=i.ownerDocument||i;t:switch(a){case"title":r=i.getElementsByTagName("title")[0],(!r||r[Zl]||r[ot]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=i.createElement(a),i.head.insertBefore(r,i.querySelector("head > title"))),ft(r,a,n),r[ot]=t,at(r),a=r;break e;case"link":var s=_0("link","href",i).get(a+(n.href||""));if(s){for(var o=0;o<s.length;o++)if(r=s[o],r.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){s.splice(o,1);break t}}r=i.createElement(a),ft(r,a,n),i.head.appendChild(r);break;case"meta":if(s=_0("meta","content",i).get(a+(n.content||""))){for(o=0;o<s.length;o++)if(r=s[o],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){s.splice(o,1);break t}}r=i.createElement(a),ft(r,a,n),i.head.appendChild(r);break;default:throw Error(P(468,a))}r[ot]=t,at(r),a=r}t.stateNode=a}else b0(i,t.type,t.stateNode);else t.stateNode=v0(i,a,t.memoizedProps);else r!==a?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,a===null?b0(i,t.type,t.stateNode):v0(i,a,t.memoizedProps)):a===null&&t.stateNode!==null&&rf(t,t.memoizedProps,n.memoizedProps)}break;case 27:Dt(e,t),It(t),a&512&&(Ge||n===null||In(n,n.return)),n!==null&&a&4&&rf(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Dt(e,t),It(t),a&512&&(Ge||n===null||In(n,n.return)),t.flags&32){i=t.stateNode;try{qr(i,"")}catch(R){pe(t,t.return,R)}}a&4&&t.stateNode!=null&&(i=t.memoizedProps,rf(t,i,n!==null?n.memoizedProps:i)),a&1024&&(lf=!0);break;case 6:if(Dt(e,t),It(t),a&4){if(t.stateNode===null)throw Error(P(162));a=t.memoizedProps,n=t.stateNode;try{n.nodeValue=a}catch(R){pe(t,t.return,R)}}break;case 3:if(yu=null,i=vn,vn=ec(e.containerInfo),Dt(e,t),vn=i,It(t),a&4&&n!==null&&n.memoizedState.isDehydrated)try{Kr(e.containerInfo)}catch(R){pe(t,t.return,R)}lf&&(lf=!1,wE(t));break;case 4:a=vn,vn=ec(t.stateNode.containerInfo),Dt(e,t),It(t),vn=a;break;case 12:Dt(e,t),It(t);break;case 31:Dt(e,t),It(t),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,Fo(t,a)));break;case 13:Dt(e,t),It(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(kc=Xt()),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,Fo(t,a)));break;case 22:i=t.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,c=Xn,f=Ge;if(Xn=c||i,Ge=f||u,Dt(e,t),Ge=f,Xn=c,It(t),a&8192)e:for(e=t.stateNode,e._visibility=i?e._visibility&-2:e._visibility|1,i&&(n===null||u||Xn||Ge||wi(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){u=n=e;try{if(r=u.stateNode,i)s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none";else{o=u.stateNode;var m=u.memoizedProps.style,d=m!=null&&m.hasOwnProperty("display")?m.display:null;o.style.display=d==null||typeof d=="boolean"?"":(""+d).trim()}}catch(R){pe(u,u.return,R)}}}else if(e.tag===6){if(n===null){u=e;try{u.stateNode.nodeValue=i?"":u.memoizedProps}catch(R){pe(u,u.return,R)}}}else if(e.tag===18){if(n===null){u=e;try{var v=u.stateNode;i?d0(v,!0):d0(u.stateNode,!1)}catch(R){pe(u,u.return,R)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}a&4&&(a=t.updateQueue,a!==null&&(n=a.retryQueue,n!==null&&(a.retryQueue=null,Fo(t,n))));break;case 19:Dt(e,t),It(t),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,Fo(t,a)));break;case 30:break;case 21:break;default:Dt(e,t),It(t)}}function It(t){var e=t.flags;if(e&2){try{for(var n,a=t.return;a!==null;){if(yE(a)){n=a;break}a=a.return}if(n==null)throw Error(P(160));switch(n.tag){case 27:var i=n.stateNode,r=sf(t);Yu(t,r,i);break;case 5:var s=n.stateNode;n.flags&32&&(qr(s,""),n.flags&=-33);var o=sf(t);Yu(t,o,s);break;case 3:case 4:var u=n.stateNode.containerInfo,c=sf(t);fd(t,c,u);break;default:throw Error(P(161))}}catch(f){pe(t,t.return,f)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function wE(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;wE(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function Yn(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)_E(t,e.alternate,e),e=e.sibling}function wi(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:ti(4,e,e.return),wi(e);break;case 1:In(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&gE(e,e.return,n),wi(e);break;case 27:yl(e.stateNode);case 26:case 5:In(e,e.return),wi(e);break;case 22:e.memoizedState===null&&wi(e);break;case 30:wi(e);break;default:wi(e)}t=t.sibling}}function Qn(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var a=e.alternate,i=t,r=e,s=r.flags;switch(r.tag){case 0:case 11:case 15:Qn(i,r,n),ao(4,r);break;case 1:if(Qn(i,r,n),a=r,i=a.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(c){pe(a,a.return,c)}if(a=r,i=a.updateQueue,i!==null){var o=a.stateNode;try{var u=i.shared.hiddenCallbacks;if(u!==null)for(i.shared.hiddenCallbacks=null,i=0;i<u.length;i++)Tb(u[i],o)}catch(c){pe(a,a.return,c)}}n&&s&64&&mE(r),dl(r,r.return);break;case 27:vE(r);case 26:case 5:Qn(i,r,n),n&&a===null&&s&4&&pE(r),dl(r,r.return);break;case 12:Qn(i,r,n);break;case 31:Qn(i,r,n),n&&s&4&&TE(i,r);break;case 13:Qn(i,r,n),n&&s&4&&xE(i,r);break;case 22:r.memoizedState===null&&Qn(i,r,n),dl(r,r.return);break;case 30:break;default:Qn(i,r,n)}e=e.sibling}}function Bm(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&to(n))}function qm(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&to(t))}function yn(t,e,n,a){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)AE(t,e,n,a),e=e.sibling}function AE(t,e,n,a){var i=e.flags;switch(e.tag){case 0:case 11:case 15:yn(t,e,n,a),i&2048&&ao(9,e);break;case 1:yn(t,e,n,a);break;case 3:yn(t,e,n,a),i&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&to(t)));break;case 12:if(i&2048){yn(t,e,n,a),t=e.stateNode;try{var r=e.memoizedProps,s=r.id,o=r.onPostCommit;typeof o=="function"&&o(s,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(u){pe(e,e.return,u)}}else yn(t,e,n,a);break;case 31:yn(t,e,n,a);break;case 13:yn(t,e,n,a);break;case 23:break;case 22:r=e.stateNode,s=e.alternate,e.memoizedState!==null?r._visibility&2?yn(t,e,n,a):ml(t,e):r._visibility&2?yn(t,e,n,a):(r._visibility|=2,hr(t,e,n,a,(e.subtreeFlags&10256)!==0||!1)),i&2048&&Bm(s,e);break;case 24:yn(t,e,n,a),i&2048&&qm(e.alternate,e);break;default:yn(t,e,n,a)}}function hr(t,e,n,a,i){for(i=i&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var r=t,s=e,o=n,u=a,c=s.flags;switch(s.tag){case 0:case 11:case 15:hr(r,s,o,u,i),ao(8,s);break;case 23:break;case 22:var f=s.stateNode;s.memoizedState!==null?f._visibility&2?hr(r,s,o,u,i):ml(r,s):(f._visibility|=2,hr(r,s,o,u,i)),i&&c&2048&&Bm(s.alternate,s);break;case 24:hr(r,s,o,u,i),i&&c&2048&&qm(s.alternate,s);break;default:hr(r,s,o,u,i)}e=e.sibling}}function ml(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,a=e,i=a.flags;switch(a.tag){case 22:ml(n,a),i&2048&&Bm(a.alternate,a);break;case 24:ml(n,a),i&2048&&qm(a.alternate,a);break;default:ml(n,a)}e=e.sibling}}var Js=8192;function or(t,e,n){if(t.subtreeFlags&Js)for(t=t.child;t!==null;)RE(t,e,n),t=t.sibling}function RE(t,e,n){switch(t.tag){case 26:or(t,e,n),t.flags&Js&&t.memoizedState!==null&&D2(n,vn,t.memoizedState,t.memoizedProps);break;case 5:or(t,e,n);break;case 3:case 4:var a=vn;vn=ec(t.stateNode.containerInfo),or(t,e,n),vn=a;break;case 22:t.memoizedState===null&&(a=t.alternate,a!==null&&a.memoizedState!==null?(a=Js,Js=16777216,or(t,e,n),Js=a):or(t,e,n));break;default:or(t,e,n)}}function CE(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function qs(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var a=e[n];nt=a,DE(a,t)}CE(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)NE(t),t=t.sibling}function NE(t){switch(t.tag){case 0:case 11:case 15:qs(t),t.flags&2048&&ti(9,t,t.return);break;case 3:qs(t);break;case 12:qs(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,gu(t)):qs(t);break;default:qs(t)}}function gu(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var a=e[n];nt=a,DE(a,t)}CE(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:ti(8,e,e.return),gu(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,gu(e));break;default:gu(e)}t=t.sibling}}function DE(t,e){for(;nt!==null;){var n=nt;switch(n.tag){case 0:case 11:case 15:ti(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var a=n.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:to(n.memoizedState.cache)}if(a=n.child,a!==null)a.return=n,nt=a;else e:for(n=t;nt!==null;){a=nt;var i=a.sibling,r=a.return;if(bE(a),a===n){nt=null;break e}if(i!==null){i.return=r,nt=i;break e}nt=r}}}var GA={getCacheForType:function(t){var e=ht(Ye),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return ht(Ye).controller.signal}},YA=typeof WeakMap=="function"?WeakMap:Map,ce=0,be=null,ne=null,re=0,ge=0,Ht=null,ja=!1,cs=!1,Hm=!1,oa=0,je=0,ni=0,Mi=0,Fm=0,Yt=0,Yr=0,gl=null,Mt=null,dd=!1,kc=0,IE=0,Qu=1/0,$u=null,Ha=null,We=0,Fa=null,Qr=null,ta=0,md=0,gd=null,OE=null,pl=0,pd=null;function Jt(){return ce&2&&re!==0?re&-re:Q.T!==null?Ym():B_()}function ME(){if(Yt===0)if(!(re&536870912)||se){var t=Lo;Lo<<=1,!(Lo&3932160)&&(Lo=262144),Yt=t}else Yt=536870912;return t=tn.current,t!==null&&(t.flags|=32),Yt}function Lt(t,e,n){(t===be&&(ge===2||ge===9)||t.cancelPendingCommit!==null)&&($r(t,0),La(t,re,Yt,!1)),Jl(t,n),(!(ce&2)||t!==be)&&(t===be&&(!(ce&2)&&(Mi|=n),je===4&&La(t,re,Yt,!1)),zn(t))}function VE(t,e,n){if(ce&6)throw Error(P(327));var a=!n&&(e&127)===0&&(e&t.expiredLanes)===0||Wl(t,e),i=a?XA(t,e):of(t,e,!0),r=a;do{if(i===0){cs&&!a&&La(t,e,0,!1);break}else{if(n=t.current.alternate,r&&!QA(n)){i=of(t,e,!1),r=!1;continue}if(i===2){if(r=e,t.errorRecoveryDisabledLanes&r)var s=0;else s=t.pendingLanes&-536870913,s=s!==0?s:s&536870912?536870912:0;if(s!==0){e=s;e:{var o=t;i=gl;var u=o.current.memoizedState.isDehydrated;if(u&&($r(o,s).flags|=256),s=of(o,s,!1),s!==2){if(Hm&&!u){o.errorRecoveryDisabledLanes|=r,Mi|=r,i=4;break e}r=Mt,Mt=i,r!==null&&(Mt===null?Mt=r:Mt.push.apply(Mt,r))}i=s}if(r=!1,i!==2)continue}}if(i===1){$r(t,0),La(t,e,0,!0);break}e:{switch(a=t,r=i,r){case 0:case 1:throw Error(P(345));case 4:if((e&4194048)!==e)break;case 6:La(a,e,Yt,!ja);break e;case 2:Mt=null;break;case 3:case 5:break;default:throw Error(P(329))}if((e&62914560)===e&&(i=kc+300-Xt(),10<i)){if(La(a,e,Yt,!ja),Ac(a,0,!0)!==0)break e;ta=e,a.timeoutHandle=eT(e0.bind(null,a,n,Mt,$u,dd,e,Yt,Mi,Yr,ja,r,"Throttled",-0,0),i);break e}e0(a,n,Mt,$u,dd,e,Yt,Mi,Yr,ja,r,null,-0,0)}}break}while(!0);zn(t)}function e0(t,e,n,a,i,r,s,o,u,c,f,m,d,v){if(t.timeoutHandle=-1,m=e.subtreeFlags,m&8192||(m&16785408)===16785408){m={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Wn},RE(e,r,m);var R=(r&62914560)===r?kc-Xt():(r&4194048)===r?IE-Xt():0;if(R=I2(m,R),R!==null){ta=r,t.cancelPendingCommit=R(n0.bind(null,t,e,r,n,a,i,s,o,u,f,m,null,d,v)),La(t,r,s,!c);return}}n0(t,e,r,n,a,i,s,o,u)}function QA(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var a=0;a<n.length;a++){var i=n[a],r=i.getSnapshot;i=i.value;try{if(!en(r(),i))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function La(t,e,n,a){e&=~Fm,e&=~Mi,t.suspendedLanes|=e,t.pingedLanes&=~e,a&&(t.warmLanes|=e),a=t.expirationTimes;for(var i=e;0<i;){var r=31-Wt(i),s=1<<r;a[r]=-1,i&=~s}n!==0&&U_(t,n,e)}function Uc(){return ce&6?!0:(io(0),!1)}function Gm(){if(ne!==null){if(ge===0)var t=ne.return;else t=ne,Jn=Wi=null,Dm(t),Vr=null,Dl=0,t=ne;for(;t!==null;)dE(t.alternate,t),t=t.return;ne=null}}function $r(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,d2(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),ta=0,Gm(),be=t,ne=n=Zn(t.current,null),re=e,ge=0,Ht=null,ja=!1,cs=Wl(t,e),Hm=!1,Yr=Yt=Fm=Mi=ni=je=0,Mt=gl=null,dd=!1,e&8&&(e|=e&32);var a=t.entangledLanes;if(a!==0)for(t=t.entanglements,a&=e;0<a;){var i=31-Wt(a),r=1<<i;e|=t[i],a&=~r}return oa=e,Dc(),n}function jE(t,e){Z=null,Q.H=Ol,e===us||e===Oc?(e=Oy(),ge=3):e===xm?(e=Oy(),ge=4):ge=e===Pm?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Ht=e,ne===null&&(je=1,Fu(t,on(e,t.current)))}function LE(){var t=tn.current;return t===null?!0:(re&4194048)===re?fn===null:(re&62914560)===re||re&536870912?t===fn:!1}function kE(){var t=Q.H;return Q.H=Ol,t===null?Ol:t}function UE(){var t=Q.A;return Q.A=GA,t}function Xu(){je=4,ja||(re&4194048)!==re&&tn.current!==null||(cs=!0),!(ni&134217727)&&!(Mi&134217727)||be===null||La(be,re,Yt,!1)}function of(t,e,n){var a=ce;ce|=2;var i=kE(),r=UE();(be!==t||re!==e)&&($u=null,$r(t,e)),e=!1;var s=je;e:do try{if(ge!==0&&ne!==null){var o=ne,u=Ht;switch(ge){case 8:Gm(),s=6;break e;case 3:case 2:case 9:case 6:tn.current===null&&(e=!0);var c=ge;if(ge=0,Ht=null,Cr(t,o,u,c),n&&cs){s=0;break e}break;default:c=ge,ge=0,Ht=null,Cr(t,o,u,c)}}$A(),s=je;break}catch(f){jE(t,f)}while(!0);return e&&t.shellSuspendCounter++,Jn=Wi=null,ce=a,Q.H=i,Q.A=r,ne===null&&(be=null,re=0,Dc()),s}function $A(){for(;ne!==null;)PE(ne)}function XA(t,e){var n=ce;ce|=2;var a=kE(),i=UE();be!==t||re!==e?($u=null,Qu=Xt()+500,$r(t,e)):cs=Wl(t,e);e:do try{if(ge!==0&&ne!==null){e=ne;var r=Ht;t:switch(ge){case 1:ge=0,Ht=null,Cr(t,e,r,1);break;case 2:case 9:if(Iy(r)){ge=0,Ht=null,t0(e);break}e=function(){ge!==2&&ge!==9||be!==t||(ge=7),zn(t)},r.then(e,e);break e;case 3:ge=7;break e;case 4:ge=5;break e;case 7:Iy(r)?(ge=0,Ht=null,t0(e)):(ge=0,Ht=null,Cr(t,e,r,7));break;case 5:var s=null;switch(ne.tag){case 26:s=ne.memoizedState;case 5:case 27:var o=ne;if(s?rT(s):o.stateNode.complete){ge=0,Ht=null;var u=o.sibling;if(u!==null)ne=u;else{var c=o.return;c!==null?(ne=c,Pc(c)):ne=null}break t}}ge=0,Ht=null,Cr(t,e,r,5);break;case 6:ge=0,Ht=null,Cr(t,e,r,6);break;case 8:Gm(),je=6;break e;default:throw Error(P(462))}}KA();break}catch(f){jE(t,f)}while(!0);return Jn=Wi=null,Q.H=a,Q.A=i,ce=n,ne!==null?0:(be=null,re=0,Dc(),je)}function KA(){for(;ne!==null&&!_w();)PE(ne)}function PE(t){var e=fE(t.alternate,t,oa);t.memoizedProps=t.pendingProps,e===null?Pc(t):ne=e}function t0(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=$y(n,e,e.pendingProps,e.type,void 0,re);break;case 11:e=$y(n,e,e.pendingProps,e.type.render,e.ref,re);break;case 5:Dm(e);default:dE(n,e),e=ne=db(e,oa),e=fE(n,e,oa)}t.memoizedProps=t.pendingProps,e===null?Pc(t):ne=e}function Cr(t,e,n,a){Jn=Wi=null,Dm(e),Vr=null,Dl=0;var i=e.return;try{if(UA(t,i,e,n,re)){je=1,Fu(t,on(n,t.current)),ne=null;return}}catch(r){if(i!==null)throw ne=i,r;je=1,Fu(t,on(n,t.current)),ne=null;return}e.flags&32768?(se||a===1?t=!0:cs||re&536870912?t=!1:(ja=t=!0,(a===2||a===9||a===3||a===6)&&(a=tn.current,a!==null&&a.tag===13&&(a.flags|=16384))),zE(e,t)):Pc(e)}function Pc(t){var e=t;do{if(e.flags&32768){zE(e,ja);return}t=e.return;var n=BA(e.alternate,e,oa);if(n!==null){ne=n;return}if(e=e.sibling,e!==null){ne=e;return}ne=e=t}while(e!==null);je===0&&(je=5)}function zE(t,e){do{var n=qA(t.alternate,t);if(n!==null){n.flags&=32767,ne=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){ne=t;return}ne=t=n}while(t!==null);je=6,ne=null}function n0(t,e,n,a,i,r,s,o,u){t.cancelPendingCommit=null;do zc();while(We!==0);if(ce&6)throw Error(P(327));if(e!==null){if(e===t.current)throw Error(P(177));if(r=e.lanes|e.childLanes,r|=pm,Nw(t,n,r,s,o,u),t===be&&(ne=be=null,re=0),Qr=e,Fa=t,ta=n,md=r,gd=i,OE=a,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,e2(Mu,function(){return GE(),null})):(t.callbackNode=null,t.callbackPriority=0),a=(e.flags&13878)!==0,e.subtreeFlags&13878||a){a=Q.T,Q.T=null,i=he.p,he.p=2,s=ce,ce|=4;try{HA(t,e,n)}finally{ce=s,he.p=i,Q.T=a}}We=1,BE(),qE(),HE()}}function BE(){if(We===1){We=0;var t=Fa,e=Qr,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=Q.T,Q.T=null;var a=he.p;he.p=2;var i=ce;ce|=4;try{SE(e,t);var r=bd,s=rb(t.containerInfo),o=r.focusedElem,u=r.selectionRange;if(s!==o&&o&&o.ownerDocument&&ib(o.ownerDocument.documentElement,o)){if(u!==null&&gm(o)){var c=u.start,f=u.end;if(f===void 0&&(f=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(f,o.value.length);else{var m=o.ownerDocument||document,d=m&&m.defaultView||window;if(d.getSelection){var v=d.getSelection(),R=o.textContent.length,O=Math.min(u.start,R),D=u.end===void 0?O:Math.min(u.end,R);!v.extend&&O>D&&(s=D,D=O,O=s);var x=Sy(o,O),y=Sy(o,D);if(x&&y&&(v.rangeCount!==1||v.anchorNode!==x.node||v.anchorOffset!==x.offset||v.focusNode!==y.node||v.focusOffset!==y.offset)){var _=m.createRange();_.setStart(x.node,x.offset),v.removeAllRanges(),O>D?(v.addRange(_),v.extend(y.node,y.offset)):(_.setEnd(y.node,y.offset),v.addRange(_))}}}}for(m=[],v=o;v=v.parentNode;)v.nodeType===1&&m.push({element:v,left:v.scrollLeft,top:v.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<m.length;o++){var N=m[o];N.element.scrollLeft=N.left,N.element.scrollTop=N.top}}ac=!!_d,bd=_d=null}finally{ce=i,he.p=a,Q.T=n}}t.current=e,We=2}}function qE(){if(We===2){We=0;var t=Fa,e=Qr,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=Q.T,Q.T=null;var a=he.p;he.p=2;var i=ce;ce|=4;try{_E(t,e.alternate,e)}finally{ce=i,he.p=a,Q.T=n}}We=3}}function HE(){if(We===4||We===3){We=0,bw();var t=Fa,e=Qr,n=ta,a=OE;e.subtreeFlags&10256||e.flags&10256?We=5:(We=0,Qr=Fa=null,FE(t,t.pendingLanes));var i=t.pendingLanes;if(i===0&&(Ha=null),om(n),e=e.stateNode,Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(Kl,e,void 0,(e.current.flags&128)===128)}catch{}if(a!==null){e=Q.T,i=he.p,he.p=2,Q.T=null;try{for(var r=t.onRecoverableError,s=0;s<a.length;s++){var o=a[s];r(o.value,{componentStack:o.stack})}}finally{Q.T=e,he.p=i}}ta&3&&zc(),zn(t),i=t.pendingLanes,n&261930&&i&42?t===pd?pl++:(pl=0,pd=t):pl=0,io(0)}}function FE(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,to(e)))}function zc(){return BE(),qE(),HE(),GE()}function GE(){if(We!==5)return!1;var t=Fa,e=md;md=0;var n=om(ta),a=Q.T,i=he.p;try{he.p=32>n?32:n,Q.T=null,n=gd,gd=null;var r=Fa,s=ta;if(We=0,Qr=Fa=null,ta=0,ce&6)throw Error(P(331));var o=ce;if(ce|=4,NE(r.current),AE(r,r.current,s,n),ce=o,io(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(Kl,r)}catch{}return!0}finally{he.p=i,Q.T=a,FE(t,e)}}function a0(t,e,n){e=on(n,e),e=ud(t.stateNode,e,2),t=qa(t,e,2),t!==null&&(Jl(t,2),zn(t))}function pe(t,e,n){if(t.tag===3)a0(t,t,n);else for(;e!==null;){if(e.tag===3){a0(e,t,n);break}else if(e.tag===1){var a=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ha===null||!Ha.has(a))){t=on(n,t),n=sE(2),a=qa(e,n,2),a!==null&&(lE(n,a,e,t),Jl(a,2),zn(a));break}}e=e.return}}function uf(t,e,n){var a=t.pingCache;if(a===null){a=t.pingCache=new YA;var i=new Set;a.set(e,i)}else i=a.get(e),i===void 0&&(i=new Set,a.set(e,i));i.has(n)||(Hm=!0,i.add(n),t=WA.bind(null,t,e,n),e.then(t,t))}function WA(t,e,n){var a=t.pingCache;a!==null&&a.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,be===t&&(re&n)===n&&(je===4||je===3&&(re&62914560)===re&&300>Xt()-kc?!(ce&2)&&$r(t,0):Fm|=n,Yr===re&&(Yr=0)),zn(t)}function YE(t,e){e===0&&(e=k_()),t=Ki(t,e),t!==null&&(Jl(t,e),zn(t))}function JA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),YE(t,n)}function ZA(t,e){var n=0;switch(t.tag){case 31:case 13:var a=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:a=t.stateNode;break;case 22:a=t.stateNode._retryCache;break;default:throw Error(P(314))}a!==null&&a.delete(e),YE(t,n)}function e2(t,e){return sm(t,e)}var Ku=null,fr=null,yd=!1,Wu=!1,cf=!1,ka=0;function zn(t){t!==fr&&t.next===null&&(fr===null?Ku=fr=t:fr=fr.next=t),Wu=!0,yd||(yd=!0,n2())}function io(t,e){if(!cf&&Wu){cf=!0;do for(var n=!1,a=Ku;a!==null;){if(t!==0){var i=a.pendingLanes;if(i===0)var r=0;else{var s=a.suspendedLanes,o=a.pingedLanes;r=(1<<31-Wt(42|t)+1)-1,r&=i&~(s&~o),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(n=!0,i0(a,r))}else r=re,r=Ac(a,a===be?r:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),!(r&3)||Wl(a,r)||(n=!0,i0(a,r));a=a.next}while(n);cf=!1}}function t2(){QE()}function QE(){Wu=yd=!1;var t=0;ka!==0&&f2()&&(t=ka);for(var e=Xt(),n=null,a=Ku;a!==null;){var i=a.next,r=$E(a,e);r===0?(a.next=null,n===null?Ku=i:n.next=i,i===null&&(fr=n)):(n=a,(t!==0||r&3)&&(Wu=!0)),a=i}We!==0&&We!==5||io(t),ka!==0&&(ka=0)}function $E(t,e){for(var n=t.suspendedLanes,a=t.pingedLanes,i=t.expirationTimes,r=t.pendingLanes&-62914561;0<r;){var s=31-Wt(r),o=1<<s,u=i[s];u===-1?(!(o&n)||o&a)&&(i[s]=Cw(o,e)):u<=e&&(t.expiredLanes|=o),r&=~o}if(e=be,n=re,n=Ac(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),a=t.callbackNode,n===0||t===e&&(ge===2||ge===9)||t.cancelPendingCommit!==null)return a!==null&&a!==null&&kh(a),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||Wl(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(a!==null&&kh(a),om(n)){case 2:case 8:n=j_;break;case 32:n=Mu;break;case 268435456:n=L_;break;default:n=Mu}return a=XE.bind(null,t),n=sm(n,a),t.callbackPriority=e,t.callbackNode=n,e}return a!==null&&a!==null&&kh(a),t.callbackPriority=2,t.callbackNode=null,2}function XE(t,e){if(We!==0&&We!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(zc()&&t.callbackNode!==n)return null;var a=re;return a=Ac(t,t===be?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),a===0?null:(VE(t,a,e),$E(t,Xt()),t.callbackNode!=null&&t.callbackNode===n?XE.bind(null,t):null)}function i0(t,e){if(zc())return null;VE(t,e,!0)}function n2(){m2(function(){ce&6?sm(V_,t2):QE()})}function Ym(){if(ka===0){var t=Hr;t===0&&(t=jo,jo<<=1,!(jo&261888)&&(jo=256)),ka=t}return ka}function r0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:su(""+t)}function s0(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function a2(t,e,n,a,i){if(e==="submit"&&n&&n.stateNode===i){var r=r0((i[Ut]||null).action),s=a.submitter;s&&(e=(e=s[Ut]||null)?r0(e.formAction):s.getAttribute("formAction"),e!==null&&(r=e,s=null));var o=new Rc("action","action",null,a,i);t.push({event:o,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(ka!==0){var u=s?s0(i,s):new FormData(i);ld(n,{pending:!0,data:u,method:i.method,action:r},null,u)}}else typeof r=="function"&&(o.preventDefault(),u=s?s0(i,s):new FormData(i),ld(n,{pending:!0,data:u,method:i.method,action:r},r,u))},currentTarget:i}]})}}for(var hf=0;hf<Xf.length;hf++){var ff=Xf[hf],i2=ff.toLowerCase(),r2=ff[0].toUpperCase()+ff.slice(1);Tn(i2,"on"+r2)}Tn(lb,"onAnimationEnd");Tn(ob,"onAnimationIteration");Tn(ub,"onAnimationStart");Tn("dblclick","onDoubleClick");Tn("focusin","onFocus");Tn("focusout","onBlur");Tn(EA,"onTransitionRun");Tn(TA,"onTransitionStart");Tn(xA,"onTransitionCancel");Tn(cb,"onTransitionEnd");Br("onMouseEnter",["mouseout","mouseover"]);Br("onMouseLeave",["mouseout","mouseover"]);Br("onPointerEnter",["pointerout","pointerover"]);Br("onPointerLeave",["pointerout","pointerover"]);Qi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ml="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),s2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ml));function KE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var a=t[n],i=a.event;a=a.listeners;e:{var r=void 0;if(e)for(var s=a.length-1;0<=s;s--){var o=a[s],u=o.instance,c=o.currentTarget;if(o=o.listener,u!==r&&i.isPropagationStopped())break e;r=o,i.currentTarget=c;try{r(i)}catch(f){ju(f)}i.currentTarget=null,r=u}else for(s=0;s<a.length;s++){if(o=a[s],u=o.instance,c=o.currentTarget,o=o.listener,u!==r&&i.isPropagationStopped())break e;r=o,i.currentTarget=c;try{r(i)}catch(f){ju(f)}i.currentTarget=null,r=u}}}}function te(t,e){var n=e[Bf];n===void 0&&(n=e[Bf]=new Set);var a=t+"__bubble";n.has(a)||(WE(e,t,2,!1),n.add(a))}function df(t,e,n){var a=0;e&&(a|=4),WE(n,t,a,e)}var Go="_reactListening"+Math.random().toString(36).slice(2);function Qm(t){if(!t[Go]){t[Go]=!0,q_.forEach(function(n){n!=="selectionchange"&&(s2.has(n)||df(n,!1,t),df(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Go]||(e[Go]=!0,df("selectionchange",!1,e))}}function WE(t,e,n,a){switch(cT(e)){case 2:var i=V2;break;case 8:i=j2;break;default:i=Wm}n=i.bind(null,e,n,t),i=void 0,!Yf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),a?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function mf(t,e,n,a,i){var r=a;if(!(e&1)&&!(e&2)&&a!==null)e:for(;;){if(a===null)return;var s=a.tag;if(s===3||s===4){var o=a.stateNode.containerInfo;if(o===i)break;if(s===4)for(s=a.return;s!==null;){var u=s.tag;if((u===3||u===4)&&s.stateNode.containerInfo===i)return;s=s.return}for(;o!==null;){if(s=_r(o),s===null)return;if(u=s.tag,u===5||u===6||u===26||u===27){a=r=s;continue e}o=o.parentNode}}a=a.return}K_(function(){var c=r,f=hm(n),m=[];e:{var d=hb.get(t);if(d!==void 0){var v=Rc,R=t;switch(t){case"keypress":if(ou(n)===0)break e;case"keydown":case"keyup":v=Zw;break;case"focusin":R="focus",v=qh;break;case"focusout":R="blur",v=qh;break;case"beforeblur":case"afterblur":v=qh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=my;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=Bw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=nA;break;case lb:case ob:case ub:v=Fw;break;case cb:v=iA;break;case"scroll":case"scrollend":v=Pw;break;case"wheel":v=sA;break;case"copy":case"cut":case"paste":v=Yw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=py;break;case"toggle":case"beforetoggle":v=oA}var O=(e&4)!==0,D=!O&&(t==="scroll"||t==="scrollend"),x=O?d!==null?d+"Capture":null:d;O=[];for(var y=c,_;y!==null;){var N=y;if(_=N.stateNode,N=N.tag,N!==5&&N!==26&&N!==27||_===null||x===null||(N=wl(y,x),N!=null&&O.push(Vl(y,N,_))),D)break;y=y.return}0<O.length&&(d=new v(d,R,null,n,f),m.push({event:d,listeners:O}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",d&&n!==Gf&&(R=n.relatedTarget||n.fromElement)&&(_r(R)||R[ss]))break e;if((v||d)&&(d=f.window===f?f:(d=f.ownerDocument)?d.defaultView||d.parentWindow:window,v?(R=n.relatedTarget||n.toElement,v=c,R=R?_r(R):null,R!==null&&(D=Xl(R),O=R.tag,R!==D||O!==5&&O!==27&&O!==6)&&(R=null)):(v=null,R=c),v!==R)){if(O=my,N="onMouseLeave",x="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(O=py,N="onPointerLeave",x="onPointerEnter",y="pointer"),D=v==null?d:Ks(v),_=R==null?d:Ks(R),d=new O(N,y+"leave",v,n,f),d.target=D,d.relatedTarget=_,N=null,_r(f)===c&&(O=new O(x,y+"enter",R,n,f),O.target=_,O.relatedTarget=D,N=O),D=N,v&&R)t:{for(O=l2,x=v,y=R,_=0,N=x;N;N=O(N))_++;N=0;for(var V=y;V;V=O(V))N++;for(;0<_-N;)x=O(x),_--;for(;0<N-_;)y=O(y),N--;for(;_--;){if(x===y||y!==null&&x===y.alternate){O=x;break t}x=O(x),y=O(y)}O=null}else O=null;v!==null&&l0(m,d,v,O,!1),R!==null&&D!==null&&l0(m,D,R,O,!0)}}e:{if(d=c?Ks(c):window,v=d.nodeName&&d.nodeName.toLowerCase(),v==="select"||v==="input"&&d.type==="file")var k=by;else if(_y(d))if(nb)k=vA;else{k=pA;var E=gA}else v=d.nodeName,!v||v.toLowerCase()!=="input"||d.type!=="checkbox"&&d.type!=="radio"?c&&cm(c.elementType)&&(k=by):k=yA;if(k&&(k=k(t,c))){tb(m,k,n,f);break e}E&&E(t,d,c),t==="focusout"&&c&&d.type==="number"&&c.memoizedProps.value!=null&&Ff(d,"number",d.value)}switch(E=c?Ks(c):window,t){case"focusin":(_y(E)||E.contentEditable==="true")&&(Tr=E,Qf=c,ll=null);break;case"focusout":ll=Qf=Tr=null;break;case"mousedown":$f=!0;break;case"contextmenu":case"mouseup":case"dragend":$f=!1,wy(m,n,f);break;case"selectionchange":if(bA)break;case"keydown":case"keyup":wy(m,n,f)}var b;if(mm)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Er?Z_(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(J_&&n.locale!=="ko"&&(Er||S!=="onCompositionStart"?S==="onCompositionEnd"&&Er&&(b=W_()):(Va=f,fm="value"in Va?Va.value:Va.textContent,Er=!0)),E=Ju(c,S),0<E.length&&(S=new gy(S,t,null,n,f),m.push({event:S,listeners:E}),b?S.data=b:(b=eb(n),b!==null&&(S.data=b)))),(b=cA?hA(t,n):fA(t,n))&&(S=Ju(c,"onBeforeInput"),0<S.length&&(E=new gy("onBeforeInput","beforeinput",null,n,f),m.push({event:E,listeners:S}),E.data=b)),a2(m,t,c,n,f)}KE(m,e)})}function Vl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ju(t,e){for(var n=e+"Capture",a=[];t!==null;){var i=t,r=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||r===null||(i=wl(t,n),i!=null&&a.unshift(Vl(t,i,r)),i=wl(t,e),i!=null&&a.push(Vl(t,i,r))),t.tag===3)return a;t=t.return}return[]}function l2(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function l0(t,e,n,a,i){for(var r=e._reactName,s=[];n!==null&&n!==a;){var o=n,u=o.alternate,c=o.stateNode;if(o=o.tag,u!==null&&u===a)break;o!==5&&o!==26&&o!==27||c===null||(u=c,i?(c=wl(n,r),c!=null&&s.unshift(Vl(n,c,u))):i||(c=wl(n,r),c!=null&&s.push(Vl(n,c,u)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var o2=/\r\n?/g,u2=/\u0000|\uFFFD/g;function o0(t){return(typeof t=="string"?t:""+t).replace(o2,`
`).replace(u2,"")}function JE(t,e){return e=o0(e),o0(t)===e}function ye(t,e,n,a,i,r){switch(n){case"children":typeof a=="string"?e==="body"||e==="textarea"&&a===""||qr(t,a):(typeof a=="number"||typeof a=="bigint")&&e!=="body"&&qr(t,""+a);break;case"className":Uo(t,"class",a);break;case"tabIndex":Uo(t,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":Uo(t,n,a);break;case"style":X_(t,a,r);break;case"data":if(e!=="object"){Uo(t,"data",a);break}case"src":case"href":if(a===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){t.removeAttribute(n);break}a=su(""+a),t.setAttribute(n,a);break;case"action":case"formAction":if(typeof a=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(e!=="input"&&ye(t,e,"name",i.name,i,null),ye(t,e,"formEncType",i.formEncType,i,null),ye(t,e,"formMethod",i.formMethod,i,null),ye(t,e,"formTarget",i.formTarget,i,null)):(ye(t,e,"encType",i.encType,i,null),ye(t,e,"method",i.method,i,null),ye(t,e,"target",i.target,i,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){t.removeAttribute(n);break}a=su(""+a),t.setAttribute(n,a);break;case"onClick":a!=null&&(t.onclick=Wn);break;case"onScroll":a!=null&&te("scroll",t);break;case"onScrollEnd":a!=null&&te("scrollend",t);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(P(61));if(n=a.__html,n!=null){if(i.children!=null)throw Error(P(60));t.innerHTML=n}}break;case"multiple":t.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":t.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){t.removeAttribute("xlink:href");break}n=su(""+a),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(n,""+a):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":a===!0?t.setAttribute(n,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(n,a):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?t.setAttribute(n,a):t.removeAttribute(n);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?t.removeAttribute(n):t.setAttribute(n,a);break;case"popover":te("beforetoggle",t),te("toggle",t),ru(t,"popover",a);break;case"xlinkActuate":Hn(t,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":Hn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":Hn(t,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":Hn(t,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":Hn(t,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":Hn(t,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":Hn(t,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":Hn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":Hn(t,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":ru(t,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=kw.get(n)||n,ru(t,n,a))}}function vd(t,e,n,a,i,r){switch(n){case"style":X_(t,a,r);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(P(61));if(n=a.__html,n!=null){if(i.children!=null)throw Error(P(60));t.innerHTML=n}}break;case"children":typeof a=="string"?qr(t,a):(typeof a=="number"||typeof a=="bigint")&&qr(t,""+a);break;case"onScroll":a!=null&&te("scroll",t);break;case"onScrollEnd":a!=null&&te("scrollend",t);break;case"onClick":a!=null&&(t.onclick=Wn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!H_.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(i=n.endsWith("Capture"),e=n.slice(2,i?n.length-7:void 0),r=t[Ut]||null,r=r!=null?r[n]:null,typeof r=="function"&&t.removeEventListener(e,r,i),typeof a=="function")){typeof r!="function"&&r!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,a,i);break e}n in t?t[n]=a:a===!0?t.setAttribute(n,""):ru(t,n,a)}}}function ft(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":te("error",t),te("load",t);var a=!1,i=!1,r;for(r in n)if(n.hasOwnProperty(r)){var s=n[r];if(s!=null)switch(r){case"src":a=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(P(137,e));default:ye(t,e,r,s,n,null)}}i&&ye(t,e,"srcSet",n.srcSet,n,null),a&&ye(t,e,"src",n.src,n,null);return;case"input":te("invalid",t);var o=r=s=i=null,u=null,c=null;for(a in n)if(n.hasOwnProperty(a)){var f=n[a];if(f!=null)switch(a){case"name":i=f;break;case"type":s=f;break;case"checked":u=f;break;case"defaultChecked":c=f;break;case"value":r=f;break;case"defaultValue":o=f;break;case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(P(137,e));break;default:ye(t,e,a,f,n,null)}}Y_(t,r,o,u,c,s,i,!1);return;case"select":te("invalid",t),a=s=r=null;for(i in n)if(n.hasOwnProperty(i)&&(o=n[i],o!=null))switch(i){case"value":r=o;break;case"defaultValue":s=o;break;case"multiple":a=o;default:ye(t,e,i,o,n,null)}e=r,n=s,t.multiple=!!a,e!=null?Ir(t,!!a,e,!1):n!=null&&Ir(t,!!a,n,!0);return;case"textarea":te("invalid",t),r=i=a=null;for(s in n)if(n.hasOwnProperty(s)&&(o=n[s],o!=null))switch(s){case"value":a=o;break;case"defaultValue":i=o;break;case"children":r=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(P(91));break;default:ye(t,e,s,o,n,null)}$_(t,a,i,r);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(a=n[u],a!=null))switch(u){case"selected":t.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:ye(t,e,u,a,n,null)}return;case"dialog":te("beforetoggle",t),te("toggle",t),te("cancel",t),te("close",t);break;case"iframe":case"object":te("load",t);break;case"video":case"audio":for(a=0;a<Ml.length;a++)te(Ml[a],t);break;case"image":te("error",t),te("load",t);break;case"details":te("toggle",t);break;case"embed":case"source":case"link":te("error",t),te("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(a=n[c],a!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(P(137,e));default:ye(t,e,c,a,n,null)}return;default:if(cm(e)){for(f in n)n.hasOwnProperty(f)&&(a=n[f],a!==void 0&&vd(t,e,f,a,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(a=n[o],a!=null&&ye(t,e,o,a,n,null))}function c2(t,e,n,a){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,r=null,s=null,o=null,u=null,c=null,f=null;for(v in n){var m=n[v];if(n.hasOwnProperty(v)&&m!=null)switch(v){case"checked":break;case"value":break;case"defaultValue":u=m;default:a.hasOwnProperty(v)||ye(t,e,v,null,a,m)}}for(var d in a){var v=a[d];if(m=n[d],a.hasOwnProperty(d)&&(v!=null||m!=null))switch(d){case"type":r=v;break;case"name":i=v;break;case"checked":c=v;break;case"defaultChecked":f=v;break;case"value":s=v;break;case"defaultValue":o=v;break;case"children":case"dangerouslySetInnerHTML":if(v!=null)throw Error(P(137,e));break;default:v!==m&&ye(t,e,d,v,a,m)}}Hf(t,s,o,u,c,f,r,i);return;case"select":v=s=o=d=null;for(r in n)if(u=n[r],n.hasOwnProperty(r)&&u!=null)switch(r){case"value":break;case"multiple":v=u;default:a.hasOwnProperty(r)||ye(t,e,r,null,a,u)}for(i in a)if(r=a[i],u=n[i],a.hasOwnProperty(i)&&(r!=null||u!=null))switch(i){case"value":d=r;break;case"defaultValue":o=r;break;case"multiple":s=r;default:r!==u&&ye(t,e,i,r,a,u)}e=o,n=s,a=v,d!=null?Ir(t,!!n,d,!1):!!a!=!!n&&(e!=null?Ir(t,!!n,e,!0):Ir(t,!!n,n?[]:"",!1));return;case"textarea":v=d=null;for(o in n)if(i=n[o],n.hasOwnProperty(o)&&i!=null&&!a.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:ye(t,e,o,null,a,i)}for(s in a)if(i=a[s],r=n[s],a.hasOwnProperty(s)&&(i!=null||r!=null))switch(s){case"value":d=i;break;case"defaultValue":v=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(P(91));break;default:i!==r&&ye(t,e,s,i,a,r)}Q_(t,d,v);return;case"option":for(var R in n)if(d=n[R],n.hasOwnProperty(R)&&d!=null&&!a.hasOwnProperty(R))switch(R){case"selected":t.selected=!1;break;default:ye(t,e,R,null,a,d)}for(u in a)if(d=a[u],v=n[u],a.hasOwnProperty(u)&&d!==v&&(d!=null||v!=null))switch(u){case"selected":t.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:ye(t,e,u,d,a,v)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var O in n)d=n[O],n.hasOwnProperty(O)&&d!=null&&!a.hasOwnProperty(O)&&ye(t,e,O,null,a,d);for(c in a)if(d=a[c],v=n[c],a.hasOwnProperty(c)&&d!==v&&(d!=null||v!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(P(137,e));break;default:ye(t,e,c,d,a,v)}return;default:if(cm(e)){for(var D in n)d=n[D],n.hasOwnProperty(D)&&d!==void 0&&!a.hasOwnProperty(D)&&vd(t,e,D,void 0,a,d);for(f in a)d=a[f],v=n[f],!a.hasOwnProperty(f)||d===v||d===void 0&&v===void 0||vd(t,e,f,d,a,v);return}}for(var x in n)d=n[x],n.hasOwnProperty(x)&&d!=null&&!a.hasOwnProperty(x)&&ye(t,e,x,null,a,d);for(m in a)d=a[m],v=n[m],!a.hasOwnProperty(m)||d===v||d==null&&v==null||ye(t,e,m,d,a,v)}function u0(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function h2(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),a=0;a<n.length;a++){var i=n[a],r=i.transferSize,s=i.initiatorType,o=i.duration;if(r&&o&&u0(s)){for(s=0,o=i.responseEnd,a+=1;a<n.length;a++){var u=n[a],c=u.startTime;if(c>o)break;var f=u.transferSize,m=u.initiatorType;f&&u0(m)&&(u=u.responseEnd,s+=f*(u<o?1:(o-c)/(u-c)))}if(--a,e+=8*(r+s)/(i.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var _d=null,bd=null;function Zu(t){return t.nodeType===9?t:t.ownerDocument}function c0(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ZE(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Ed(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var gf=null;function f2(){var t=window.event;return t&&t.type==="popstate"?t===gf?!1:(gf=t,!0):(gf=null,!1)}var eT=typeof setTimeout=="function"?setTimeout:void 0,d2=typeof clearTimeout=="function"?clearTimeout:void 0,h0=typeof Promise=="function"?Promise:void 0,m2=typeof queueMicrotask=="function"?queueMicrotask:typeof h0<"u"?function(t){return h0.resolve(null).then(t).catch(g2)}:eT;function g2(t){setTimeout(function(){throw t})}function ci(t){return t==="head"}function f0(t,e){var n=e,a=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"||n==="/&"){if(a===0){t.removeChild(i),Kr(e);return}a--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")a++;else if(n==="html")yl(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,yl(n);for(var r=n.firstChild;r;){var s=r.nextSibling,o=r.nodeName;r[Zl]||o==="SCRIPT"||o==="STYLE"||o==="LINK"&&r.rel.toLowerCase()==="stylesheet"||n.removeChild(r),r=s}}else n==="body"&&yl(t.ownerDocument.body);n=i}while(n);Kr(e)}function d0(t,e){var n=t;t=0;do{var a=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=a}while(n)}function Td(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Td(n),um(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function p2(t,e,n,a){for(;t.nodeType===1;){var i=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!a&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(a){if(!t[Zl])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(r=t.getAttribute("rel"),r==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(r!==i.rel||t.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||t.getAttribute("title")!==(i.title==null?null:i.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(r=t.getAttribute("src"),(r!==(i.src==null?null:i.src)||t.getAttribute("type")!==(i.type==null?null:i.type)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&r&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var r=i.name==null?null:""+i.name;if(i.type==="hidden"&&t.getAttribute("name")===r)return t}else return t;if(t=dn(t.nextSibling),t===null)break}return null}function y2(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=dn(t.nextSibling),t===null))return null;return t}function tT(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=dn(t.nextSibling),t===null))return null;return t}function xd(t){return t.data==="$?"||t.data==="$~"}function Sd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function v2(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var a=function(){e(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),t._reactRetry=a}}function dn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var wd=null;function m0(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return dn(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function g0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function nT(t,e,n){switch(e=Zu(n),t){case"html":if(t=e.documentElement,!t)throw Error(P(452));return t;case"head":if(t=e.head,!t)throw Error(P(453));return t;case"body":if(t=e.body,!t)throw Error(P(454));return t;default:throw Error(P(451))}}function yl(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);um(t)}var gn=new Map,p0=new Set;function ec(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ga=he.d;he.d={f:_2,r:b2,D:E2,C:T2,L:x2,m:S2,X:A2,S:w2,M:R2};function _2(){var t=ga.f(),e=Uc();return t||e}function b2(t){var e=ls(t);e!==null&&e.tag===5&&e.type==="form"?Xb(e):ga.r(t)}var hs=typeof document>"u"?null:document;function aT(t,e,n){var a=hs;if(a&&typeof e=="string"&&e){var i=ln(e);i='link[rel="'+t+'"][href="'+i+'"]',typeof n=="string"&&(i+='[crossorigin="'+n+'"]'),p0.has(i)||(p0.add(i),t={rel:t,crossOrigin:n,href:e},a.querySelector(i)===null&&(e=a.createElement("link"),ft(e,"link",t),at(e),a.head.appendChild(e)))}}function E2(t){ga.D(t),aT("dns-prefetch",t,null)}function T2(t,e){ga.C(t,e),aT("preconnect",t,e)}function x2(t,e,n){ga.L(t,e,n);var a=hs;if(a&&t&&e){var i='link[rel="preload"][as="'+ln(e)+'"]';e==="image"&&n&&n.imageSrcSet?(i+='[imagesrcset="'+ln(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(i+='[imagesizes="'+ln(n.imageSizes)+'"]')):i+='[href="'+ln(t)+'"]';var r=i;switch(e){case"style":r=Xr(t);break;case"script":r=fs(t)}gn.has(r)||(t=Ne({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),gn.set(r,t),a.querySelector(i)!==null||e==="style"&&a.querySelector(ro(r))||e==="script"&&a.querySelector(so(r))||(e=a.createElement("link"),ft(e,"link",t),at(e),a.head.appendChild(e)))}}function S2(t,e){ga.m(t,e);var n=hs;if(n&&t){var a=e&&typeof e.as=="string"?e.as:"script",i='link[rel="modulepreload"][as="'+ln(a)+'"][href="'+ln(t)+'"]',r=i;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=fs(t)}if(!gn.has(r)&&(t=Ne({rel:"modulepreload",href:t},e),gn.set(r,t),n.querySelector(i)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(so(r)))return}a=n.createElement("link"),ft(a,"link",t),at(a),n.head.appendChild(a)}}}function w2(t,e,n){ga.S(t,e,n);var a=hs;if(a&&t){var i=Dr(a).hoistableStyles,r=Xr(t);e=e||"default";var s=i.get(r);if(!s){var o={loading:0,preload:null};if(s=a.querySelector(ro(r)))o.loading=5;else{t=Ne({rel:"stylesheet",href:t,"data-precedence":e},n),(n=gn.get(r))&&$m(t,n);var u=s=a.createElement("link");at(u),ft(u,"link",t),u._p=new Promise(function(c,f){u.onload=c,u.onerror=f}),u.addEventListener("load",function(){o.loading|=1}),u.addEventListener("error",function(){o.loading|=2}),o.loading|=4,pu(s,e,a)}s={type:"stylesheet",instance:s,count:1,state:o},i.set(r,s)}}}function A2(t,e){ga.X(t,e);var n=hs;if(n&&t){var a=Dr(n).hoistableScripts,i=fs(t),r=a.get(i);r||(r=n.querySelector(so(i)),r||(t=Ne({src:t,async:!0},e),(e=gn.get(i))&&Xm(t,e),r=n.createElement("script"),at(r),ft(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},a.set(i,r))}}function R2(t,e){ga.M(t,e);var n=hs;if(n&&t){var a=Dr(n).hoistableScripts,i=fs(t),r=a.get(i);r||(r=n.querySelector(so(i)),r||(t=Ne({src:t,async:!0,type:"module"},e),(e=gn.get(i))&&Xm(t,e),r=n.createElement("script"),at(r),ft(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},a.set(i,r))}}function y0(t,e,n,a){var i=(i=Pa.current)?ec(i):null;if(!i)throw Error(P(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Xr(n.href),n=Dr(i).hoistableStyles,a=n.get(e),a||(a={type:"style",instance:null,count:0,state:null},n.set(e,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Xr(n.href);var r=Dr(i).hoistableStyles,s=r.get(t);if(s||(i=i.ownerDocument||i,s={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(t,s),(r=i.querySelector(ro(t)))&&!r._p&&(s.instance=r,s.state.loading=5),gn.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},gn.set(t,n),r||C2(i,t,n,s.state))),e&&a===null)throw Error(P(528,""));return s}if(e&&a!==null)throw Error(P(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=fs(n),n=Dr(i).hoistableScripts,a=n.get(e),a||(a={type:"script",instance:null,count:0,state:null},n.set(e,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(P(444,t))}}function Xr(t){return'href="'+ln(t)+'"'}function ro(t){return'link[rel="stylesheet"]['+t+"]"}function iT(t){return Ne({},t,{"data-precedence":t.precedence,precedence:null})}function C2(t,e,n,a){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?a.loading=1:(e=t.createElement("link"),a.preload=e,e.addEventListener("load",function(){return a.loading|=1}),e.addEventListener("error",function(){return a.loading|=2}),ft(e,"link",n),at(e),t.head.appendChild(e))}function fs(t){return'[src="'+ln(t)+'"]'}function so(t){return"script[async]"+t}function v0(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var a=t.querySelector('style[data-href~="'+ln(n.href)+'"]');if(a)return e.instance=a,at(a),a;var i=Ne({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return a=(t.ownerDocument||t).createElement("style"),at(a),ft(a,"style",i),pu(a,n.precedence,t),e.instance=a;case"stylesheet":i=Xr(n.href);var r=t.querySelector(ro(i));if(r)return e.state.loading|=4,e.instance=r,at(r),r;a=iT(n),(i=gn.get(i))&&$m(a,i),r=(t.ownerDocument||t).createElement("link"),at(r);var s=r;return s._p=new Promise(function(o,u){s.onload=o,s.onerror=u}),ft(r,"link",a),e.state.loading|=4,pu(r,n.precedence,t),e.instance=r;case"script":return r=fs(n.src),(i=t.querySelector(so(r)))?(e.instance=i,at(i),i):(a=n,(i=gn.get(r))&&(a=Ne({},n),Xm(a,i)),t=t.ownerDocument||t,i=t.createElement("script"),at(i),ft(i,"link",a),t.head.appendChild(i),e.instance=i);case"void":return null;default:throw Error(P(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(a=e.instance,e.state.loading|=4,pu(a,n.precedence,t));return e.instance}function pu(t,e,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=a.length?a[a.length-1]:null,r=i,s=0;s<a.length;s++){var o=a[s];if(o.dataset.precedence===e)r=o;else if(r!==i)break}r?r.parentNode.insertBefore(t,r.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function $m(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function Xm(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var yu=null;function _0(t,e,n){if(yu===null){var a=new Map,i=yu=new Map;i.set(n,a)}else i=yu,a=i.get(n),a||(a=new Map,i.set(n,a));if(a.has(t))return a;for(a.set(t,null),n=n.getElementsByTagName(t),i=0;i<n.length;i++){var r=n[i];if(!(r[Zl]||r[ot]||t==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var s=r.getAttribute(e)||"";s=t+s;var o=a.get(s);o?o.push(r):a.set(s,[r])}}return a}function b0(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function N2(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function rT(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function D2(t,e,n,a){if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var i=Xr(a.href),r=e.querySelector(ro(i));if(r){e=r._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=tc.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=r,at(r);return}r=e.ownerDocument||e,a=iT(a),(i=gn.get(i))&&$m(a,i),r=r.createElement("link"),at(r);var s=r;s._p=new Promise(function(o,u){s.onload=o,s.onerror=u}),ft(r,"link",a),n.instance=r}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=tc.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var pf=0;function I2(t,e){return t.stylesheets&&t.count===0&&vu(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var a=setTimeout(function(){if(t.stylesheets&&vu(t,t.stylesheets),t.unsuspend){var r=t.unsuspend;t.unsuspend=null,r()}},6e4+e);0<t.imgBytes&&pf===0&&(pf=62500*h2());var i=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&vu(t,t.stylesheets),t.unsuspend)){var r=t.unsuspend;t.unsuspend=null,r()}},(t.imgBytes>pf?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(a),clearTimeout(i)}}:null}function tc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)vu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var nc=null;function vu(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,nc=new Map,e.forEach(O2,t),nc=null,tc.call(t))}function O2(t,e){if(!(e.state.loading&4)){var n=nc.get(t);if(n)var a=n.get(null);else{n=new Map,nc.set(t,n);for(var i=t.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<i.length;r++){var s=i[r];(s.nodeName==="LINK"||s.getAttribute("media")!=="not all")&&(n.set(s.dataset.precedence,s),a=s)}a&&n.set(null,a)}i=e.instance,s=i.getAttribute("data-precedence"),r=n.get(s)||a,r===a&&n.set(null,i),n.set(s,i),this.count++,a=tc.bind(this),i.addEventListener("load",a),i.addEventListener("error",a),r?r.parentNode.insertBefore(i,r.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(i,t.firstChild)),e.state.loading|=4}}var jl={$$typeof:Kn,Provider:null,Consumer:null,_currentValue:Ni,_currentValue2:Ni,_threadCount:0};function M2(t,e,n,a,i,r,s,o,u){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Uh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uh(0),this.hiddenUpdates=Uh(null),this.identifierPrefix=a,this.onUncaughtError=i,this.onCaughtError=r,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=u,this.incompleteTransitions=new Map}function sT(t,e,n,a,i,r,s,o,u,c,f,m){return t=new M2(t,e,n,s,u,c,f,m,o),e=1,r===!0&&(e|=24),r=Gt(3,null,null,e),t.current=r,r.stateNode=t,e=Em(),e.refCount++,t.pooledCache=e,e.refCount++,r.memoizedState={element:a,isDehydrated:n,cache:e},Sm(r),t}function lT(t){return t?(t=wr,t):wr}function oT(t,e,n,a,i,r){i=lT(i),a.context===null?a.context=i:a.pendingContext=i,a=Ba(e),a.payload={element:n},r=r===void 0?null:r,r!==null&&(a.callback=r),n=qa(t,a,e),n!==null&&(Lt(n,t,e),ul(n,t,e))}function E0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Km(t,e){E0(t,e),(t=t.alternate)&&E0(t,e)}function uT(t){if(t.tag===13||t.tag===31){var e=Ki(t,67108864);e!==null&&Lt(e,t,67108864),Km(t,67108864)}}function T0(t){if(t.tag===13||t.tag===31){var e=Jt();e=lm(e);var n=Ki(t,e);n!==null&&Lt(n,t,e),Km(t,e)}}var ac=!0;function V2(t,e,n,a){var i=Q.T;Q.T=null;var r=he.p;try{he.p=2,Wm(t,e,n,a)}finally{he.p=r,Q.T=i}}function j2(t,e,n,a){var i=Q.T;Q.T=null;var r=he.p;try{he.p=8,Wm(t,e,n,a)}finally{he.p=r,Q.T=i}}function Wm(t,e,n,a){if(ac){var i=Ad(a);if(i===null)mf(t,e,a,ic,n),x0(t,a);else if(k2(i,t,e,n,a))a.stopPropagation();else if(x0(t,a),e&4&&-1<L2.indexOf(t)){for(;i!==null;){var r=ls(i);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var s=xi(r.pendingLanes);if(s!==0){var o=r;for(o.pendingLanes|=2,o.entangledLanes|=2;s;){var u=1<<31-Wt(s);o.entanglements[1]|=u,s&=~u}zn(r),!(ce&6)&&(Qu=Xt()+500,io(0))}}break;case 31:case 13:o=Ki(r,2),o!==null&&Lt(o,r,2),Uc(),Km(r,2)}if(r=Ad(a),r===null&&mf(t,e,a,ic,n),r===i)break;i=r}i!==null&&a.stopPropagation()}else mf(t,e,a,null,n)}}function Ad(t){return t=hm(t),Jm(t)}var ic=null;function Jm(t){if(ic=null,t=_r(t),t!==null){var e=Xl(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=N_(e),t!==null)return t;t=null}else if(n===31){if(t=D_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return ic=t,null}function cT(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ew()){case V_:return 2;case j_:return 8;case Mu:case Tw:return 32;case L_:return 268435456;default:return 32}default:return 32}}var Rd=!1,Ga=null,Ya=null,Qa=null,Ll=new Map,kl=new Map,Ia=[],L2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function x0(t,e){switch(t){case"focusin":case"focusout":Ga=null;break;case"dragenter":case"dragleave":Ya=null;break;case"mouseover":case"mouseout":Qa=null;break;case"pointerover":case"pointerout":Ll.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":kl.delete(e.pointerId)}}function Hs(t,e,n,a,i,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:a,nativeEvent:r,targetContainers:[i]},e!==null&&(e=ls(e),e!==null&&uT(e)),t):(t.eventSystemFlags|=a,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function k2(t,e,n,a,i){switch(e){case"focusin":return Ga=Hs(Ga,t,e,n,a,i),!0;case"dragenter":return Ya=Hs(Ya,t,e,n,a,i),!0;case"mouseover":return Qa=Hs(Qa,t,e,n,a,i),!0;case"pointerover":var r=i.pointerId;return Ll.set(r,Hs(Ll.get(r)||null,t,e,n,a,i)),!0;case"gotpointercapture":return r=i.pointerId,kl.set(r,Hs(kl.get(r)||null,t,e,n,a,i)),!0}return!1}function hT(t){var e=_r(t.target);if(e!==null){var n=Xl(e);if(n!==null){if(e=n.tag,e===13){if(e=N_(n),e!==null){t.blockedOn=e,ly(t.priority,function(){T0(n)});return}}else if(e===31){if(e=D_(n),e!==null){t.blockedOn=e,ly(t.priority,function(){T0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _u(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ad(t.nativeEvent);if(n===null){n=t.nativeEvent;var a=new n.constructor(n.type,n);Gf=a,n.target.dispatchEvent(a),Gf=null}else return e=ls(n),e!==null&&uT(e),t.blockedOn=n,!1;e.shift()}return!0}function S0(t,e,n){_u(t)&&n.delete(e)}function U2(){Rd=!1,Ga!==null&&_u(Ga)&&(Ga=null),Ya!==null&&_u(Ya)&&(Ya=null),Qa!==null&&_u(Qa)&&(Qa=null),Ll.forEach(S0),kl.forEach(S0)}function Yo(t,e){t.blockedOn===e&&(t.blockedOn=null,Rd||(Rd=!0,Ze.unstable_scheduleCallback(Ze.unstable_NormalPriority,U2)))}var Qo=null;function w0(t){Qo!==t&&(Qo=t,Ze.unstable_scheduleCallback(Ze.unstable_NormalPriority,function(){Qo===t&&(Qo=null);for(var e=0;e<t.length;e+=3){var n=t[e],a=t[e+1],i=t[e+2];if(typeof a!="function"){if(Jm(a||n)===null)continue;break}var r=ls(n);r!==null&&(t.splice(e,3),e-=3,ld(r,{pending:!0,data:i,method:n.method,action:a},a,i))}}))}function Kr(t){function e(u){return Yo(u,t)}Ga!==null&&Yo(Ga,t),Ya!==null&&Yo(Ya,t),Qa!==null&&Yo(Qa,t),Ll.forEach(e),kl.forEach(e);for(var n=0;n<Ia.length;n++){var a=Ia[n];a.blockedOn===t&&(a.blockedOn=null)}for(;0<Ia.length&&(n=Ia[0],n.blockedOn===null);)hT(n),n.blockedOn===null&&Ia.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(a=0;a<n.length;a+=3){var i=n[a],r=n[a+1],s=i[Ut]||null;if(typeof r=="function")s||w0(n);else if(s){var o=null;if(r&&r.hasAttribute("formAction")){if(i=r,s=r[Ut]||null)o=s.formAction;else if(Jm(i)!==null)continue}else o=s.action;typeof o=="function"?n[a+1]=o:(n.splice(a,3),a-=3),w0(n)}}}function fT(){function t(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(s){return i=s})},focusReset:"manual",scroll:"manual"})}function e(){i!==null&&(i(),i=null),a||setTimeout(n,20)}function n(){if(!a&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,i=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){a=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),i!==null&&(i(),i=null)}}}function Zm(t){this._internalRoot=t}Bc.prototype.render=Zm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(P(409));var n=e.current,a=Jt();oT(n,a,t,e,null,null)};Bc.prototype.unmount=Zm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;oT(t.current,2,null,t,null,null),Uc(),e[ss]=null}};function Bc(t){this._internalRoot=t}Bc.prototype.unstable_scheduleHydration=function(t){if(t){var e=B_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ia.length&&e!==0&&e<Ia[n].priority;n++);Ia.splice(n,0,t),n===0&&hT(t)}};var A0=R_.version;if(A0!=="19.2.4")throw Error(P(527,A0,"19.2.4"));he.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(P(188)):(t=Object.keys(t).join(","),Error(P(268,t)));return t=mw(e),t=t!==null?I_(t):null,t=t===null?null:t.stateNode,t};var P2={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $o=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$o.isDisabled&&$o.supportsFiber)try{Kl=$o.inject(P2),Kt=$o}catch{}}Sc.createRoot=function(t,e){if(!C_(t))throw Error(P(299));var n=!1,a="",i=aE,r=iE,s=rE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(a=e.identifierPrefix),e.onUncaughtError!==void 0&&(i=e.onUncaughtError),e.onCaughtError!==void 0&&(r=e.onCaughtError),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=sT(t,1,!1,null,null,n,a,null,i,r,s,fT),t[ss]=e.current,Qm(t),new Zm(e)};Sc.hydrateRoot=function(t,e,n){if(!C_(t))throw Error(P(299));var a=!1,i="",r=aE,s=iE,o=rE,u=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(s=n.onCaughtError),n.onRecoverableError!==void 0&&(o=n.onRecoverableError),n.formState!==void 0&&(u=n.formState)),e=sT(t,1,!0,e,n??null,a,i,u,r,s,o,fT),e.context=lT(null),n=e.current,a=Jt(),a=lm(a),i=Ba(a),i.callback=null,qa(n,i,a),n=a,e.current.lanes=n,Jl(e,n),zn(e),t[ss]=e.current,Qm(t),new Bc(e)};Sc.version="19.2.4";function dT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dT)}catch(t){console.error(t)}}dT(),E_.exports=Sc;var z2=E_.exports;const B2=h_(z2);/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var R0="popstate";function q2(t={}){function e(i,r){let{pathname:s="/",search:o="",hash:u=""}=Ji(i.location.hash.substring(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),Cd("",{pathname:s,search:o,hash:u},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){let s=i.document.querySelector("base"),o="";if(s&&s.getAttribute("href")){let u=i.location.href,c=u.indexOf("#");o=c===-1?u:u.slice(0,c)}return o+"#"+(typeof r=="string"?r:Ul(r))}function a(i,r){bn(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(r)})`)}return F2(e,n,a,t)}function Ie(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function bn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function H2(){return Math.random().toString(36).substring(2,10)}function C0(t,e){return{usr:t.state,key:t.key,idx:e}}function Cd(t,e,n=null,a){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ji(e):e,state:n,key:e&&e.key||a||H2()}}function Ul({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ji(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let a=t.indexOf("?");a>=0&&(e.search=t.substring(a),t=t.substring(0,a)),t&&(e.pathname=t)}return e}function F2(t,e,n,a={}){let{window:i=document.defaultView,v5Compat:r=!1}=a,s=i.history,o="POP",u=null,c=f();c==null&&(c=0,s.replaceState({...s.state,idx:c},""));function f(){return(s.state||{idx:null}).idx}function m(){o="POP";let D=f(),x=D==null?null:D-c;c=D,u&&u({action:o,location:O.location,delta:x})}function d(D,x){o="PUSH";let y=Cd(O.location,D,x);n&&n(y,D),c=f()+1;let _=C0(y,c),N=O.createHref(y);try{s.pushState(_,"",N)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;i.location.assign(N)}r&&u&&u({action:o,location:O.location,delta:1})}function v(D,x){o="REPLACE";let y=Cd(O.location,D,x);n&&n(y,D),c=f();let _=C0(y,c),N=O.createHref(y);s.replaceState(_,"",N),r&&u&&u({action:o,location:O.location,delta:0})}function R(D){return G2(D)}let O={get action(){return o},get location(){return t(i,s)},listen(D){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(R0,m),u=D,()=>{i.removeEventListener(R0,m),u=null}},createHref(D){return e(i,D)},createURL:R,encodeLocation(D){let x=R(D);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:d,replace:v,go(D){return s.go(D)}};return O}function G2(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ie(n,"No window.location.(origin|href) available to create URL");let a=typeof t=="string"?t:Ul(t);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=n+a),new URL(a,n)}function mT(t,e,n="/"){return Y2(t,e,n,!1)}function Y2(t,e,n,a){let i=typeof e=="string"?Ji(e):e,r=ua(i.pathname||"/",n);if(r==null)return null;let s=gT(t);Q2(s);let o=null;for(let u=0;o==null&&u<s.length;++u){let c=iR(r);o=nR(s[u],c,a)}return o}function gT(t,e=[],n=[],a="",i=!1){let r=(s,o,u=i,c)=>{let f={relativePath:c===void 0?s.path||"":c,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(a)&&u)return;Ie(f.relativePath.startsWith(a),`Absolute route path "${f.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(a.length)}let m=na([a,f.relativePath]),d=n.concat(f);s.children&&s.children.length>0&&(Ie(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),gT(s.children,e,d,m,u)),!(s.path==null&&!s.index)&&e.push({path:m,score:eR(m,s.index),routesMeta:d})};return t.forEach((s,o)=>{var u;if(s.path===""||!((u=s.path)!=null&&u.includes("?")))r(s,o);else for(let c of pT(s.path))r(s,o,!0,c)}),e}function pT(t){let e=t.split("/");if(e.length===0)return[];let[n,...a]=e,i=n.endsWith("?"),r=n.replace(/\?$/,"");if(a.length===0)return i?[r,""]:[r];let s=pT(a.join("/")),o=[];return o.push(...s.map(u=>u===""?r:[r,u].join("/"))),i&&o.push(...s),o.map(u=>t.startsWith("/")&&u===""?"/":u)}function Q2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:tR(e.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}var $2=/^:[\w-]+$/,X2=3,K2=2,W2=1,J2=10,Z2=-2,N0=t=>t==="*";function eR(t,e){let n=t.split("/"),a=n.length;return n.some(N0)&&(a+=Z2),e&&(a+=K2),n.filter(i=>!N0(i)).reduce((i,r)=>i+($2.test(r)?X2:r===""?W2:J2),a)}function tR(t,e){return t.length===e.length&&t.slice(0,-1).every((a,i)=>a===e[i])?t[t.length-1]-e[e.length-1]:0}function nR(t,e,n=!1){let{routesMeta:a}=t,i={},r="/",s=[];for(let o=0;o<a.length;++o){let u=a[o],c=o===a.length-1,f=r==="/"?e:e.slice(r.length)||"/",m=rc({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},f),d=u.route;if(!m&&c&&n&&!a[a.length-1].route.index&&(m=rc({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!m)return null;Object.assign(i,m.params),s.push({params:i,pathname:na([r,m.pathname]),pathnameBase:oR(na([r,m.pathnameBase])),route:d}),m.pathnameBase!=="/"&&(r=na([r,m.pathnameBase]))}return s}function rc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,a]=aR(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let r=i[0],s=r.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:a.reduce((c,{paramName:f,isOptional:m},d)=>{if(f==="*"){let R=o[d]||"";s=r.slice(0,r.length-R.length).replace(/(.)\/+$/,"$1")}const v=o[d];return m&&!v?c[f]=void 0:c[f]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:r,pathnameBase:s,pattern:t}}function aR(t,e=!1,n=!0){bn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let a=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,u)=>(a.push({paramName:o,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(a.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),a]}function iR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return bn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ua(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,a=t.charAt(n);return a&&a!=="/"?null:t.slice(n)||"/"}var rR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function sR(t,e="/"){let{pathname:n,search:a="",hash:i=""}=typeof t=="string"?Ji(t):t,r;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?r=D0(n.substring(1),"/"):r=D0(n,e)):r=e,{pathname:r,search:uR(a),hash:cR(i)}}function D0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function yf(t,e,n,a){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function lR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function yT(t){let e=lR(t);return e.map((n,a)=>a===e.length-1?n.pathname:n.pathnameBase)}function vT(t,e,n,a=!1){let i;typeof t=="string"?i=Ji(t):(i={...t},Ie(!i.pathname||!i.pathname.includes("?"),yf("?","pathname","search",i)),Ie(!i.pathname||!i.pathname.includes("#"),yf("#","pathname","hash",i)),Ie(!i.search||!i.search.includes("#"),yf("#","search","hash",i)));let r=t===""||i.pathname==="",s=r?"/":i.pathname,o;if(s==null)o=n;else{let m=e.length-1;if(!a&&s.startsWith("..")){let d=s.split("/");for(;d[0]==="..";)d.shift(),m-=1;i.pathname=d.join("/")}o=m>=0?e[m]:"/"}let u=sR(i,o),c=s&&s!=="/"&&s.endsWith("/"),f=(r||s===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||f)&&(u.pathname+="/"),u}var na=t=>t.join("/").replace(/\/\/+/g,"/"),oR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),uR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,cR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,hR=class{constructor(t,e,n,a=!1){this.status=t,this.statusText=e||"",this.internal=a,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function fR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function dR(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var _T=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function bT(t,e){let n=t;if(typeof n!="string"||!rR.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let a=n,i=!1;if(_T)try{let r=new URL(window.location.href),s=n.startsWith("//")?new URL(r.protocol+n):new URL(n),o=ua(s.pathname,e);s.origin===r.origin&&o!=null?n=o+s.search+s.hash:i=!0}catch{bn(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:a,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ET=["POST","PUT","PATCH","DELETE"];new Set(ET);var mR=["GET",...ET];new Set(mR);var ds=M.createContext(null);ds.displayName="DataRouter";var qc=M.createContext(null);qc.displayName="DataRouterState";var gR=M.createContext(!1),TT=M.createContext({isTransitioning:!1});TT.displayName="ViewTransition";var pR=M.createContext(new Map);pR.displayName="Fetchers";var yR=M.createContext(null);yR.displayName="Await";var pn=M.createContext(null);pn.displayName="Navigation";var lo=M.createContext(null);lo.displayName="Location";var Bn=M.createContext({outlet:null,matches:[],isDataRoute:!1});Bn.displayName="Route";var eg=M.createContext(null);eg.displayName="RouteError";var xT="REACT_ROUTER_ERROR",vR="REDIRECT",_R="ROUTE_ERROR_RESPONSE";function bR(t){if(t.startsWith(`${xT}:${vR}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function ER(t){if(t.startsWith(`${xT}:${_R}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new hR(e.status,e.statusText,e.data)}catch{}}function TR(t,{relative:e}={}){Ie(oo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=M.useContext(pn),{hash:i,pathname:r,search:s}=uo(t,{relative:e}),o=r;return n!=="/"&&(o=r==="/"?n:na([n,r])),a.createHref({pathname:o,search:s,hash:i})}function oo(){return M.useContext(lo)!=null}function Zi(){return Ie(oo(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(lo).location}var ST="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function wT(t){M.useContext(pn).static||M.useLayoutEffect(t)}function tg(){let{isDataRoute:t}=M.useContext(Bn);return t?LR():xR()}function xR(){Ie(oo(),"useNavigate() may be used only in the context of a <Router> component.");let t=M.useContext(ds),{basename:e,navigator:n}=M.useContext(pn),{matches:a}=M.useContext(Bn),{pathname:i}=Zi(),r=JSON.stringify(yT(a)),s=M.useRef(!1);return wT(()=>{s.current=!0}),M.useCallback((u,c={})=>{if(bn(s.current,ST),!s.current)return;if(typeof u=="number"){n.go(u);return}let f=vT(u,JSON.parse(r),i,c.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:na([e,f.pathname])),(c.replace?n.replace:n.push)(f,c.state,c)},[e,n,r,i,t])}M.createContext(null);function SR(){let{matches:t}=M.useContext(Bn),e=t[t.length-1];return e?e.params:{}}function uo(t,{relative:e}={}){let{matches:n}=M.useContext(Bn),{pathname:a}=Zi(),i=JSON.stringify(yT(n));return M.useMemo(()=>vT(t,JSON.parse(i),a,e==="path"),[t,i,a,e])}function wR(t,e){return AT(t,e)}function AT(t,e,n,a,i){var y;Ie(oo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=M.useContext(pn),{matches:s}=M.useContext(Bn),o=s[s.length-1],u=o?o.params:{},c=o?o.pathname:"/",f=o?o.pathnameBase:"/",m=o&&o.route;{let _=m&&m.path||"";CT(c,!m||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let d=Zi(),v;if(e){let _=typeof e=="string"?Ji(e):e;Ie(f==="/"||((y=_.pathname)==null?void 0:y.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${_.pathname}" was given in the \`location\` prop.`),v=_}else v=d;let R=v.pathname||"/",O=R;if(f!=="/"){let _=f.replace(/^\//,"").split("/");O="/"+R.replace(/^\//,"").split("/").slice(_.length).join("/")}let D=mT(t,{pathname:O});bn(m||D!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),bn(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=DR(D&&D.map(_=>Object.assign({},_,{params:Object.assign({},u,_.params),pathname:na([f,r.encodeLocation?r.encodeLocation(_.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?f:na([f,r.encodeLocation?r.encodeLocation(_.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathnameBase])})),s,n,a,i);return e&&x?M.createElement(lo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},x):x}function AR(){let t=jR(),e=fR(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,a="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:a},r={padding:"2px 4px",backgroundColor:a},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:r},"ErrorBoundary")," or"," ",M.createElement("code",{style:r},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:i},n):null,s)}var RR=M.createElement(AR,null),RT=class extends M.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=ER(t.digest);n&&(t=n)}let e=t!==void 0?M.createElement(Bn.Provider,{value:this.props.routeContext},M.createElement(eg.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?M.createElement(CR,{error:t},e):e}};RT.contextType=gR;var vf=new WeakMap;function CR({children:t,error:e}){let{basename:n}=M.useContext(pn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let a=bR(e.digest);if(a){let i=vf.get(e);if(i)throw i;let r=bT(a.location,n);if(_T&&!vf.get(e))if(r.isExternal||a.reloadDocument)window.location.href=r.absoluteURL||r.to;else{const s=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(r.to,{replace:a.replace}));throw vf.set(e,s),s}return M.createElement("meta",{httpEquiv:"refresh",content:`0;url=${r.absoluteURL||r.to}`})}}return t}function NR({routeContext:t,match:e,children:n}){let a=M.useContext(ds);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(Bn.Provider,{value:t},n)}function DR(t,e=[],n=null,a=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let r=t,s=n==null?void 0:n.errors;if(s!=null){let f=r.findIndex(m=>m.route.id&&(s==null?void 0:s[m.route.id])!==void 0);Ie(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),r=r.slice(0,Math.min(r.length,f+1))}let o=!1,u=-1;if(n)for(let f=0;f<r.length;f++){let m=r[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(u=f),m.route.id){let{loaderData:d,errors:v}=n,R=m.route.loader&&!d.hasOwnProperty(m.route.id)&&(!v||v[m.route.id]===void 0);if(m.route.lazy||R){o=!0,u>=0?r=r.slice(0,u+1):r=[r[0]];break}}}let c=n&&a?(f,m)=>{var d,v;a(f,{location:n.location,params:((v=(d=n.matches)==null?void 0:d[0])==null?void 0:v.params)??{},unstable_pattern:dR(n.matches),errorInfo:m})}:void 0;return r.reduceRight((f,m,d)=>{let v,R=!1,O=null,D=null;n&&(v=s&&m.route.id?s[m.route.id]:void 0,O=m.route.errorElement||RR,o&&(u<0&&d===0?(CT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),R=!0,D=null):u===d&&(R=!0,D=m.route.hydrateFallbackElement||null)));let x=e.concat(r.slice(0,d+1)),y=()=>{let _;return v?_=O:R?_=D:m.route.Component?_=M.createElement(m.route.Component,null):m.route.element?_=m.route.element:_=f,M.createElement(NR,{match:m,routeContext:{outlet:f,matches:x,isDataRoute:n!=null},children:_})};return n&&(m.route.ErrorBoundary||m.route.errorElement||d===0)?M.createElement(RT,{location:n.location,revalidation:n.revalidation,component:O,error:v,children:y(),routeContext:{outlet:null,matches:x,isDataRoute:!0},onError:c}):y()},null)}function ng(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function IR(t){let e=M.useContext(ds);return Ie(e,ng(t)),e}function OR(t){let e=M.useContext(qc);return Ie(e,ng(t)),e}function MR(t){let e=M.useContext(Bn);return Ie(e,ng(t)),e}function ag(t){let e=MR(t),n=e.matches[e.matches.length-1];return Ie(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function VR(){return ag("useRouteId")}function jR(){var a;let t=M.useContext(eg),e=OR("useRouteError"),n=ag("useRouteError");return t!==void 0?t:(a=e.errors)==null?void 0:a[n]}function LR(){let{router:t}=IR("useNavigate"),e=ag("useNavigate"),n=M.useRef(!1);return wT(()=>{n.current=!0}),M.useCallback(async(i,r={})=>{bn(n.current,ST),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...r}))},[t,e])}var I0={};function CT(t,e,n){!e&&!I0[t]&&(I0[t]=!0,bn(!1,n))}M.memo(kR);function kR({routes:t,future:e,state:n,onError:a}){return AT(t,void 0,n,a,e)}function Zs(t){Ie(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function UR({basename:t="/",children:e=null,location:n,navigationType:a="POP",navigator:i,static:r=!1,unstable_useTransitions:s}){Ie(!oo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),u=M.useMemo(()=>({basename:o,navigator:i,static:r,unstable_useTransitions:s,future:{}}),[o,i,r,s]);typeof n=="string"&&(n=Ji(n));let{pathname:c="/",search:f="",hash:m="",state:d=null,key:v="default"}=n,R=M.useMemo(()=>{let O=ua(c,o);return O==null?null:{location:{pathname:O,search:f,hash:m,state:d,key:v},navigationType:a}},[o,c,f,m,d,v,a]);return bn(R!=null,`<Router basename="${o}"> is not able to match the URL "${c}${f}${m}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:M.createElement(pn.Provider,{value:u},M.createElement(lo.Provider,{children:e,value:R}))}function PR({children:t,location:e}){return wR(Nd(t),e)}function Nd(t,e=[]){let n=[];return M.Children.forEach(t,(a,i)=>{if(!M.isValidElement(a))return;let r=[...e,i];if(a.type===M.Fragment){n.push.apply(n,Nd(a.props.children,r));return}Ie(a.type===Zs,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ie(!a.props.index||!a.props.children,"An index route cannot have child routes.");let s={id:a.props.id||r.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(s.children=Nd(a.props.children,r)),n.push(s)}),n}var bu="get",Eu="application/x-www-form-urlencoded";function Hc(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function zR(t){return Hc(t)&&t.tagName.toLowerCase()==="button"}function BR(t){return Hc(t)&&t.tagName.toLowerCase()==="form"}function qR(t){return Hc(t)&&t.tagName.toLowerCase()==="input"}function HR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function FR(t,e){return t.button===0&&(!e||e==="_self")&&!HR(t)}var Xo=null;function GR(){if(Xo===null)try{new FormData(document.createElement("form"),0),Xo=!1}catch{Xo=!0}return Xo}var YR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function _f(t){return t!=null&&!YR.has(t)?(bn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Eu}"`),null):t}function QR(t,e){let n,a,i,r,s;if(BR(t)){let o=t.getAttribute("action");a=o?ua(o,e):null,n=t.getAttribute("method")||bu,i=_f(t.getAttribute("enctype"))||Eu,r=new FormData(t)}else if(zR(t)||qR(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||o.getAttribute("action");if(a=u?ua(u,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||bu,i=_f(t.getAttribute("formenctype"))||_f(o.getAttribute("enctype"))||Eu,r=new FormData(o,t),!GR()){let{name:c,type:f,value:m}=t;if(f==="image"){let d=c?`${c}.`:"";r.append(`${d}x`,"0"),r.append(`${d}y`,"0")}else c&&r.append(c,m)}}else{if(Hc(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=bu,a=null,i=Eu,s=t}return r&&i==="text/plain"&&(s=r,r=void 0),{action:a,method:n.toLowerCase(),encType:i,formData:r,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ig(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function $R(t,e,n,a){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${a}`:i.pathname=`${i.pathname}.${a}`:i.pathname==="/"?i.pathname=`_root.${a}`:e&&ua(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${a}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${a}`,i}async function XR(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function KR(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function WR(t,e,n){let a=await Promise.all(t.map(async i=>{let r=e.routes[i.route.id];if(r){let s=await XR(r,n);return s.links?s.links():[]}return[]}));return tC(a.flat(1).filter(KR).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function O0(t,e,n,a,i,r){let s=(u,c)=>n[c]?u.route.id!==n[c].route.id:!0,o=(u,c)=>{var f;return n[c].pathname!==u.pathname||((f=n[c].route.path)==null?void 0:f.endsWith("*"))&&n[c].params["*"]!==u.params["*"]};return r==="assets"?e.filter((u,c)=>s(u,c)||o(u,c)):r==="data"?e.filter((u,c)=>{var m;let f=a.routes[u.route.id];if(!f||!f.hasLoader)return!1;if(s(u,c)||o(u,c))return!0;if(u.route.shouldRevalidate){let d=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((m=n[0])==null?void 0:m.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function JR(t,e,{includeHydrateFallback:n}={}){return ZR(t.map(a=>{let i=e.routes[a.route.id];if(!i)return[];let r=[i.module];return i.clientActionModule&&(r=r.concat(i.clientActionModule)),i.clientLoaderModule&&(r=r.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(r=r.concat(i.hydrateFallbackModule)),i.imports&&(r=r.concat(i.imports)),r}).flat(1))}function ZR(t){return[...new Set(t)]}function eC(t){let e={},n=Object.keys(t).sort();for(let a of n)e[a]=t[a];return e}function tC(t,e){let n=new Set;return new Set(e),t.reduce((a,i)=>{let r=JSON.stringify(eC(i));return n.has(r)||(n.add(r),a.push({key:r,link:i})),a},[])}function NT(){let t=M.useContext(ds);return ig(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function nC(){let t=M.useContext(qc);return ig(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var rg=M.createContext(void 0);rg.displayName="FrameworkContext";function DT(){let t=M.useContext(rg);return ig(t,"You must render this element inside a <HydratedRouter> element"),t}function aC(t,e){let n=M.useContext(rg),[a,i]=M.useState(!1),[r,s]=M.useState(!1),{onFocus:o,onBlur:u,onMouseEnter:c,onMouseLeave:f,onTouchStart:m}=e,d=M.useRef(null);M.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let O=x=>{x.forEach(y=>{s(y.isIntersecting)})},D=new IntersectionObserver(O,{threshold:.5});return d.current&&D.observe(d.current),()=>{D.disconnect()}}},[t]),M.useEffect(()=>{if(a){let O=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(O)}}},[a]);let v=()=>{i(!0)},R=()=>{i(!1),s(!1)};return n?t!=="intent"?[r,d,{}]:[r,d,{onFocus:Fs(o,v),onBlur:Fs(u,R),onMouseEnter:Fs(c,v),onMouseLeave:Fs(f,R),onTouchStart:Fs(m,v)}]:[!1,d,{}]}function Fs(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function iC({page:t,...e}){let{router:n}=NT(),a=M.useMemo(()=>mT(n.routes,t,n.basename),[n.routes,t,n.basename]);return a?M.createElement(sC,{page:t,matches:a,...e}):null}function rC(t){let{manifest:e,routeModules:n}=DT(),[a,i]=M.useState([]);return M.useEffect(()=>{let r=!1;return WR(t,e,n).then(s=>{r||i(s)}),()=>{r=!0}},[t,e,n]),a}function sC({page:t,matches:e,...n}){let a=Zi(),{future:i,manifest:r,routeModules:s}=DT(),{basename:o}=NT(),{loaderData:u,matches:c}=nC(),f=M.useMemo(()=>O0(t,e,c,r,a,"data"),[t,e,c,r,a]),m=M.useMemo(()=>O0(t,e,c,r,a,"assets"),[t,e,c,r,a]),d=M.useMemo(()=>{if(t===a.pathname+a.search+a.hash)return[];let O=new Set,D=!1;if(e.forEach(y=>{var N;let _=r.routes[y.route.id];!_||!_.hasLoader||(!f.some(V=>V.route.id===y.route.id)&&y.route.id in u&&((N=s[y.route.id])!=null&&N.shouldRevalidate)||_.hasClientLoader?D=!0:O.add(y.route.id))}),O.size===0)return[];let x=$R(t,o,i.unstable_trailingSlashAwareDataRequests,"data");return D&&O.size>0&&x.searchParams.set("_routes",e.filter(y=>O.has(y.route.id)).map(y=>y.route.id).join(",")),[x.pathname+x.search]},[o,i.unstable_trailingSlashAwareDataRequests,u,a,r,f,e,t,s]),v=M.useMemo(()=>JR(m,r),[m,r]),R=rC(m);return M.createElement(M.Fragment,null,d.map(O=>M.createElement("link",{key:O,rel:"prefetch",as:"fetch",href:O,...n})),v.map(O=>M.createElement("link",{key:O,rel:"modulepreload",href:O,...n})),R.map(({key:O,link:D})=>M.createElement("link",{key:O,nonce:n.nonce,...D,crossOrigin:D.crossOrigin??n.crossOrigin})))}function lC(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var oC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{oC&&(window.__reactRouterVersion="7.13.0")}catch{}function uC({basename:t,children:e,unstable_useTransitions:n,window:a}){let i=M.useRef();i.current==null&&(i.current=q2({window:a,v5Compat:!0}));let r=i.current,[s,o]=M.useState({action:r.action,location:r.location}),u=M.useCallback(c=>{n===!1?o(c):M.startTransition(()=>o(c))},[n]);return M.useLayoutEffect(()=>r.listen(u),[r,u]),M.createElement(UR,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:r,unstable_useTransitions:n})}var IT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,OT=M.forwardRef(function({onClick:e,discover:n="render",prefetch:a="none",relative:i,reloadDocument:r,replace:s,state:o,target:u,to:c,preventScrollReset:f,viewTransition:m,unstable_defaultShouldRevalidate:d,...v},R){let{basename:O,unstable_useTransitions:D}=M.useContext(pn),x=typeof c=="string"&&IT.test(c),y=bT(c,O);c=y.to;let _=TR(c,{relative:i}),[N,V,k]=aC(a,v),E=fC(c,{replace:s,state:o,target:u,preventScrollReset:f,relative:i,viewTransition:m,unstable_defaultShouldRevalidate:d,unstable_useTransitions:D});function b(C){e&&e(C),C.defaultPrevented||E(C)}let S=M.createElement("a",{...v,...k,href:y.absoluteURL||_,onClick:y.isExternal||r?e:b,ref:lC(R,V),target:u,"data-discover":!x&&n==="render"?"true":void 0});return N&&!x?M.createElement(M.Fragment,null,S,M.createElement(iC,{page:_})):S});OT.displayName="Link";var Tu=M.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:a="",end:i=!1,style:r,to:s,viewTransition:o,children:u,...c},f){let m=uo(s,{relative:c.relative}),d=Zi(),v=M.useContext(qc),{navigator:R,basename:O}=M.useContext(pn),D=v!=null&&yC(m)&&o===!0,x=R.encodeLocation?R.encodeLocation(m).pathname:m.pathname,y=d.pathname,_=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(y=y.toLowerCase(),_=_?_.toLowerCase():null,x=x.toLowerCase()),_&&O&&(_=ua(_,O)||_);const N=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let V=y===x||!i&&y.startsWith(x)&&y.charAt(N)==="/",k=_!=null&&(_===x||!i&&_.startsWith(x)&&_.charAt(x.length)==="/"),E={isActive:V,isPending:k,isTransitioning:D},b=V?e:void 0,S;typeof a=="function"?S=a(E):S=[a,V?"active":null,k?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let C=typeof r=="function"?r(E):r;return M.createElement(OT,{...c,"aria-current":b,className:S,ref:f,style:C,to:s,viewTransition:o},typeof u=="function"?u(E):u)});Tu.displayName="NavLink";var cC=M.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:a,replace:i,state:r,method:s=bu,action:o,onSubmit:u,relative:c,preventScrollReset:f,viewTransition:m,unstable_defaultShouldRevalidate:d,...v},R)=>{let{unstable_useTransitions:O}=M.useContext(pn),D=gC(),x=pC(o,{relative:c}),y=s.toLowerCase()==="get"?"get":"post",_=typeof o=="string"&&IT.test(o),N=V=>{if(u&&u(V),V.defaultPrevented)return;V.preventDefault();let k=V.nativeEvent.submitter,E=(k==null?void 0:k.getAttribute("formmethod"))||s,b=()=>D(k||V.currentTarget,{fetcherKey:e,method:E,navigate:n,replace:i,state:r,relative:c,preventScrollReset:f,viewTransition:m,unstable_defaultShouldRevalidate:d});O&&n!==!1?M.startTransition(()=>b()):b()};return M.createElement("form",{ref:R,method:y,action:x,onSubmit:a?u:N,...v,"data-discover":!_&&t==="render"?"true":void 0})});cC.displayName="Form";function hC(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function MT(t){let e=M.useContext(ds);return Ie(e,hC(t)),e}function fC(t,{target:e,replace:n,state:a,preventScrollReset:i,relative:r,viewTransition:s,unstable_defaultShouldRevalidate:o,unstable_useTransitions:u}={}){let c=tg(),f=Zi(),m=uo(t,{relative:r});return M.useCallback(d=>{if(FR(d,e)){d.preventDefault();let v=n!==void 0?n:Ul(f)===Ul(m),R=()=>c(t,{replace:v,state:a,preventScrollReset:i,relative:r,viewTransition:s,unstable_defaultShouldRevalidate:o});u?M.startTransition(()=>R()):R()}},[f,c,m,n,a,e,t,i,r,s,o,u])}var dC=0,mC=()=>`__${String(++dC)}__`;function gC(){let{router:t}=MT("useSubmit"),{basename:e}=M.useContext(pn),n=VR(),a=t.fetch,i=t.navigate;return M.useCallback(async(r,s={})=>{let{action:o,method:u,encType:c,formData:f,body:m}=QR(r,e);if(s.navigate===!1){let d=s.fetcherKey||mC();await a(d,n,s.action||o,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:f,body:m,formMethod:s.method||u,formEncType:s.encType||c,flushSync:s.flushSync})}else await i(s.action||o,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:f,body:m,formMethod:s.method||u,formEncType:s.encType||c,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[a,i,e,n])}function pC(t,{relative:e}={}){let{basename:n}=M.useContext(pn),a=M.useContext(Bn);Ie(a,"useFormAction must be used inside a RouteContext");let[i]=a.matches.slice(-1),r={...uo(t||".",{relative:e})},s=Zi();if(t==null){r.search=s.search;let o=new URLSearchParams(r.search),u=o.getAll("index");if(u.some(f=>f==="")){o.delete("index"),u.filter(m=>m).forEach(m=>o.append("index",m));let f=o.toString();r.search=f?`?${f}`:""}}return(!t||t===".")&&i.route.index&&(r.search=r.search?r.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(r.pathname=r.pathname==="/"?n:na([n,r.pathname])),Ul(r)}function yC(t,{relative:e}={}){let n=M.useContext(TT);Ie(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=MT("useViewTransitionState"),i=uo(t,{relative:e});if(!n.isTransitioning)return!1;let r=ua(n.currentLocation.pathname,a)||n.currentLocation.pathname,s=ua(n.nextLocation.pathname,a)||n.nextLocation.pathname;return rc(i.pathname,s)!=null||rc(i.pathname,r)!=null}const hn=[{id:"user1",name:"Jose",avatar:"/avatars/jose.png",avatarMoods:{happy:"/avatars/jose_happy.png",normal:"/avatars/jose.png",sad:"/avatars/jose_sad.png"}},{id:"user2",name:"Javi",avatar:""},{id:"user3",name:"Gonza",avatar:""},{id:"user4",name:"Fran",avatar:""}];function M0(t,e){if(!(t!=null&&t.avatarMoods))return(t==null?void 0:t.avatar)||"";const n=(e==null?void 0:e.consecutiveSuccesses)||0,a=(e==null?void 0:e.hasShield)||!1,i=(e==null?void 0:e.consecutiveMisses)||0,r=(e==null?void 0:e.walletBalance)||0;return a||n>=3?t.avatarMoods.happy:i>0&&r>0?t.avatarMoods.sad:t.avatarMoods.normal}const Nr=3,Ko=5e3,vC=4e4,V0=5,_C=["Correr","Caminar","Bicicleta","Pesas","Yoga","Natacin","Ftbol","CrossFit","Baile","Otro"],co=t=>new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP",minimumFractionDigits:0}).format(t),bC=()=>{};var j0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=function(t){const e=[];let n=0;for(let a=0;a<t.length;a++){let i=t.charCodeAt(a);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&a+1<t.length&&(t.charCodeAt(a+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++a)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},EC=function(t){const e=[];let n=0,a=0;for(;n<t.length;){const i=t[n++];if(i<128)e[a++]=String.fromCharCode(i);else if(i>191&&i<224){const r=t[n++];e[a++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=t[n++],s=t[n++],o=t[n++],u=((i&7)<<18|(r&63)<<12|(s&63)<<6|o&63)-65536;e[a++]=String.fromCharCode(55296+(u>>10)),e[a++]=String.fromCharCode(56320+(u&1023))}else{const r=t[n++],s=t[n++];e[a++]=String.fromCharCode((i&15)<<12|(r&63)<<6|s&63)}}return e.join("")},jT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let i=0;i<t.length;i+=3){const r=t[i],s=i+1<t.length,o=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,f=r>>2,m=(r&3)<<4|o>>4;let d=(o&15)<<2|c>>6,v=c&63;u||(v=64,s||(d=64)),a.push(n[f],n[m],n[d],n[v])}return a.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(VT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):EC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let i=0;i<t.length;){const r=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,r==null||o==null||c==null||m==null)throw new TC;const d=r<<2|o>>4;if(a.push(d),c!==64){const v=o<<4&240|c>>2;if(a.push(v),m!==64){const R=c<<6&192|m;a.push(R)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class TC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xC=function(t){const e=VT(t);return jT.encodeByteArray(e,!0)},sc=function(t){return xC(t).replace(/\./g,"")},SC=function(t){try{return jT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC=()=>wC().__FIREBASE_DEFAULTS__,RC=()=>{if(typeof process>"u"||typeof j0>"u")return;const t=j0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},CC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&SC(t[1]);return e&&JSON.parse(e)},sg=()=>{try{return bC()||AC()||RC()||CC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},NC=t=>{var e,n;return(n=(e=sg())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},LT=t=>{const e=NC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),a]:[e.substring(0,n),a]},kT=()=>{var t;return(t=sg())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,a)=>{n?this.reject(n):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ho(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function UT(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},a=e||"demo-project",i=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${a}`,aud:a,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...t};return[sc(JSON.stringify(n)),sc(JSON.stringify(s)),""].join(".")}const vl={};function IC(){const t={prod:[],emulator:[]};for(const e of Object.keys(vl))vl[e]?t.emulator.push(e):t.prod.push(e);return t}function OC(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let L0=!1;function zT(t,e){if(typeof window>"u"||typeof document>"u"||!ho(window.location.host)||vl[t]===e||vl[t]||L0)return;vl[t]=e;function n(d){return`__firebase__banner__${d}`}const a="__firebase__banner",r=IC().prod.length>0;function s(){const d=document.getElementById(a);d&&d.remove()}function o(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function u(d,v){d.setAttribute("width","24"),d.setAttribute("id",v),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function c(){const d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{L0=!0,s()},d}function f(d,v){d.setAttribute("id",v),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function m(){const d=OC(a),v=n("text"),R=document.getElementById(v)||document.createElement("span"),O=n("learnmore"),D=document.getElementById(O)||document.createElement("a"),x=n("preprendIcon"),y=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){const _=d.element;o(_),f(D,O);const N=c();u(y,x),_.append(y,R,D,N),document.body.appendChild(_)}r?(R.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function VC(){var e;const t=(e=sg())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function jC(){return!VC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LC(){try{return typeof indexedDB=="object"}catch{return!1}}function kC(){return new Promise((t,e)=>{try{let n=!0;const a="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(a);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(a),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var r;e(((r=i.error)==null?void 0:r.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC="FirebaseError";class er extends Error{constructor(e,n,a){super(n),this.code=e,this.customData=a,this.name=UC,Object.setPrototypeOf(this,er.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,BT.prototype.create)}}class BT{constructor(e,n,a){this.service=e,this.serviceName=n,this.errors=a}create(e,...n){const a=n[0]||{},i=`${this.service}/${e}`,r=this.errors[e],s=r?PC(r,a):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new er(i,o,a)}}function PC(t,e){return t.replace(zC,(n,a)=>{const i=e[a];return i!=null?String(i):`<${a}?>`})}const zC=/\{\$([^}]+)}/g;function lc(t,e){if(t===e)return!0;const n=Object.keys(t),a=Object.keys(e);for(const i of n){if(!a.includes(i))return!1;const r=t[i],s=e[i];if(k0(r)&&k0(s)){if(!lc(r,s))return!1}else if(r!==s)return!1}for(const i of a)if(!n.includes(i))return!1;return!0}function k0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(t){return t&&t._delegate?t._delegate:t}class Wr{constructor(e,n,a){this.name=e,this.instanceFactory=n,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const a=new DC;if(this.instancesDeferred.set(n,a),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&a.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(a)return null;throw i}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HC(e))try{this.getOrInitializeService({instanceIdentifier:Ai})}catch{}for(const[n,a]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:i});a.resolve(r)}catch{}}}}clearInstance(e=Ai){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ai){return this.instances.has(e)}getOptions(e=Ai){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:a,options:n});for(const[r,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(r);a===o&&s.resolve(i)}return i}onInit(e,n){const a=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(a)??new Set;i.add(e),this.onInitCallbacks.set(a,i);const r=this.instances.get(a);return r&&e(r,a),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const a=this.onInitCallbacks.get(n);if(a)for(const i of a)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:qC(e),options:n}),this.instances.set(e,a),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Ai){return this.component?this.component.multipleInstances?e:Ai:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qC(t){return t===Ai?void 0:t}function HC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new BC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(oe||(oe={}));const GC={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},YC=oe.INFO,QC={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},$C=(t,e,...n)=>{if(e<t.logLevel)return;const a=new Date().toISOString(),i=QC[e];if(i)console[i](`[${a}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qT{constructor(e){this.name=e,this._logLevel=YC,this._logHandler=$C,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?GC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}}const XC=(t,e)=>e.some(n=>t instanceof n);let U0,P0;function KC(){return U0||(U0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WC(){return P0||(P0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const HT=new WeakMap,Dd=new WeakMap,FT=new WeakMap,bf=new WeakMap,lg=new WeakMap;function JC(t){const e=new Promise((n,a)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",s)},r=()=>{n($a(t.result)),i()},s=()=>{a(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&HT.set(n,t)}).catch(()=>{}),lg.set(e,t),e}function ZC(t){if(Dd.has(t))return;const e=new Promise((n,a)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",s),t.removeEventListener("abort",s)},r=()=>{n(),i()},s=()=>{a(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",s),t.addEventListener("abort",s)});Dd.set(t,e)}let Id={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Dd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||FT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $a(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function eN(t){Id=t(Id)}function tN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const a=t.call(Ef(this),e,...n);return FT.set(a,e.sort?e.sort():[e]),$a(a)}:WC().includes(t)?function(...e){return t.apply(Ef(this),e),$a(HT.get(this))}:function(...e){return $a(t.apply(Ef(this),e))}}function nN(t){return typeof t=="function"?tN(t):(t instanceof IDBTransaction&&ZC(t),XC(t,KC())?new Proxy(t,Id):t)}function $a(t){if(t instanceof IDBRequest)return JC(t);if(bf.has(t))return bf.get(t);const e=nN(t);return e!==t&&(bf.set(t,e),lg.set(e,t)),e}const Ef=t=>lg.get(t);function aN(t,e,{blocked:n,upgrade:a,blocking:i,terminated:r}={}){const s=indexedDB.open(t,e),o=$a(s);return a&&s.addEventListener("upgradeneeded",u=>{a($a(s.result),u.oldVersion,u.newVersion,$a(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),o.then(u=>{r&&u.addEventListener("close",()=>r()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const iN=["get","getKey","getAll","getAllKeys","count"],rN=["put","add","delete","clear"],Tf=new Map;function z0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Tf.get(e))return Tf.get(e);const n=e.replace(/FromIndex$/,""),a=e!==n,i=rN.includes(n);if(!(n in(a?IDBIndex:IDBObjectStore).prototype)||!(i||iN.includes(n)))return;const r=async function(s,...o){const u=this.transaction(s,i?"readwrite":"readonly");let c=u.store;return a&&(c=c.index(o.shift())),(await Promise.all([c[n](...o),i&&u.done]))[0]};return Tf.set(e,r),r}eN(t=>({...t,get:(e,n,a)=>z0(e,n)||t.get(e,n,a),has:(e,n)=>!!z0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(lN(n)){const a=n.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(n=>n).join(" ")}}function lN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Od="@firebase/app",B0="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca=new qT("@firebase/app"),oN="@firebase/app-compat",uN="@firebase/analytics-compat",cN="@firebase/analytics",hN="@firebase/app-check-compat",fN="@firebase/app-check",dN="@firebase/auth",mN="@firebase/auth-compat",gN="@firebase/database",pN="@firebase/data-connect",yN="@firebase/database-compat",vN="@firebase/functions",_N="@firebase/functions-compat",bN="@firebase/installations",EN="@firebase/installations-compat",TN="@firebase/messaging",xN="@firebase/messaging-compat",SN="@firebase/performance",wN="@firebase/performance-compat",AN="@firebase/remote-config",RN="@firebase/remote-config-compat",CN="@firebase/storage",NN="@firebase/storage-compat",DN="@firebase/firestore",IN="@firebase/ai",ON="@firebase/firestore-compat",MN="firebase",VN="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md="[DEFAULT]",jN={[Od]:"fire-core",[oN]:"fire-core-compat",[cN]:"fire-analytics",[uN]:"fire-analytics-compat",[fN]:"fire-app-check",[hN]:"fire-app-check-compat",[dN]:"fire-auth",[mN]:"fire-auth-compat",[gN]:"fire-rtdb",[pN]:"fire-data-connect",[yN]:"fire-rtdb-compat",[vN]:"fire-fn",[_N]:"fire-fn-compat",[bN]:"fire-iid",[EN]:"fire-iid-compat",[TN]:"fire-fcm",[xN]:"fire-fcm-compat",[SN]:"fire-perf",[wN]:"fire-perf-compat",[AN]:"fire-rc",[RN]:"fire-rc-compat",[CN]:"fire-gcs",[NN]:"fire-gcs-compat",[DN]:"fire-fst",[ON]:"fire-fst-compat",[IN]:"fire-vertex","fire-js":"fire-js",[MN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oc=new Map,LN=new Map,Vd=new Map;function q0(t,e){try{t.container.addComponent(e)}catch(n){ca.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Pl(t){const e=t.name;if(Vd.has(e))return ca.debug(`There were multiple attempts to register component ${e}.`),!1;Vd.set(e,t);for(const n of oc.values())q0(n,t);for(const n of LN.values())q0(n,t);return!0}function GT(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function YT(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xa=new BT("app","Firebase",kN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e,n,a){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Wr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT=VN;function $T(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const a={name:Md,automaticDataCollectionEnabled:!0,...e},i=a.name;if(typeof i!="string"||!i)throw Xa.create("bad-app-name",{appName:String(i)});if(n||(n=kT()),!n)throw Xa.create("no-options");const r=oc.get(i);if(r){if(lc(n,r.options)&&lc(a,r.config))return r;throw Xa.create("duplicate-app",{appName:i})}const s=new FC(i);for(const u of Vd.values())s.addComponent(u);const o=new UN(n,a,s);return oc.set(i,o),o}function XT(t=Md){const e=oc.get(t);if(!e&&t===Md&&kT())return $T();if(!e)throw Xa.create("no-app",{appName:t});return e}function Ka(t,e,n){let a=jN[t]??t;n&&(a+=`-${n}`);const i=a.match(/\s|\//),r=e.match(/\s|\//);if(i||r){const s=[`Unable to register library "${a}" with version "${e}":`];i&&s.push(`library name "${a}" contains illegal characters (whitespace or "/")`),i&&r&&s.push("and"),r&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ca.warn(s.join(" "));return}Pl(new Wr(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN="firebase-heartbeat-database",zN=1,zl="firebase-heartbeat-store";let xf=null;function KT(){return xf||(xf=aN(PN,zN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(zl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Xa.create("idb-open",{originalErrorMessage:t.message})})),xf}async function BN(t){try{const n=(await KT()).transaction(zl),a=await n.objectStore(zl).get(WT(t));return await n.done,a}catch(e){if(e instanceof er)ca.warn(e.message);else{const n=Xa.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ca.warn(n.message)}}}async function H0(t,e){try{const a=(await KT()).transaction(zl,"readwrite");await a.objectStore(zl).put(e,WT(t)),await a.done}catch(n){if(n instanceof er)ca.warn(n.message);else{const a=Xa.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ca.warn(a.message)}}}function WT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN=1024,HN=30;class FN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new YN(n),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=F0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats.length>HN){const s=QN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){ca.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=F0(),{heartbeatsToSend:a,unsentEntries:i}=GN(this._heartbeatsCache.heartbeats),r=sc(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return ca.warn(n),""}}}function F0(){return new Date().toISOString().substring(0,10)}function GN(t,e=qN){const n=[];let a=t.slice();for(const i of t){const r=n.find(s=>s.agent===i.agent);if(r){if(r.dates.push(i.date),G0(n)>e){r.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),G0(n)>e){n.pop();break}a=a.slice(1)}return{heartbeatsToSend:n,unsentEntries:a}}class YN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LC()?kC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await BN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return H0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return H0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function G0(t){return sc(JSON.stringify({version:2,heartbeats:t})).length}function QN(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let a=1;a<t.length;a++)t[a].date<n&&(n=t[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(t){Pl(new Wr("platform-logger",e=>new sN(e),"PRIVATE")),Pl(new Wr("heartbeat",e=>new FN(e),"PRIVATE")),Ka(Od,B0,t),Ka(Od,B0,"esm2020"),Ka("fire-js","")}$N("");var Y0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wa,JT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,b){function S(){}S.prototype=b.prototype,E.F=b.prototype,E.prototype=new S,E.prototype.constructor=E,E.D=function(C,w,I){for(var A=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)A[fe-2]=arguments[fe];return b.prototype[w].apply(C,A)}}function n(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,n),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,b,S){S||(S=0);const C=Array(16);if(typeof b=="string")for(var w=0;w<16;++w)C[w]=b.charCodeAt(S++)|b.charCodeAt(S++)<<8|b.charCodeAt(S++)<<16|b.charCodeAt(S++)<<24;else for(w=0;w<16;++w)C[w]=b[S++]|b[S++]<<8|b[S++]<<16|b[S++]<<24;b=E.g[0],S=E.g[1],w=E.g[2];let I=E.g[3],A;A=b+(I^S&(w^I))+C[0]+3614090360&4294967295,b=S+(A<<7&4294967295|A>>>25),A=I+(w^b&(S^w))+C[1]+3905402710&4294967295,I=b+(A<<12&4294967295|A>>>20),A=w+(S^I&(b^S))+C[2]+606105819&4294967295,w=I+(A<<17&4294967295|A>>>15),A=S+(b^w&(I^b))+C[3]+3250441966&4294967295,S=w+(A<<22&4294967295|A>>>10),A=b+(I^S&(w^I))+C[4]+4118548399&4294967295,b=S+(A<<7&4294967295|A>>>25),A=I+(w^b&(S^w))+C[5]+1200080426&4294967295,I=b+(A<<12&4294967295|A>>>20),A=w+(S^I&(b^S))+C[6]+2821735955&4294967295,w=I+(A<<17&4294967295|A>>>15),A=S+(b^w&(I^b))+C[7]+4249261313&4294967295,S=w+(A<<22&4294967295|A>>>10),A=b+(I^S&(w^I))+C[8]+1770035416&4294967295,b=S+(A<<7&4294967295|A>>>25),A=I+(w^b&(S^w))+C[9]+2336552879&4294967295,I=b+(A<<12&4294967295|A>>>20),A=w+(S^I&(b^S))+C[10]+4294925233&4294967295,w=I+(A<<17&4294967295|A>>>15),A=S+(b^w&(I^b))+C[11]+2304563134&4294967295,S=w+(A<<22&4294967295|A>>>10),A=b+(I^S&(w^I))+C[12]+1804603682&4294967295,b=S+(A<<7&4294967295|A>>>25),A=I+(w^b&(S^w))+C[13]+4254626195&4294967295,I=b+(A<<12&4294967295|A>>>20),A=w+(S^I&(b^S))+C[14]+2792965006&4294967295,w=I+(A<<17&4294967295|A>>>15),A=S+(b^w&(I^b))+C[15]+1236535329&4294967295,S=w+(A<<22&4294967295|A>>>10),A=b+(w^I&(S^w))+C[1]+4129170786&4294967295,b=S+(A<<5&4294967295|A>>>27),A=I+(S^w&(b^S))+C[6]+3225465664&4294967295,I=b+(A<<9&4294967295|A>>>23),A=w+(b^S&(I^b))+C[11]+643717713&4294967295,w=I+(A<<14&4294967295|A>>>18),A=S+(I^b&(w^I))+C[0]+3921069994&4294967295,S=w+(A<<20&4294967295|A>>>12),A=b+(w^I&(S^w))+C[5]+3593408605&4294967295,b=S+(A<<5&4294967295|A>>>27),A=I+(S^w&(b^S))+C[10]+38016083&4294967295,I=b+(A<<9&4294967295|A>>>23),A=w+(b^S&(I^b))+C[15]+3634488961&4294967295,w=I+(A<<14&4294967295|A>>>18),A=S+(I^b&(w^I))+C[4]+3889429448&4294967295,S=w+(A<<20&4294967295|A>>>12),A=b+(w^I&(S^w))+C[9]+568446438&4294967295,b=S+(A<<5&4294967295|A>>>27),A=I+(S^w&(b^S))+C[14]+3275163606&4294967295,I=b+(A<<9&4294967295|A>>>23),A=w+(b^S&(I^b))+C[3]+4107603335&4294967295,w=I+(A<<14&4294967295|A>>>18),A=S+(I^b&(w^I))+C[8]+1163531501&4294967295,S=w+(A<<20&4294967295|A>>>12),A=b+(w^I&(S^w))+C[13]+2850285829&4294967295,b=S+(A<<5&4294967295|A>>>27),A=I+(S^w&(b^S))+C[2]+4243563512&4294967295,I=b+(A<<9&4294967295|A>>>23),A=w+(b^S&(I^b))+C[7]+1735328473&4294967295,w=I+(A<<14&4294967295|A>>>18),A=S+(I^b&(w^I))+C[12]+2368359562&4294967295,S=w+(A<<20&4294967295|A>>>12),A=b+(S^w^I)+C[5]+4294588738&4294967295,b=S+(A<<4&4294967295|A>>>28),A=I+(b^S^w)+C[8]+2272392833&4294967295,I=b+(A<<11&4294967295|A>>>21),A=w+(I^b^S)+C[11]+1839030562&4294967295,w=I+(A<<16&4294967295|A>>>16),A=S+(w^I^b)+C[14]+4259657740&4294967295,S=w+(A<<23&4294967295|A>>>9),A=b+(S^w^I)+C[1]+2763975236&4294967295,b=S+(A<<4&4294967295|A>>>28),A=I+(b^S^w)+C[4]+1272893353&4294967295,I=b+(A<<11&4294967295|A>>>21),A=w+(I^b^S)+C[7]+4139469664&4294967295,w=I+(A<<16&4294967295|A>>>16),A=S+(w^I^b)+C[10]+3200236656&4294967295,S=w+(A<<23&4294967295|A>>>9),A=b+(S^w^I)+C[13]+681279174&4294967295,b=S+(A<<4&4294967295|A>>>28),A=I+(b^S^w)+C[0]+3936430074&4294967295,I=b+(A<<11&4294967295|A>>>21),A=w+(I^b^S)+C[3]+3572445317&4294967295,w=I+(A<<16&4294967295|A>>>16),A=S+(w^I^b)+C[6]+76029189&4294967295,S=w+(A<<23&4294967295|A>>>9),A=b+(S^w^I)+C[9]+3654602809&4294967295,b=S+(A<<4&4294967295|A>>>28),A=I+(b^S^w)+C[12]+3873151461&4294967295,I=b+(A<<11&4294967295|A>>>21),A=w+(I^b^S)+C[15]+530742520&4294967295,w=I+(A<<16&4294967295|A>>>16),A=S+(w^I^b)+C[2]+3299628645&4294967295,S=w+(A<<23&4294967295|A>>>9),A=b+(w^(S|~I))+C[0]+4096336452&4294967295,b=S+(A<<6&4294967295|A>>>26),A=I+(S^(b|~w))+C[7]+1126891415&4294967295,I=b+(A<<10&4294967295|A>>>22),A=w+(b^(I|~S))+C[14]+2878612391&4294967295,w=I+(A<<15&4294967295|A>>>17),A=S+(I^(w|~b))+C[5]+4237533241&4294967295,S=w+(A<<21&4294967295|A>>>11),A=b+(w^(S|~I))+C[12]+1700485571&4294967295,b=S+(A<<6&4294967295|A>>>26),A=I+(S^(b|~w))+C[3]+2399980690&4294967295,I=b+(A<<10&4294967295|A>>>22),A=w+(b^(I|~S))+C[10]+4293915773&4294967295,w=I+(A<<15&4294967295|A>>>17),A=S+(I^(w|~b))+C[1]+2240044497&4294967295,S=w+(A<<21&4294967295|A>>>11),A=b+(w^(S|~I))+C[8]+1873313359&4294967295,b=S+(A<<6&4294967295|A>>>26),A=I+(S^(b|~w))+C[15]+4264355552&4294967295,I=b+(A<<10&4294967295|A>>>22),A=w+(b^(I|~S))+C[6]+2734768916&4294967295,w=I+(A<<15&4294967295|A>>>17),A=S+(I^(w|~b))+C[13]+1309151649&4294967295,S=w+(A<<21&4294967295|A>>>11),A=b+(w^(S|~I))+C[4]+4149444226&4294967295,b=S+(A<<6&4294967295|A>>>26),A=I+(S^(b|~w))+C[11]+3174756917&4294967295,I=b+(A<<10&4294967295|A>>>22),A=w+(b^(I|~S))+C[2]+718787259&4294967295,w=I+(A<<15&4294967295|A>>>17),A=S+(I^(w|~b))+C[9]+3951481745&4294967295,E.g[0]=E.g[0]+b&4294967295,E.g[1]=E.g[1]+(w+(A<<21&4294967295|A>>>11))&4294967295,E.g[2]=E.g[2]+w&4294967295,E.g[3]=E.g[3]+I&4294967295}a.prototype.v=function(E,b){b===void 0&&(b=E.length);const S=b-this.blockSize,C=this.C;let w=this.h,I=0;for(;I<b;){if(w==0)for(;I<=S;)i(this,E,I),I+=this.blockSize;if(typeof E=="string"){for(;I<b;)if(C[w++]=E.charCodeAt(I++),w==this.blockSize){i(this,C),w=0;break}}else for(;I<b;)if(C[w++]=E[I++],w==this.blockSize){i(this,C),w=0;break}}this.h=w,this.o+=b},a.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var b=1;b<E.length-8;++b)E[b]=0;b=this.o*8;for(var S=E.length-8;S<E.length;++S)E[S]=b&255,b/=256;for(this.v(E),E=Array(16),b=0,S=0;S<4;++S)for(let C=0;C<32;C+=8)E[b++]=this.g[S]>>>C&255;return E};function r(E,b){var S=o;return Object.prototype.hasOwnProperty.call(S,E)?S[E]:S[E]=b(E)}function s(E,b){this.h=b;const S=[];let C=!0;for(let w=E.length-1;w>=0;w--){const I=E[w]|0;C&&I==b||(S[w]=I,C=!1)}this.g=S}var o={};function u(E){return-128<=E&&E<128?r(E,function(b){return new s([b|0],b<0?-1:0)}):new s([E|0],E<0?-1:0)}function c(E){if(isNaN(E)||!isFinite(E))return m;if(E<0)return D(c(-E));const b=[];let S=1;for(let C=0;E>=S;C++)b[C]=E/S|0,S*=4294967296;return new s(b,0)}function f(E,b){if(E.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(E.charAt(0)=="-")return D(f(E.substring(1),b));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=c(Math.pow(b,8));let C=m;for(let I=0;I<E.length;I+=8){var w=Math.min(8,E.length-I);const A=parseInt(E.substring(I,I+w),b);w<8?(w=c(Math.pow(b,w)),C=C.j(w).add(c(A))):(C=C.j(S),C=C.add(c(A)))}return C}var m=u(0),d=u(1),v=u(16777216);t=s.prototype,t.m=function(){if(O(this))return-D(this).m();let E=0,b=1;for(let S=0;S<this.g.length;S++){const C=this.i(S);E+=(C>=0?C:4294967296+C)*b,b*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(R(this))return"0";if(O(this))return"-"+D(this).toString(E);const b=c(Math.pow(E,6));var S=this;let C="";for(;;){const w=N(S,b).g;S=x(S,w.j(b));let I=((S.g.length>0?S.g[0]:S.h)>>>0).toString(E);if(S=w,R(S))return I+C;for(;I.length<6;)I="0"+I;C=I+C}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function R(E){if(E.h!=0)return!1;for(let b=0;b<E.g.length;b++)if(E.g[b]!=0)return!1;return!0}function O(E){return E.h==-1}t.l=function(E){return E=x(this,E),O(E)?-1:R(E)?0:1};function D(E){const b=E.g.length,S=[];for(let C=0;C<b;C++)S[C]=~E.g[C];return new s(S,~E.h).add(d)}t.abs=function(){return O(this)?D(this):this},t.add=function(E){const b=Math.max(this.g.length,E.g.length),S=[];let C=0;for(let w=0;w<=b;w++){let I=C+(this.i(w)&65535)+(E.i(w)&65535),A=(I>>>16)+(this.i(w)>>>16)+(E.i(w)>>>16);C=A>>>16,I&=65535,A&=65535,S[w]=A<<16|I}return new s(S,S[S.length-1]&-2147483648?-1:0)};function x(E,b){return E.add(D(b))}t.j=function(E){if(R(this)||R(E))return m;if(O(this))return O(E)?D(this).j(D(E)):D(D(this).j(E));if(O(E))return D(this.j(D(E)));if(this.l(v)<0&&E.l(v)<0)return c(this.m()*E.m());const b=this.g.length+E.g.length,S=[];for(var C=0;C<2*b;C++)S[C]=0;for(C=0;C<this.g.length;C++)for(let w=0;w<E.g.length;w++){const I=this.i(C)>>>16,A=this.i(C)&65535,fe=E.i(w)>>>16,mt=E.i(w)&65535;S[2*C+2*w]+=A*mt,y(S,2*C+2*w),S[2*C+2*w+1]+=I*mt,y(S,2*C+2*w+1),S[2*C+2*w+1]+=A*fe,y(S,2*C+2*w+1),S[2*C+2*w+2]+=I*fe,y(S,2*C+2*w+2)}for(E=0;E<b;E++)S[E]=S[2*E+1]<<16|S[2*E];for(E=b;E<2*b;E++)S[E]=0;return new s(S,0)};function y(E,b){for(;(E[b]&65535)!=E[b];)E[b+1]+=E[b]>>>16,E[b]&=65535,b++}function _(E,b){this.g=E,this.h=b}function N(E,b){if(R(b))throw Error("division by zero");if(R(E))return new _(m,m);if(O(E))return b=N(D(E),b),new _(D(b.g),D(b.h));if(O(b))return b=N(E,D(b)),new _(D(b.g),b.h);if(E.g.length>30){if(O(E)||O(b))throw Error("slowDivide_ only works with positive integers.");for(var S=d,C=b;C.l(E)<=0;)S=V(S),C=V(C);var w=k(S,1),I=k(C,1);for(C=k(C,2),S=k(S,2);!R(C);){var A=I.add(C);A.l(E)<=0&&(w=w.add(S),I=A),C=k(C,1),S=k(S,1)}return b=x(E,w.j(b)),new _(w,b)}for(w=m;E.l(b)>=0;){for(S=Math.max(1,Math.floor(E.m()/b.m())),C=Math.ceil(Math.log(S)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),I=c(S),A=I.j(b);O(A)||A.l(E)>0;)S-=C,I=c(S),A=I.j(b);R(I)&&(I=d),w=w.add(I),E=x(E,A)}return new _(w,E)}t.B=function(E){return N(this,E).h},t.and=function(E){const b=Math.max(this.g.length,E.g.length),S=[];for(let C=0;C<b;C++)S[C]=this.i(C)&E.i(C);return new s(S,this.h&E.h)},t.or=function(E){const b=Math.max(this.g.length,E.g.length),S=[];for(let C=0;C<b;C++)S[C]=this.i(C)|E.i(C);return new s(S,this.h|E.h)},t.xor=function(E){const b=Math.max(this.g.length,E.g.length),S=[];for(let C=0;C<b;C++)S[C]=this.i(C)^E.i(C);return new s(S,this.h^E.h)};function V(E){const b=E.g.length+1,S=[];for(let C=0;C<b;C++)S[C]=E.i(C)<<1|E.i(C-1)>>>31;return new s(S,E.h)}function k(E,b){const S=b>>5;b%=32;const C=E.g.length-S,w=[];for(let I=0;I<C;I++)w[I]=b>0?E.i(I+S)>>>b|E.i(I+S+1)<<32-b:E.i(I+S);return new s(w,E.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,JT=a,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=c,s.fromString=f,Wa=s}).apply(typeof Y0<"u"?Y0:typeof self<"u"?self:typeof window<"u"?window:{});var Wo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ZT,el,e1,xu,jd,t1,n1,a1;(function(){var t,e=Object.defineProperty;function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wo=="object"&&Wo];for(var h=0;h<l.length;++h){var g=l[h];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var a=n(this);function i(l,h){if(h)e:{var g=a;l=l.split(".");for(var T=0;T<l.length-1;T++){var j=l[T];if(!(j in g))break e;g=g[j]}l=l[l.length-1],T=g[l],h=h(T),h!=T&&h!=null&&e(g,l,{configurable:!0,writable:!0,value:h})}}i("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(l){return l||function(h){var g=[],T;for(T in h)Object.prototype.hasOwnProperty.call(h,T)&&g.push([T,h[T]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var r=r||{},s=this||self;function o(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function u(l,h,g){return l.call.apply(l.bind,arguments)}function c(l,h,g){return c=u,c.apply(null,arguments)}function f(l,h){var g=Array.prototype.slice.call(arguments,1);return function(){var T=g.slice();return T.push.apply(T,arguments),l.apply(this,T)}}function m(l,h){function g(){}g.prototype=h.prototype,l.Z=h.prototype,l.prototype=new g,l.prototype.constructor=l,l.Ob=function(T,j,L){for(var B=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)B[ee-2]=arguments[ee];return h.prototype[j].apply(T,B)}}var d=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function v(l){const h=l.length;if(h>0){const g=Array(h);for(let T=0;T<h;T++)g[T]=l[T];return g}return[]}function R(l,h){for(let T=1;T<arguments.length;T++){const j=arguments[T];var g=typeof j;if(g=g!="object"?g:j?Array.isArray(j)?"array":g:"null",g=="array"||g=="object"&&typeof j.length=="number"){g=l.length||0;const L=j.length||0;l.length=g+L;for(let B=0;B<L;B++)l[g+B]=j[B]}else l.push(j)}}class O{constructor(h,g){this.i=h,this.j=g,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function D(l){s.setTimeout(()=>{throw l},0)}function x(){var l=E;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class y{constructor(){this.h=this.g=null}add(h,g){const T=_.get();T.set(h,g),this.h?this.h.next=T:this.g=T,this.h=T}}var _=new O(()=>new N,l=>l.reset());class N{constructor(){this.next=this.g=this.h=null}set(h,g){this.h=h,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let V,k=!1,E=new y,b=()=>{const l=Promise.resolve(void 0);V=()=>{l.then(S)}};function S(){for(var l;l=x();){try{l.h.call(l.g)}catch(g){D(g)}var h=_;h.j(l),h.h<100&&(h.h++,l.next=h.g,h.g=l)}k=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function w(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}w.prototype.h=function(){this.defaultPrevented=!0};var I=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};s.addEventListener("test",g,h),s.removeEventListener("test",g,h)}catch{}return l}();function A(l){return/^[\s\xa0]*$/.test(l)}function fe(l,h){w.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,h)}m(fe,w),fe.prototype.init=function(l,h){const g=this.type=l.type,T=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget,h||(g=="mouseover"?h=l.fromElement:g=="mouseout"&&(h=l.toElement)),this.relatedTarget=h,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&fe.Z.h.call(this)},fe.prototype.h=function(){fe.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var mt="closure_listenable_"+(Math.random()*1e6|0),q=0;function W(l,h,g,T,j){this.listener=l,this.proxy=null,this.src=h,this.type=g,this.capture=!!T,this.ha=j,this.key=++q,this.da=this.fa=!1}function $(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function ue(l,h,g){for(const T in l)h.call(g,l[T],T,l)}function xe(l,h){for(const g in l)h.call(void 0,l[g],g,l)}function _t(l){const h={};for(const g in l)h[g]=l[g];return h}const bt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Et(l,h){let g,T;for(let j=1;j<arguments.length;j++){T=arguments[j];for(g in T)l[g]=T[g];for(let L=0;L<bt.length;L++)g=bt[L],Object.prototype.hasOwnProperty.call(T,g)&&(l[g]=T[g])}}function rt(l){this.src=l,this.g={},this.h=0}rt.prototype.add=function(l,h,g,T,j){const L=l.toString();l=this.g[L],l||(l=this.g[L]=[],this.h++);const B=gi(l,h,T,j);return B>-1?(h=l[B],g||(h.fa=!1)):(h=new W(h,this.src,L,!!T,j),h.fa=g,l.push(h)),h};function xn(l,h){const g=h.type;if(g in l.g){var T=l.g[g],j=Array.prototype.indexOf.call(T,h,void 0),L;(L=j>=0)&&Array.prototype.splice.call(T,j,1),L&&($(h),l.g[g].length==0&&(delete l.g[g],l.h--))}}function gi(l,h,g,T){for(let j=0;j<l.length;++j){const L=l[j];if(!L.da&&L.listener==h&&L.capture==!!g&&L.ha==T)return j}return-1}var qe="closure_lm_"+(Math.random()*1e6|0),Tt={};function bs(l,h,g,T,j){if(Array.isArray(h)){for(let L=0;L<h.length;L++)bs(l,h[L],g,T,j);return null}return g=ip(g),l&&l[mt]?l.J(h,g,o(T)?!!T.capture:!1,j):mS(l,h,g,!1,T,j)}function mS(l,h,g,T,j,L){if(!h)throw Error("Invalid event type");const B=o(j)?!!j.capture:!!j;let ee=mh(l);if(ee||(l[qe]=ee=new rt(l)),g=ee.add(h,g,T,B,L),g.proxy)return g;if(T=gS(),g.proxy=T,T.src=l,T.listener=g,l.addEventListener)I||(j=B),j===void 0&&(j=!1),l.addEventListener(h.toString(),T,j);else if(l.attachEvent)l.attachEvent(ap(h.toString()),T);else if(l.addListener&&l.removeListener)l.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return g}function gS(){function l(g){return h.call(l.src,l.listener,g)}const h=pS;return l}function np(l,h,g,T,j){if(Array.isArray(h))for(var L=0;L<h.length;L++)np(l,h[L],g,T,j);else T=o(T)?!!T.capture:!!T,g=ip(g),l&&l[mt]?(l=l.i,L=String(h).toString(),L in l.g&&(h=l.g[L],g=gi(h,g,T,j),g>-1&&($(h[g]),Array.prototype.splice.call(h,g,1),h.length==0&&(delete l.g[L],l.h--)))):l&&(l=mh(l))&&(h=l.g[h.toString()],l=-1,h&&(l=gi(h,g,T,j)),(g=l>-1?h[l]:null)&&dh(g))}function dh(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[mt])xn(h.i,l);else{var g=l.type,T=l.proxy;h.removeEventListener?h.removeEventListener(g,T,l.capture):h.detachEvent?h.detachEvent(ap(g),T):h.addListener&&h.removeListener&&h.removeListener(T),(g=mh(h))?(xn(g,l),g.h==0&&(g.src=null,h[qe]=null)):$(l)}}}function ap(l){return l in Tt?Tt[l]:Tt[l]="on"+l}function pS(l,h){if(l.da)l=!0;else{h=new fe(h,this);const g=l.listener,T=l.ha||l.src;l.fa&&dh(l),l=g.call(T,h)}return l}function mh(l){return l=l[qe],l instanceof rt?l:null}var gh="__closure_events_fn_"+(Math.random()*1e9>>>0);function ip(l){return typeof l=="function"?l:(l[gh]||(l[gh]=function(h){return l.handleEvent(h)}),l[gh])}function gt(){C.call(this),this.i=new rt(this),this.M=this,this.G=null}m(gt,C),gt.prototype[mt]=!0,gt.prototype.removeEventListener=function(l,h,g,T){np(this,l,h,g,T)};function xt(l,h){var g,T=l.G;if(T)for(g=[];T;T=T.G)g.push(T);if(l=l.M,T=h.type||h,typeof h=="string")h=new w(h,l);else if(h instanceof w)h.target=h.target||l;else{var j=h;h=new w(T,l),Et(h,j)}j=!0;let L,B;if(g)for(B=g.length-1;B>=0;B--)L=h.g=g[B],j=Eo(L,T,!0,h)&&j;if(L=h.g=l,j=Eo(L,T,!0,h)&&j,j=Eo(L,T,!1,h)&&j,g)for(B=0;B<g.length;B++)L=h.g=g[B],j=Eo(L,T,!1,h)&&j}gt.prototype.N=function(){if(gt.Z.N.call(this),this.i){var l=this.i;for(const h in l.g){const g=l.g[h];for(let T=0;T<g.length;T++)$(g[T]);delete l.g[h],l.h--}}this.G=null},gt.prototype.J=function(l,h,g,T){return this.i.add(String(l),h,!1,g,T)},gt.prototype.K=function(l,h,g,T){return this.i.add(String(l),h,!0,g,T)};function Eo(l,h,g,T){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();let j=!0;for(let L=0;L<h.length;++L){const B=h[L];if(B&&!B.da&&B.capture==g){const ee=B.listener,Ke=B.ha||B.src;B.fa&&xn(l.i,B),j=ee.call(Ke,T)!==!1&&j}}return j&&!T.defaultPrevented}function yS(l,h){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=c(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:s.setTimeout(l,h||0)}function rp(l){l.g=yS(()=>{l.g=null,l.i&&(l.i=!1,rp(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class vS extends C{constructor(h,g){super(),this.m=h,this.l=g,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:rp(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Es(l){C.call(this),this.h=l,this.g={}}m(Es,C);var sp=[];function lp(l){ue(l.g,function(h,g){this.g.hasOwnProperty(g)&&dh(h)},l),l.g={}}Es.prototype.N=function(){Es.Z.N.call(this),lp(this)},Es.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ph=s.JSON.stringify,_S=s.JSON.parse,bS=class{stringify(l){return s.JSON.stringify(l,void 0)}parse(l){return s.JSON.parse(l,void 0)}};function op(){}function up(){}var Ts={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function yh(){w.call(this,"d")}m(yh,w);function vh(){w.call(this,"c")}m(vh,w);var pi={},cp=null;function To(){return cp=cp||new gt}pi.Ia="serverreachability";function hp(l){w.call(this,pi.Ia,l)}m(hp,w);function xs(l){const h=To();xt(h,new hp(h))}pi.STAT_EVENT="statevent";function fp(l,h){w.call(this,pi.STAT_EVENT,l),this.stat=h}m(fp,w);function St(l){const h=To();xt(h,new fp(h,l))}pi.Ja="timingevent";function dp(l,h){w.call(this,pi.Ja,l),this.size=h}m(dp,w);function Ss(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){l()},h)}function ws(){this.g=!0}ws.prototype.ua=function(){this.g=!1};function ES(l,h,g,T,j,L){l.info(function(){if(l.g)if(L){var B="",ee=L.split("&");for(let _e=0;_e<ee.length;_e++){var Ke=ee[_e].split("=");if(Ke.length>1){const et=Ke[0];Ke=Ke[1];const wn=et.split("_");B=wn.length>=2&&wn[1]=="type"?B+(et+"="+Ke+"&"):B+(et+"=redacted&")}}}else B=null;else B=L;return"XMLHTTP REQ ("+T+") [attempt "+j+"]: "+h+`
`+g+`
`+B})}function TS(l,h,g,T,j,L,B){l.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+j+"]: "+h+`
`+g+`
`+L+" "+B})}function ir(l,h,g,T){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+SS(l,g)+(T?" "+T:"")})}function xS(l,h){l.info(function(){return"TIMEOUT: "+h})}ws.prototype.info=function(){};function SS(l,h){if(!l.g)return h;if(!h)return null;try{const L=JSON.parse(h);if(L){for(l=0;l<L.length;l++)if(Array.isArray(L[l])){var g=L[l];if(!(g.length<2)){var T=g[1];if(Array.isArray(T)&&!(T.length<1)){var j=T[0];if(j!="noop"&&j!="stop"&&j!="close")for(let B=1;B<T.length;B++)T[B]=""}}}}return ph(L)}catch{return h}}var xo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},mp={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},gp;function _h(){}m(_h,op),_h.prototype.g=function(){return new XMLHttpRequest},gp=new _h;function As(l){return encodeURIComponent(String(l))}function wS(l){var h=1;l=l.split(":");const g=[];for(;h>0&&l.length;)g.push(l.shift()),h--;return l.length&&g.push(l.join(":")),g}function va(l,h,g,T){this.j=l,this.i=h,this.l=g,this.S=T||1,this.V=new Es(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new pp}function pp(){this.i=null,this.g="",this.h=!1}var yp={},bh={};function Eh(l,h,g){l.M=1,l.A=wo(Sn(h)),l.u=g,l.R=!0,vp(l,null)}function vp(l,h){l.F=Date.now(),So(l),l.B=Sn(l.A);var g=l.B,T=l.S;Array.isArray(T)||(T=[String(T)]),Ip(g.i,"t",T),l.C=0,g=l.j.L,l.h=new pp,l.g=Xp(l.j,g?h:null,!l.u),l.P>0&&(l.O=new vS(c(l.Y,l,l.g),l.P)),h=l.V,g=l.g,T=l.ba;var j="readystatechange";Array.isArray(j)||(j&&(sp[0]=j.toString()),j=sp);for(let L=0;L<j.length;L++){const B=bs(g,j[L],T||h.handleEvent,!1,h.h||h);if(!B)break;h.g[B.key]=B}h=l.J?_t(l.J):{},l.u?(l.v||(l.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,h)):(l.v="GET",l.g.ea(l.B,l.v,null,h)),xs(),ES(l.i,l.v,l.B,l.l,l.S,l.u)}va.prototype.ba=function(l){l=l.target;const h=this.O;h&&Ea(l)==3?h.j():this.Y(l)},va.prototype.Y=function(l){try{if(l==this.g)e:{const ee=Ea(this.g),Ke=this.g.ya(),_e=this.g.ca();if(!(ee<3)&&(ee!=3||this.g&&(this.h.h||this.g.la()||Up(this.g)))){this.K||ee!=4||Ke==7||(Ke==8||_e<=0?xs(3):xs(2)),Th(this);var h=this.g.ca();this.X=h;var g=AS(this);if(this.o=h==200,TS(this.i,this.v,this.B,this.l,this.S,ee,h),this.o){if(this.U&&!this.L){t:{if(this.g){var T,j=this.g;if((T=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(T)){var L=T;break t}}L=null}if(l=L)ir(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,xh(this,l);else{this.o=!1,this.m=3,St(12),yi(this),Rs(this);break e}}if(this.R){l=!0;let et;for(;!this.K&&this.C<g.length;)if(et=RS(this,g),et==bh){ee==4&&(this.m=4,St(14),l=!1),ir(this.i,this.l,null,"[Incomplete Response]");break}else if(et==yp){this.m=4,St(15),ir(this.i,this.l,g,"[Invalid Chunk]"),l=!1;break}else ir(this.i,this.l,et,null),xh(this,et);if(_p(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ee!=4||g.length!=0||this.h.h||(this.m=1,St(16),l=!1),this.o=this.o&&l,!l)ir(this.i,this.l,g,"[Invalid Chunked Response]"),yi(this),Rs(this);else if(g.length>0&&!this.W){this.W=!0;var B=this.j;B.g==this&&B.aa&&!B.P&&(B.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),Ih(B),B.P=!0,St(11))}}else ir(this.i,this.l,g,null),xh(this,g);ee==4&&yi(this),this.o&&!this.K&&(ee==4?Gp(this.j,this):(this.o=!1,So(this)))}else BS(this.g),h==400&&g.indexOf("Unknown SID")>0?(this.m=3,St(12)):(this.m=0,St(13)),yi(this),Rs(this)}}}catch{}finally{}};function AS(l){if(!_p(l))return l.g.la();const h=Up(l.g);if(h==="")return"";let g="";const T=h.length,j=Ea(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return yi(l),Rs(l),"";l.h.i=new s.TextDecoder}for(let L=0;L<T;L++)l.h.h=!0,g+=l.h.i.decode(h[L],{stream:!(j&&L==T-1)});return h.length=0,l.h.g+=g,l.C=0,l.h.g}function _p(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function RS(l,h){var g=l.C,T=h.indexOf(`
`,g);return T==-1?bh:(g=Number(h.substring(g,T)),isNaN(g)?yp:(T+=1,T+g>h.length?bh:(h=h.slice(T,T+g),l.C=T+g,h)))}va.prototype.cancel=function(){this.K=!0,yi(this)};function So(l){l.T=Date.now()+l.H,bp(l,l.H)}function bp(l,h){if(l.D!=null)throw Error("WatchDog timer not null");l.D=Ss(c(l.aa,l),h)}function Th(l){l.D&&(s.clearTimeout(l.D),l.D=null)}va.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(xS(this.i,this.B),this.M!=2&&(xs(),St(17)),yi(this),this.m=2,Rs(this)):bp(this,this.T-l)};function Rs(l){l.j.I==0||l.K||Gp(l.j,l)}function yi(l){Th(l);var h=l.O;h&&typeof h.dispose=="function"&&h.dispose(),l.O=null,lp(l.V),l.g&&(h=l.g,l.g=null,h.abort(),h.dispose())}function xh(l,h){try{var g=l.j;if(g.I!=0&&(g.g==l||Sh(g.h,l))){if(!l.L&&Sh(g.h,l)&&g.I==3){try{var T=g.Ba.g.parse(h)}catch{T=null}if(Array.isArray(T)&&T.length==3){var j=T;if(j[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<l.F)Do(g),Co(g);else break e;Dh(g),St(18)}}else g.xa=j[1],0<g.xa-g.K&&j[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=Ss(c(g.Va,g),6e3));xp(g.h)<=1&&g.ta&&(g.ta=void 0)}else _i(g,11)}else if((l.L||g.g==l)&&Do(g),!A(h))for(j=g.Ba.g.parse(h),h=0;h<j.length;h++){let _e=j[h];const et=_e[0];if(!(et<=g.K))if(g.K=et,_e=_e[1],g.I==2)if(_e[0]=="c"){g.M=_e[1],g.ba=_e[2];const wn=_e[3];wn!=null&&(g.ka=wn,g.j.info("VER="+g.ka));const bi=_e[4];bi!=null&&(g.za=bi,g.j.info("SVER="+g.za));const Ta=_e[5];Ta!=null&&typeof Ta=="number"&&Ta>0&&(T=1.5*Ta,g.O=T,g.j.info("backChannelRequestTimeoutMs_="+T)),T=g;const xa=l.g;if(xa){const Oo=xa.g?xa.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oo){var L=T.h;L.g||Oo.indexOf("spdy")==-1&&Oo.indexOf("quic")==-1&&Oo.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(wh(L,L.h),L.h=null))}if(T.G){const Oh=xa.g?xa.g.getResponseHeader("X-HTTP-Session-Id"):null;Oh&&(T.wa=Oh,Se(T.J,T.G,Oh))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-l.F,g.j.info("Handshake RTT: "+g.T+"ms")),T=g;var B=l;if(T.na=$p(T,T.L?T.ba:null,T.W),B.L){Sp(T.h,B);var ee=B,Ke=T.O;Ke&&(ee.H=Ke),ee.D&&(Th(ee),So(ee)),T.g=B}else Hp(T);g.i.length>0&&No(g)}else _e[0]!="stop"&&_e[0]!="close"||_i(g,7);else g.I==3&&(_e[0]=="stop"||_e[0]=="close"?_e[0]=="stop"?_i(g,7):Nh(g):_e[0]!="noop"&&g.l&&g.l.qa(_e),g.A=0)}}xs(4)}catch{}}var CS=class{constructor(l,h){this.g=l,this.map=h}};function Ep(l){this.l=l||10,s.PerformanceNavigationTiming?(l=s.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Tp(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function xp(l){return l.h?1:l.g?l.g.size:0}function Sh(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function wh(l,h){l.g?l.g.add(h):l.h=h}function Sp(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}Ep.prototype.cancel=function(){if(this.i=wp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function wp(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const g of l.g.values())h=h.concat(g.G);return h}return v(l.i)}var Ap=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function NS(l,h){if(l){l=l.split("&");for(let g=0;g<l.length;g++){const T=l[g].indexOf("=");let j,L=null;T>=0?(j=l[g].substring(0,T),L=l[g].substring(T+1)):j=l[g],h(j,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function _a(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;l instanceof _a?(this.l=l.l,Cs(this,l.j),this.o=l.o,this.g=l.g,Ns(this,l.u),this.h=l.h,Ah(this,Op(l.i)),this.m=l.m):l&&(h=String(l).match(Ap))?(this.l=!1,Cs(this,h[1]||"",!0),this.o=Ds(h[2]||""),this.g=Ds(h[3]||"",!0),Ns(this,h[4]),this.h=Ds(h[5]||"",!0),Ah(this,h[6]||"",!0),this.m=Ds(h[7]||"")):(this.l=!1,this.i=new Os(null,this.l))}_a.prototype.toString=function(){const l=[];var h=this.j;h&&l.push(Is(h,Rp,!0),":");var g=this.g;return(g||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Is(h,Rp,!0),"@"),l.push(As(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&l.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(Is(g,g.charAt(0)=="/"?OS:IS,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",Is(g,VS)),l.join("")},_a.prototype.resolve=function(l){const h=Sn(this);let g=!!l.j;g?Cs(h,l.j):g=!!l.o,g?h.o=l.o:g=!!l.g,g?h.g=l.g:g=l.u!=null;var T=l.h;if(g)Ns(h,l.u);else if(g=!!l.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var j=h.h.lastIndexOf("/");j!=-1&&(T=h.h.slice(0,j+1)+T)}if(j=T,j==".."||j==".")T="";else if(j.indexOf("./")!=-1||j.indexOf("/.")!=-1){T=j.lastIndexOf("/",0)==0,j=j.split("/");const L=[];for(let B=0;B<j.length;){const ee=j[B++];ee=="."?T&&B==j.length&&L.push(""):ee==".."?((L.length>1||L.length==1&&L[0]!="")&&L.pop(),T&&B==j.length&&L.push("")):(L.push(ee),T=!0)}T=L.join("/")}else T=j}return g?h.h=T:g=l.i.toString()!=="",g?Ah(h,Op(l.i)):g=!!l.m,g&&(h.m=l.m),h};function Sn(l){return new _a(l)}function Cs(l,h,g){l.j=g?Ds(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Ns(l,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);l.u=h}else l.u=null}function Ah(l,h,g){h instanceof Os?(l.i=h,jS(l.i,l.l)):(g||(h=Is(h,MS)),l.i=new Os(h,l.l))}function Se(l,h,g){l.i.set(h,g)}function wo(l){return Se(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function Ds(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Is(l,h,g){return typeof l=="string"?(l=encodeURI(l).replace(h,DS),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function DS(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Rp=/[#\/\?@]/g,IS=/[#\?:]/g,OS=/[#\?]/g,MS=/[#\?@]/g,VS=/#/g;function Os(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function vi(l){l.g||(l.g=new Map,l.h=0,l.i&&NS(l.i,function(h,g){l.add(decodeURIComponent(h.replace(/\+/g," ")),g)}))}t=Os.prototype,t.add=function(l,h){vi(this),this.i=null,l=rr(this,l);let g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(h),this.h+=1,this};function Cp(l,h){vi(l),h=rr(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function Np(l,h){return vi(l),h=rr(l,h),l.g.has(h)}t.forEach=function(l,h){vi(this),this.g.forEach(function(g,T){g.forEach(function(j){l.call(h,j,T,this)},this)},this)};function Dp(l,h){vi(l);let g=[];if(typeof h=="string")Np(l,h)&&(g=g.concat(l.g.get(rr(l,h))));else for(l=Array.from(l.g.values()),h=0;h<l.length;h++)g=g.concat(l[h]);return g}t.set=function(l,h){return vi(this),this.i=null,l=rr(this,l),Np(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=Dp(this,l),l.length>0?String(l[0]):h):h};function Ip(l,h,g){Cp(l,h),g.length>0&&(l.i=null,l.g.set(rr(l,h),v(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(let T=0;T<h.length;T++){var g=h[T];const j=As(g);g=Dp(this,g);for(let L=0;L<g.length;L++){let B=j;g[L]!==""&&(B+="="+As(g[L])),l.push(B)}}return this.i=l.join("&")};function Op(l){const h=new Os;return h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),h}function rr(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function jS(l,h){h&&!l.j&&(vi(l),l.i=null,l.g.forEach(function(g,T){const j=T.toLowerCase();T!=j&&(Cp(this,T),Ip(this,j,g))},l)),l.j=h}function LS(l,h){const g=new ws;if(s.Image){const T=new Image;T.onload=f(ba,g,"TestLoadImage: loaded",!0,h,T),T.onerror=f(ba,g,"TestLoadImage: error",!1,h,T),T.onabort=f(ba,g,"TestLoadImage: abort",!1,h,T),T.ontimeout=f(ba,g,"TestLoadImage: timeout",!1,h,T),s.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=l}else h(!1)}function kS(l,h){const g=new ws,T=new AbortController,j=setTimeout(()=>{T.abort(),ba(g,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:T.signal}).then(L=>{clearTimeout(j),L.ok?ba(g,"TestPingServer: ok",!0,h):ba(g,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(j),ba(g,"TestPingServer: error",!1,h)})}function ba(l,h,g,T,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),T(g)}catch{}}function US(){this.g=new bS}function Rh(l){this.i=l.Sb||null,this.h=l.ab||!1}m(Rh,op),Rh.prototype.g=function(){return new Ao(this.i,this.h)};function Ao(l,h){gt.call(this),this.H=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(Ao,gt),t=Ao.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=h,this.readyState=1,Vs(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(h.body=l),(this.H||s).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ms(this)),this.readyState=0},t.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Vs(this)),this.g&&(this.readyState=3,Vs(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Mp(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function Mp(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}t.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Ms(this):Vs(this),this.readyState==3&&Mp(this)}},t.Oa=function(l){this.g&&(this.response=this.responseText=l,Ms(this))},t.Na=function(l){this.g&&(this.response=l,Ms(this))},t.ga=function(){this.g&&Ms(this)};function Ms(l){l.readyState=4,l.l=null,l.j=null,l.B=null,Vs(l)}t.setRequestHeader=function(l,h){this.A.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var g=h.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=h.next();return l.join(`\r
`)};function Vs(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Ao.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Vp(l){let h="";return ue(l,function(g,T){h+=T,h+=":",h+=g,h+=`\r
`}),h}function Ch(l,h,g){e:{for(T in g){var T=!1;break e}T=!0}T||(g=Vp(g),typeof l=="string"?g!=null&&As(g):Se(l,h,g))}function Me(l){gt.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(Me,gt);var PS=/^https?$/i,zS=["POST","PUT"];t=Me.prototype,t.Fa=function(l){this.H=l},t.ea=function(l,h,g,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():gp.g(),this.g.onreadystatechange=d(c(this.Ca,this));try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(L){jp(this,L);return}if(l=g||"",g=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var j in T)g.set(j,T[j]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const L of T.keys())g.set(L,T.get(L));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(g.keys()).find(L=>L.toLowerCase()=="content-type"),j=s.FormData&&l instanceof s.FormData,!(Array.prototype.indexOf.call(zS,h,void 0)>=0)||T||j||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,B]of g)this.g.setRequestHeader(L,B);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(L){jp(this,L)}};function jp(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.o=5,Lp(l),Ro(l)}function Lp(l){l.A||(l.A=!0,xt(l,"complete"),xt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,xt(this,"complete"),xt(this,"abort"),Ro(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ro(this,!0)),Me.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?kp(this):this.Xa())},t.Xa=function(){kp(this)};function kp(l){if(l.h&&typeof r<"u"){if(l.v&&Ea(l)==4)setTimeout(l.Ca.bind(l),0);else if(xt(l,"readystatechange"),Ea(l)==4){l.h=!1;try{const L=l.ca();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var g;if(!(g=h)){var T;if(T=L===0){let B=String(l.D).match(Ap)[1]||null;!B&&s.self&&s.self.location&&(B=s.self.location.protocol.slice(0,-1)),T=!PS.test(B?B.toLowerCase():"")}g=T}if(g)xt(l,"complete"),xt(l,"success");else{l.o=6;try{var j=Ea(l)>2?l.g.statusText:""}catch{j=""}l.l=j+" ["+l.ca()+"]",Lp(l)}}finally{Ro(l)}}}}function Ro(l,h){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const g=l.g;l.g=null,h||xt(l,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ea(l){return l.g?l.g.readyState:0}t.ca=function(){try{return Ea(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),_S(h)}};function Up(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function BS(l){const h={};l=(l.g&&Ea(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<l.length;T++){if(A(l[T]))continue;var g=wS(l[T]);const j=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const L=h[j]||[];h[j]=L,L.push(g)}xe(h,function(T){return T.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function js(l,h,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||h}function Pp(l){this.za=0,this.i=[],this.j=new ws,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=js("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=js("baseRetryDelayMs",5e3,l),this.Za=js("retryDelaySeedMs",1e4,l),this.Ta=js("forwardChannelMaxRetries",2,l),this.va=js("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new Ep(l&&l.concurrentRequestLimit),this.Ba=new US,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Pp.prototype,t.ka=8,t.I=1,t.connect=function(l,h,g,T){St(0),this.W=l,this.H=h||{},g&&T!==void 0&&(this.H.OSID=g,this.H.OAID=T),this.F=this.X,this.J=$p(this,null,this.W),No(this)};function Nh(l){if(zp(l),l.I==3){var h=l.V++,g=Sn(l.J);if(Se(g,"SID",l.M),Se(g,"RID",h),Se(g,"TYPE","terminate"),Ls(l,g),h=new va(l,l.j,h),h.M=2,h.A=wo(Sn(g)),g=!1,s.navigator&&s.navigator.sendBeacon)try{g=s.navigator.sendBeacon(h.A.toString(),"")}catch{}!g&&s.Image&&(new Image().src=h.A,g=!0),g||(h.g=Xp(h.j,null),h.g.ea(h.A)),h.F=Date.now(),So(h)}Qp(l)}function Co(l){l.g&&(Ih(l),l.g.cancel(),l.g=null)}function zp(l){Co(l),l.v&&(s.clearTimeout(l.v),l.v=null),Do(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&s.clearTimeout(l.m),l.m=null)}function No(l){if(!Tp(l.h)&&!l.m){l.m=!0;var h=l.Ea;V||b(),k||(V(),k=!0),E.add(h,l),l.D=0}}function qS(l,h){return xp(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=h.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=Ss(c(l.Ea,l,h),Yp(l,l.D)),l.D++,!0)}t.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const j=new va(this,this.j,l);let L=this.o;if(this.U&&(L?(L=_t(L),Et(L,this.U)):L=this.U),this.u!==null||this.R||(j.J=L,L=null),this.S)e:{for(var h=0,g=0;g<this.i.length;g++){t:{var T=this.i[g];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(h+=T,h>4096){h=g;break e}if(h===4096||g===this.i.length-1){h=g+1;break e}}h=1e3}else h=1e3;h=qp(this,j,h),g=Sn(this.J),Se(g,"RID",l),Se(g,"CVER",22),this.G&&Se(g,"X-HTTP-Session-Id",this.G),Ls(this,g),L&&(this.R?h="headers="+As(Vp(L))+"&"+h:this.u&&Ch(g,this.u,L)),wh(this.h,j),this.Ra&&Se(g,"TYPE","init"),this.S?(Se(g,"$req",h),Se(g,"SID","null"),j.U=!0,Eh(j,g,null)):Eh(j,g,h),this.I=2}}else this.I==3&&(l?Bp(this,l):this.i.length==0||Tp(this.h)||Bp(this))};function Bp(l,h){var g;h?g=h.l:g=l.V++;const T=Sn(l.J);Se(T,"SID",l.M),Se(T,"RID",g),Se(T,"AID",l.K),Ls(l,T),l.u&&l.o&&Ch(T,l.u,l.o),g=new va(l,l.j,g,l.D+1),l.u===null&&(g.J=l.o),h&&(l.i=h.G.concat(l.i)),h=qp(l,g,1e3),g.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),wh(l.h,g),Eh(g,T,h)}function Ls(l,h){l.H&&ue(l.H,function(g,T){Se(h,T,g)}),l.l&&ue({},function(g,T){Se(h,T,g)})}function qp(l,h,g){g=Math.min(l.i.length,g);const T=l.l?c(l.l.Ka,l.l,l):null;e:{var j=l.i;let ee=-1;for(;;){const Ke=["count="+g];ee==-1?g>0?(ee=j[0].g,Ke.push("ofs="+ee)):ee=0:Ke.push("ofs="+ee);let _e=!0;for(let et=0;et<g;et++){var L=j[et].g;const wn=j[et].map;if(L-=ee,L<0)ee=Math.max(0,j[et].g-100),_e=!1;else try{L="req"+L+"_"||"";try{var B=wn instanceof Map?wn:Object.entries(wn);for(const[bi,Ta]of B){let xa=Ta;o(Ta)&&(xa=ph(Ta)),Ke.push(L+bi+"="+encodeURIComponent(xa))}}catch(bi){throw Ke.push(L+"type="+encodeURIComponent("_badmap")),bi}}catch{T&&T(wn)}}if(_e){B=Ke.join("&");break e}}B=void 0}return l=l.i.splice(0,g),h.G=l,B}function Hp(l){if(!l.g&&!l.v){l.Y=1;var h=l.Da;V||b(),k||(V(),k=!0),E.add(h,l),l.A=0}}function Dh(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=Ss(c(l.Da,l),Yp(l,l.A)),l.A++,!0)}t.Da=function(){if(this.v=null,Fp(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=Ss(c(this.Wa,this),l)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,St(10),Co(this),Fp(this))};function Ih(l){l.B!=null&&(s.clearTimeout(l.B),l.B=null)}function Fp(l){l.g=new va(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var h=Sn(l.na);Se(h,"RID","rpc"),Se(h,"SID",l.M),Se(h,"AID",l.K),Se(h,"CI",l.F?"0":"1"),!l.F&&l.ia&&Se(h,"TO",l.ia),Se(h,"TYPE","xmlhttp"),Ls(l,h),l.u&&l.o&&Ch(h,l.u,l.o),l.O&&(l.g.H=l.O);var g=l.g;l=l.ba,g.M=1,g.A=wo(Sn(h)),g.u=null,g.R=!0,vp(g,l)}t.Va=function(){this.C!=null&&(this.C=null,Co(this),Dh(this),St(19))};function Do(l){l.C!=null&&(s.clearTimeout(l.C),l.C=null)}function Gp(l,h){var g=null;if(l.g==h){Do(l),Ih(l),l.g=null;var T=2}else if(Sh(l.h,h))g=h.G,Sp(l.h,h),T=1;else return;if(l.I!=0){if(h.o)if(T==1){g=h.u?h.u.length:0,h=Date.now()-h.F;var j=l.D;T=To(),xt(T,new dp(T,g)),No(l)}else Hp(l);else if(j=h.m,j==3||j==0&&h.X>0||!(T==1&&qS(l,h)||T==2&&Dh(l)))switch(g&&g.length>0&&(h=l.h,h.i=h.i.concat(g)),j){case 1:_i(l,5);break;case 4:_i(l,10);break;case 3:_i(l,6);break;default:_i(l,2)}}}function Yp(l,h){let g=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(g*=2),g*h}function _i(l,h){if(l.j.info("Error code "+h),h==2){var g=c(l.bb,l),T=l.Ua;const j=!T;T=new _a(T||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Cs(T,"https"),wo(T),j?LS(T.toString(),g):kS(T.toString(),g)}else St(2);l.I=0,l.l&&l.l.pa(h),Qp(l),zp(l)}t.bb=function(l){l?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function Qp(l){if(l.I=0,l.ja=[],l.l){const h=wp(l.h);(h.length!=0||l.i.length!=0)&&(R(l.ja,h),R(l.ja,l.i),l.h.i.length=0,v(l.i),l.i.length=0),l.l.oa()}}function $p(l,h,g){var T=g instanceof _a?Sn(g):new _a(g);if(T.g!="")h&&(T.g=h+"."+T.g),Ns(T,T.u);else{var j=s.location;T=j.protocol,h=h?h+"."+j.hostname:j.hostname,j=+j.port;const L=new _a(null);T&&Cs(L,T),h&&(L.g=h),j&&Ns(L,j),g&&(L.h=g),T=L}return g=l.G,h=l.wa,g&&h&&Se(T,g,h),Se(T,"VER",l.ka),Ls(l,T),T}function Xp(l,h,g){if(h&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Aa&&!l.ma?new Me(new Rh({ab:g})):new Me(l.ma),h.Fa(l.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kp(){}t=Kp.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Io(){}Io.prototype.g=function(l,h){return new qt(l,h)};function qt(l,h){gt.call(this),this.g=new Pp(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(l?l["X-WebChannel-Client-Profile"]=h.sa:l={"X-WebChannel-Client-Profile":h.sa}),this.g.U=l,(l=h&&h.Qb)&&!A(l)&&(this.g.u=l),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!A(h)&&(this.g.G=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new sr(this)}m(qt,gt),qt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},qt.prototype.close=function(){Nh(this.g)},qt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.v&&(g={},g.__data__=ph(l),l=g);h.i.push(new CS(h.Ya++,l)),h.I==3&&No(h)},qt.prototype.N=function(){this.g.l=null,delete this.j,Nh(this.g),delete this.g,qt.Z.N.call(this)};function Wp(l){yh.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const g in h){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}m(Wp,yh);function Jp(){vh.call(this),this.status=1}m(Jp,vh);function sr(l){this.g=l}m(sr,Kp),sr.prototype.ra=function(){xt(this.g,"a")},sr.prototype.qa=function(l){xt(this.g,new Wp(l))},sr.prototype.pa=function(l){xt(this.g,new Jp)},sr.prototype.oa=function(){xt(this.g,"b")},Io.prototype.createWebChannel=Io.prototype.g,qt.prototype.send=qt.prototype.o,qt.prototype.open=qt.prototype.m,qt.prototype.close=qt.prototype.close,a1=function(){return new Io},n1=function(){return To()},t1=pi,jd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},xo.NO_ERROR=0,xo.TIMEOUT=8,xo.HTTP_ERROR=6,xu=xo,mp.COMPLETE="complete",e1=mp,up.EventType=Ts,Ts.OPEN="a",Ts.CLOSE="b",Ts.ERROR="c",Ts.MESSAGE="d",gt.prototype.listen=gt.prototype.J,el=up,Me.prototype.listenOnce=Me.prototype.K,Me.prototype.getLastError=Me.prototype.Ha,Me.prototype.getLastErrorCode=Me.prototype.ya,Me.prototype.getStatus=Me.prototype.ca,Me.prototype.getResponseJson=Me.prototype.La,Me.prototype.getResponseText=Me.prototype.la,Me.prototype.send=Me.prototype.ea,Me.prototype.setWithCredentials=Me.prototype.Fa,ZT=Me}).apply(typeof Wo<"u"?Wo:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ms="12.9.0";function XN(t){ms=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi=new qT("@firebase/firestore");function dr(){return qi.logLevel}function F(t,...e){if(qi.logLevel<=oe.DEBUG){const n=e.map(og);qi.debug(`Firestore (${ms}): ${t}`,...n)}}function ha(t,...e){if(qi.logLevel<=oe.ERROR){const n=e.map(og);qi.error(`Firestore (${ms}): ${t}`,...n)}}function Hi(t,...e){if(qi.logLevel<=oe.WARN){const n=e.map(og);qi.warn(`Firestore (${ms}): ${t}`,...n)}}function og(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t,e,n){let a="Unexpected state";typeof e=="string"?a=e:n=e,i1(t,a,n)}function i1(t,e,n){let a=`FIRESTORE (${ms}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{a+=" CONTEXT: "+JSON.stringify(n)}catch{a+=" CONTEXT: "+n}throw ha(a),new Error(a)}function de(t,e,n,a){let i="Unexpected state";typeof n=="string"?i=n:a=n,t||i1(e,i,a)}function K(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends er{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class KN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yt.UNAUTHENTICATED))}shutdown(){}}class WN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class JN{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){de(this.o===void 0,42304);let a=this.i;const i=u=>this.i!==a?(a=this.i,n(u)):Promise.resolve();let r=new aa;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new aa,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const u=r;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},o=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>o(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?o(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new aa)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(a=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(de(typeof a.accessToken=="string",31837,{l:a}),new r1(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string",2055,{h:e}),new yt(e)}}class ZN{constructor(e,n,a){this.P=e,this.T=n,this.I=a,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class eD{constructor(e,n,a){this.P=e,this.T=n,this.I=a}getToken(){return Promise.resolve(new ZN(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Q0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tD{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,YT(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){de(this.o===void 0,3512);const a=r=>{r.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const s=r.token!==this.m;return this.m=r.token,F("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>a(r))};const i=r=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(r=>i(r)),setTimeout(()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?i(r):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Q0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(de(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Q0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let a=0;a<t;a++)n[a]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const i=nD(40);for(let r=0;r<i.length;++r)a.length<20&&i[r]<n&&(a+=e.charAt(i[r]%62))}return a}}function ae(t,e){return t<e?-1:t>e?1:0}function Ld(t,e){const n=Math.min(t.length,e.length);for(let a=0;a<n;a++){const i=t.charAt(a),r=e.charAt(a);if(i!==r)return Sf(i)===Sf(r)?ae(i,r):Sf(i)?1:-1}return ae(t.length,e.length)}const aD=55296,iD=57343;function Sf(t){const e=t.charCodeAt(0);return e>=aD&&e<=iD}function Jr(t,e,n){return t.length===e.length&&t.every((a,i)=>n(a,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0="__name__";class An{constructor(e,n,a){n===void 0?n=0:n>e.length&&Y(637,{offset:n,range:e.length}),a===void 0?a=e.length-n:a>e.length-n&&Y(1746,{length:a,range:e.length-n}),this.segments=e,this.offset=n,this.len=a}get length(){return this.len}isEqual(e){return An.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof An?e.forEach(a=>{n.push(a)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,a=this.limit();n<a;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const a=Math.min(e.length,n.length);for(let i=0;i<a;i++){const r=An.compareSegments(e.get(i),n.get(i));if(r!==0)return r}return ae(e.length,n.length)}static compareSegments(e,n){const a=An.isNumericId(e),i=An.isNumericId(n);return a&&!i?-1:!a&&i?1:a&&i?An.extractNumericId(e).compare(An.extractNumericId(n)):Ld(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Wa.fromString(e.substring(4,e.length-2))}}class Ee extends An{construct(e,n,a){return new Ee(e,n,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const a of e){if(a.indexOf("//")>=0)throw new H(U.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);n.push(...a.split("/").filter(i=>i.length>0))}return new Ee(n)}static emptyPath(){return new Ee([])}}const rD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ct extends An{construct(e,n,a){return new ct(e,n,a)}static isValidIdentifier(e){return rD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ct.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$0}static keyField(){return new ct([$0])}static fromServerFormat(e){const n=[];let a="",i=0;const r=()=>{if(a.length===0)throw new H(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(a),a=""};let s=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new H(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new H(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=u,i+=2}else o==="`"?(s=!s,i++):o!=="."||s?(a+=o,i++):(r(),i++)}if(r(),s)throw new H(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ct(n)}static emptyPath(){return new ct([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(Ee.fromString(e))}static fromName(e){return new G(Ee.fromString(e).popFirst(5))}static empty(){return new G(Ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ee.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ee.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new Ee(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(t,e,n){if(!n)throw new H(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function sD(t,e,n,a){if(e===!0&&a===!0)throw new H(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function X0(t){if(!G.isDocumentKey(t))throw new H(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function K0(t){if(G.isDocumentKey(t))throw new H(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function l1(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Fc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(a){return a.constructor?a.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y(12329,{type:typeof t})}function kt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Fc(t);throw new H(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function lD(t,e){if(e<=0)throw new H(U.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(t,e){const n={typeString:t};return e&&(n.value=e),n}function fo(t,e){if(!l1(t))throw new H(U.INVALID_ARGUMENT,"JSON must be an object");let n;for(const a in e)if(e[a]){const i=e[a].typeString,r="value"in e[a]?{value:e[a].value}:void 0;if(!(a in t)){n=`JSON missing required field: '${a}'`;break}const s=t[a];if(i&&typeof s!==i){n=`JSON field '${a}' must be a ${i}.`;break}if(r!==void 0&&s!==r.value){n=`Expected '${a}' field to equal '${r.value}'`;break}}if(n)throw new H(U.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0=-62135596800,J0=1e6;class Re{static now(){return Re.fromMillis(Date.now())}static fromDate(e){return Re.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),a=Math.floor((e-1e3*n)*J0);return new Re(n,a)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<W0)throw new H(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/J0}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Re._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(fo(e,Re._jsonSchema))return new Re(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-W0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Re._jsonSchemaVersion="firestore/timestamp/1.0",Re._jsonSchema={type:Xe("string",Re._jsonSchemaVersion),seconds:Xe("number"),nanoseconds:Xe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{static fromTimestamp(e){return new X(e)}static min(){return new X(new Re(0,0))}static max(){return new X(new Re(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bl=-1;function oD(t,e){const n=t.toTimestamp().seconds,a=t.toTimestamp().nanoseconds+1,i=X.fromTimestamp(a===1e9?new Re(n+1,0):new Re(n,a));return new ai(i,G.empty(),e)}function uD(t){return new ai(t.readTime,t.key,Bl)}class ai{constructor(e,n,a){this.readTime=e,this.documentKey=n,this.largestBatchId=a}static min(){return new ai(X.min(),G.empty(),Bl)}static max(){return new ai(X.max(),G.empty(),Bl)}}function cD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gs(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==hD)throw t;F("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((a,i)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(a,i)},this.catchCallback=r=>{this.wrapFailure(n,r).next(a,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,a)=>{n(e)})}static reject(e){return new z((n,a)=>{a(e)})}static waitFor(e){return new z((n,a)=>{let i=0,r=0,s=!1;e.forEach(o=>{++i,o.next(()=>{++r,s&&r===i&&n()},u=>a(u))}),s=!0,r===i&&n()})}static or(e){let n=z.resolve(!1);for(const a of e)n=n.next(i=>i?z.resolve(i):a());return n}static forEach(e,n){const a=[];return e.forEach((i,r)=>{a.push(n.call(this,i,r))}),this.waitFor(a)}static mapArray(e,n){return new z((a,i)=>{const r=e.length,s=new Array(r);let o=0;for(let u=0;u<r;u++){const c=u;n(e[c]).next(f=>{s[c]=f,++o,o===r&&a(s)},f=>i(f))}})}static doWhile(e,n){return new z((a,i)=>{const r=()=>{e()===!0?n().next(()=>{r()},i):a()};r()})}}function dD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ps(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>n.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Gc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg=-1;function Yc(t){return t==null}function uc(t){return t===0&&1/t==-1/0}function mD(t){return typeof t=="number"&&Number.isInteger(t)&&!uc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1="";function gD(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Z0(e)),e=pD(t.get(n),e);return Z0(e)}function pD(t,e){let n=e;const a=t.length;for(let i=0;i<a;i++){const r=t.charAt(i);switch(r){case"\0":n+="";break;case o1:n+="";break;default:n+=r}}return n}function Z0(t){return t+o1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function hi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function u1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e,n){this.comparator=e,this.root=n||lt.EMPTY}insert(e,n){return new Oe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,lt.BLACK,null,null))}remove(e){return new Oe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,lt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return n.value;a<0?n=n.left:a>0&&(n=n.right)}return null}indexOf(e){let n=0,a=this.root;for(;!a.isEmpty();){const i=this.comparator(e,a.key);if(i===0)return n+a.left.size;i<0?a=a.left:(n+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,a)=>(e(n,a),!1))}toString(){const e=[];return this.inorderTraversal((n,a)=>(e.push(`${n}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jo(this.root,e,this.comparator,!0)}}class Jo{constructor(e,n,a,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=n?a(e.key,n):1,n&&i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class lt{constructor(e,n,a,i,r){this.key=e,this.value=n,this.color=a??lt.RED,this.left=i??lt.EMPTY,this.right=r??lt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,a,i,r){return new lt(e??this.key,n??this.value,a??this.color,i??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,a){let i=this;const r=a(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,n,a),null):r===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,a)),i.fixUp()}removeMin(){if(this.left.isEmpty())return lt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let a,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return lt.EMPTY;a=i.right.min(),i=i.copy(a.key,a.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Y(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Y(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Y(27949);return e+(this.isRed()?0:1)}}lt.EMPTY=null,lt.RED=!0,lt.BLACK=!1;lt.EMPTY=new class{constructor(){this.size=0}get key(){throw Y(57766)}get value(){throw Y(16141)}get color(){throw Y(16727)}get left(){throw Y(29726)}get right(){throw Y(36894)}copy(e,n,a,i,r){return this}insert(e,n,a){return new lt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,a)=>(e(n),!1))}forEachInRange(e,n){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const i=a.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let a;for(a=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new tv(this.data.getIterator())}getIteratorFrom(e){return new tv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(a=>{n=n.add(a)}),n}isEqual(e){if(!(e instanceof Je)||this.size!==e.size)return!1;const n=this.data.getIterator(),a=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=a.getNext().key;if(this.comparator(i,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Je(this.comparator);return n.data=e,n}}class tv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.fields=e,e.sort(ct.comparator)}static empty(){return new Qt([])}unionWith(e){let n=new Je(ct.comparator);for(const a of this.fields)n=n.add(a);for(const a of e)n=n.add(a);return new Qt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Jr(this.fields,e.fields,(n,a)=>n.isEqual(a))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new c1("Invalid base64 string: "+r):r}}(e);return new dt(n)}static fromUint8Array(e){const n=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(e);return new dt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const a=new Uint8Array(n.length);for(let i=0;i<n.length;i++)a[i]=n.charCodeAt(i);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dt.EMPTY_BYTE_STRING=new dt("");const yD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ii(t){if(de(!!t,39018),typeof t=="string"){let e=0;const n=yD.exec(t);if(de(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const a=new Date(t);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Pe(t.seconds),nanos:Pe(t.nanos)}}function Pe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ri(t){return typeof t=="string"?dt.fromBase64String(t):dt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1="server_timestamp",f1="__type__",d1="__previous_value__",m1="__local_write_time__";function hg(t){var n,a;return((a=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[f1])==null?void 0:a.stringValue)===h1}function Qc(t){const e=t.mapValue.fields[d1];return hg(e)?Qc(e):e}function ql(t){const e=ii(t.mapValue.fields[m1].timestampValue);return new Re(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e,n,a,i,r,s,o,u,c,f,m){this.databaseId=e,this.appId=n,this.persistenceKey=a,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=f,this.apiKey=m}}const cc="(default)";class Hl{constructor(e,n){this.projectId=e,this.database=n||cc}static empty(){return new Hl("","")}get isDefaultDatabase(){return this.database===cc}isEqual(e){return e instanceof Hl&&e.projectId===this.projectId&&e.database===this.database}}function _D(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new H(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hl(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1="__type__",bD="__max__",Zo={mapValue:{}},p1="__vector__",hc="value";function si(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?hg(t)?4:TD(t)?9007199254740991:ED(t)?10:11:Y(28295,{value:t})}function kn(t,e){if(t===e)return!0;const n=si(t);if(n!==si(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ql(t).isEqual(ql(e));case 3:return function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=ii(i.timestampValue),o=ii(r.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,r){return ri(i.bytesValue).isEqual(ri(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,r){return Pe(i.geoPointValue.latitude)===Pe(r.geoPointValue.latitude)&&Pe(i.geoPointValue.longitude)===Pe(r.geoPointValue.longitude)}(t,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Pe(i.integerValue)===Pe(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=Pe(i.doubleValue),o=Pe(r.doubleValue);return s===o?uc(s)===uc(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return Jr(t.arrayValue.values||[],e.arrayValue.values||[],kn);case 10:case 11:return function(i,r){const s=i.mapValue.fields||{},o=r.mapValue.fields||{};if(ev(s)!==ev(o))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(o[u]===void 0||!kn(s[u],o[u])))return!1;return!0}(t,e);default:return Y(52216,{left:t})}}function Fl(t,e){return(t.values||[]).find(n=>kn(n,e))!==void 0}function Zr(t,e){if(t===e)return 0;const n=si(t),a=si(e);if(n!==a)return ae(n,a);switch(n){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return function(r,s){const o=Pe(r.integerValue||r.doubleValue),u=Pe(s.integerValue||s.doubleValue);return o<u?-1:o>u?1:o===u?0:isNaN(o)?isNaN(u)?0:-1:1}(t,e);case 3:return nv(t.timestampValue,e.timestampValue);case 4:return nv(ql(t),ql(e));case 5:return Ld(t.stringValue,e.stringValue);case 6:return function(r,s){const o=ri(r),u=ri(s);return o.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(r,s){const o=r.split("/"),u=s.split("/");for(let c=0;c<o.length&&c<u.length;c++){const f=ae(o[c],u[c]);if(f!==0)return f}return ae(o.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,s){const o=ae(Pe(r.latitude),Pe(s.latitude));return o!==0?o:ae(Pe(r.longitude),Pe(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return av(t.arrayValue,e.arrayValue);case 10:return function(r,s){var d,v,R,O;const o=r.fields||{},u=s.fields||{},c=(d=o[hc])==null?void 0:d.arrayValue,f=(v=u[hc])==null?void 0:v.arrayValue,m=ae(((R=c==null?void 0:c.values)==null?void 0:R.length)||0,((O=f==null?void 0:f.values)==null?void 0:O.length)||0);return m!==0?m:av(c,f)}(t.mapValue,e.mapValue);case 11:return function(r,s){if(r===Zo.mapValue&&s===Zo.mapValue)return 0;if(r===Zo.mapValue)return 1;if(s===Zo.mapValue)return-1;const o=r.fields||{},u=Object.keys(o),c=s.fields||{},f=Object.keys(c);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const d=Ld(u[m],f[m]);if(d!==0)return d;const v=Zr(o[u[m]],c[f[m]]);if(v!==0)return v}return ae(u.length,f.length)}(t.mapValue,e.mapValue);default:throw Y(23264,{he:n})}}function nv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ae(t,e);const n=ii(t),a=ii(e),i=ae(n.seconds,a.seconds);return i!==0?i:ae(n.nanos,a.nanos)}function av(t,e){const n=t.values||[],a=e.values||[];for(let i=0;i<n.length&&i<a.length;++i){const r=Zr(n[i],a[i]);if(r)return r}return ae(n.length,a.length)}function es(t){return kd(t)}function kd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const a=ii(n);return`time(${a.seconds},${a.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ri(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let a="[",i=!0;for(const r of n.values||[])i?i=!1:a+=",",a+=kd(r);return a+"]"}(t.arrayValue):"mapValue"in t?function(n){const a=Object.keys(n.fields||{}).sort();let i="{",r=!0;for(const s of a)r?r=!1:i+=",",i+=`${s}:${kd(n.fields[s])}`;return i+"}"}(t.mapValue):Y(61005,{value:t})}function Su(t){switch(si(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Qc(t);return e?16+Su(e):16;case 5:return 2*t.stringValue.length;case 6:return ri(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(a){return(a.values||[]).reduce((i,r)=>i+Su(r),0)}(t.arrayValue);case 10:case 11:return function(a){let i=0;return hi(a.fields,(r,s)=>{i+=r.length+Su(s)}),i}(t.mapValue);default:throw Y(13486,{value:t})}}function iv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ud(t){return!!t&&"integerValue"in t}function fg(t){return!!t&&"arrayValue"in t}function rv(t){return!!t&&"nullValue"in t}function sv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wu(t){return!!t&&"mapValue"in t}function ED(t){var n,a;return((a=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[g1])==null?void 0:a.stringValue)===p1}function _l(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return hi(t.mapValue.fields,(n,a)=>e.mapValue.fields[n]=_l(a)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=_l(t.arrayValue.values[n]);return e}return{...t}}function TD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===bD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.value=e}static empty(){return new jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let a=0;a<e.length-1;++a)if(n=(n.mapValue.fields||{})[e.get(a)],!wu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=_l(n)}setAll(e){let n=ct.emptyPath(),a={},i=[];e.forEach((s,o)=>{if(!n.isImmediateParentOf(o)){const u=this.getFieldsMap(n);this.applyChanges(u,a,i),a={},i=[],n=o.popLast()}s?a[o.lastSegment()]=_l(s):i.push(o.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,a,i)}delete(e){const n=this.field(e.popLast());wu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return kn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let a=0;a<e.length;++a){let i=n.mapValue.fields[e.get(a)];wu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(a)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,a){hi(n,(i,r)=>e[i]=r);for(const i of a)delete e[i]}clone(){return new jt(_l(this.value))}}function y1(t){const e=[];return hi(t.fields,(n,a)=>{const i=new ct([n]);if(wu(a)){const r=y1(a.mapValue).fields;if(r.length===0)e.push(i);else for(const s of r)e.push(i.child(s))}else e.push(i)}),new Qt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,n,a,i,r,s,o){this.key=e,this.documentType=n,this.version=a,this.readTime=i,this.createTime=r,this.data=s,this.documentState=o}static newInvalidDocument(e){return new vt(e,0,X.min(),X.min(),X.min(),jt.empty(),0)}static newFoundDocument(e,n,a,i){return new vt(e,1,n,X.min(),a,i,0)}static newNoDocument(e,n){return new vt(e,2,n,X.min(),X.min(),jt.empty(),0)}static newUnknownDocument(e,n){return new vt(e,3,n,X.min(),X.min(),jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,n){this.position=e,this.inclusive=n}}function lv(t,e,n){let a=0;for(let i=0;i<t.position.length;i++){const r=e[i],s=t.position[i];if(r.field.isKeyField()?a=G.comparator(G.fromName(s.referenceValue),n.key):a=Zr(s,n.data.field(r.field)),r.dir==="desc"&&(a*=-1),a!==0)break}return a}function ov(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!kn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n="asc"){this.field=e,this.dir=n}}function xD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{}class Qe extends v1{constructor(e,n,a){super(),this.field=e,this.op=n,this.value=a}static create(e,n,a){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,a):new wD(e,n,a):n==="array-contains"?new CD(e,a):n==="in"?new ND(e,a):n==="not-in"?new DD(e,a):n==="array-contains-any"?new ID(e,a):new Qe(e,n,a)}static createKeyFieldInFilter(e,n,a){return n==="in"?new AD(e,a):new RD(e,a)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Zr(n,this.value)):n!==null&&si(this.value)===si(n)&&this.matchesComparison(Zr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class En extends v1{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new En(e,n)}matches(e){return _1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function _1(t){return t.op==="and"}function b1(t){return SD(t)&&_1(t)}function SD(t){for(const e of t.filters)if(e instanceof En)return!1;return!0}function Pd(t){if(t instanceof Qe)return t.field.canonicalString()+t.op.toString()+es(t.value);if(b1(t))return t.filters.map(e=>Pd(e)).join(",");{const e=t.filters.map(n=>Pd(n)).join(",");return`${t.op}(${e})`}}function E1(t,e){return t instanceof Qe?function(a,i){return i instanceof Qe&&a.op===i.op&&a.field.isEqual(i.field)&&kn(a.value,i.value)}(t,e):t instanceof En?function(a,i){return i instanceof En&&a.op===i.op&&a.filters.length===i.filters.length?a.filters.reduce((r,s,o)=>r&&E1(s,i.filters[o]),!0):!1}(t,e):void Y(19439)}function T1(t){return t instanceof Qe?function(n){return`${n.field.canonicalString()} ${n.op} ${es(n.value)}`}(t):t instanceof En?function(n){return n.op.toString()+" {"+n.getFilters().map(T1).join(" ,")+"}"}(t):"Filter"}class wD extends Qe{constructor(e,n,a){super(e,n,a),this.key=G.fromName(a.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class AD extends Qe{constructor(e,n){super(e,"in",n),this.keys=x1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class RD extends Qe{constructor(e,n){super(e,"not-in",n),this.keys=x1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function x1(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(a=>G.fromName(a.referenceValue))}class CD extends Qe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return fg(n)&&Fl(n.arrayValue,this.value)}}class ND extends Qe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Fl(this.value.arrayValue,n)}}class DD extends Qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Fl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Fl(this.value.arrayValue,n)}}class ID extends Qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!fg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(a=>Fl(this.value.arrayValue,a))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e,n=null,a=[],i=[],r=null,s=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=a,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.Te=null}}function uv(t,e=null,n=[],a=[],i=null,r=null,s=null){return new OD(t,e,n,a,i,r,s)}function dg(t){const e=K(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(a=>Pd(a)).join(","),n+="|ob:",n+=e.orderBy.map(a=>function(r){return r.field.canonicalString()+r.dir}(a)).join(","),Yc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(a=>es(a)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(a=>es(a)).join(",")),e.Te=n}return e.Te}function mg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!xD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!E1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ov(t.startAt,e.startAt)&&ov(t.endAt,e.endAt)}function zd(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,n=null,a=[],i=[],r=null,s="F",o=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=a,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=u,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function MD(t,e,n,a,i,r,s,o){return new ys(t,e,n,a,i,r,s,o)}function $c(t){return new ys(t)}function cv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function VD(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function S1(t){return t.collectionGroup!==null}function bl(t){const e=K(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const r of e.explicitOrderBy)e.Ie.push(r),n.add(r.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let o=new Je(ct.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||e.Ie.push(new Gl(r,a))}),n.has(ct.keyField().canonicalString())||e.Ie.push(new Gl(ct.keyField(),a))}return e.Ie}function Vn(t){const e=K(t);return e.Ee||(e.Ee=jD(e,bl(t))),e.Ee}function jD(t,e){if(t.limitType==="F")return uv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const r=i.dir==="desc"?"asc":"desc";return new Gl(i.field,r)});const n=t.endAt?new fc(t.endAt.position,t.endAt.inclusive):null,a=t.startAt?new fc(t.startAt.position,t.startAt.inclusive):null;return uv(t.path,t.collectionGroup,e,t.filters,t.limit,n,a)}}function Bd(t,e){const n=t.filters.concat([e]);return new ys(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function LD(t,e){const n=t.explicitOrderBy.concat([e]);return new ys(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function dc(t,e,n){return new ys(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Xc(t,e){return mg(Vn(t),Vn(e))&&t.limitType===e.limitType}function w1(t){return`${dg(Vn(t))}|lt:${t.limitType}`}function mr(t){return`Query(target=${function(n){let a=n.path.canonicalString();return n.collectionGroup!==null&&(a+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(a+=`, filters: [${n.filters.map(i=>T1(i)).join(", ")}]`),Yc(n.limit)||(a+=", limit: "+n.limit),n.orderBy.length>0&&(a+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(a+=", startAt: ",a+=n.startAt.inclusive?"b:":"a:",a+=n.startAt.position.map(i=>es(i)).join(",")),n.endAt&&(a+=", endAt: ",a+=n.endAt.inclusive?"a:":"b:",a+=n.endAt.position.map(i=>es(i)).join(",")),`Target(${a})`}(Vn(t))}; limitType=${t.limitType})`}function Kc(t,e){return e.isFoundDocument()&&function(a,i){const r=i.key.path;return a.collectionGroup!==null?i.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(r):G.isDocumentKey(a.path)?a.path.isEqual(r):a.path.isImmediateParentOf(r)}(t,e)&&function(a,i){for(const r of bl(a))if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0}(t,e)&&function(a,i){for(const r of a.filters)if(!r.matches(i))return!1;return!0}(t,e)&&function(a,i){return!(a.startAt&&!function(s,o,u){const c=lv(s,o,u);return s.inclusive?c<=0:c<0}(a.startAt,bl(a),i)||a.endAt&&!function(s,o,u){const c=lv(s,o,u);return s.inclusive?c>=0:c>0}(a.endAt,bl(a),i))}(t,e)}function kD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function A1(t){return(e,n)=>{let a=!1;for(const i of bl(t)){const r=UD(i,e,n);if(r!==0)return r;a=a||i.field.isKeyField()}return 0}}function UD(t,e,n){const a=t.field.isKeyField()?G.comparator(e.key,n.key):function(r,s,o){const u=s.data.field(r),c=o.data.field(r);return u!==null&&c!==null?Zr(u,c):Y(42886)}(t.field,e,n);switch(t.dir){case"asc":return a;case"desc":return-1*a;default:return Y(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a!==void 0){for(const[i,r]of a)if(this.equalsFn(i,e))return r}}has(e){return this.get(e)!==void 0}set(e,n){const a=this.mapKeyFn(e),i=this.inner[a];if(i===void 0)return this.inner[a]=[[e,n]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return void(i[r]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return!1;for(let i=0;i<a.length;i++)if(this.equalsFn(a[i][0],e))return a.length===1?delete this.inner[n]:a.splice(i,1),this.innerSize--,!0;return!1}forEach(e){hi(this.inner,(n,a)=>{for(const[i,r]of a)e(i,r)})}isEmpty(){return u1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD=new Oe(G.comparator);function fa(){return PD}const R1=new Oe(G.comparator);function tl(...t){let e=R1;for(const n of t)e=e.insert(n.key,n);return e}function C1(t){let e=R1;return t.forEach((n,a)=>e=e.insert(n,a.overlayedDocument)),e}function Ci(){return El()}function N1(){return El()}function El(){return new tr(t=>t.toString(),(t,e)=>t.isEqual(e))}const zD=new Oe(G.comparator),BD=new Je(G.comparator);function ie(...t){let e=BD;for(const n of t)e=e.add(n);return e}const qD=new Je(ae);function HD(){return qD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uc(e)?"-0":e}}function D1(t){return{integerValue:""+t}}function FD(t,e){return mD(e)?D1(e):gg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(){this._=void 0}}function GD(t,e,n){return t instanceof Yl?function(i,r){const s={fields:{[f1]:{stringValue:h1},[m1]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&hg(r)&&(r=Qc(r)),r&&(s.fields[d1]=r),{mapValue:s}}(n,e):t instanceof Ql?O1(t,e):t instanceof $l?M1(t,e):function(i,r){const s=I1(i,r),o=hv(s)+hv(i.Ae);return Ud(s)&&Ud(i.Ae)?D1(o):gg(i.serializer,o)}(t,e)}function YD(t,e,n){return t instanceof Ql?O1(t,e):t instanceof $l?M1(t,e):n}function I1(t,e){return t instanceof mc?function(a){return Ud(a)||function(r){return!!r&&"doubleValue"in r}(a)}(e)?e:{integerValue:0}:null}class Yl extends Wc{}class Ql extends Wc{constructor(e){super(),this.elements=e}}function O1(t,e){const n=V1(e);for(const a of t.elements)n.some(i=>kn(i,a))||n.push(a);return{arrayValue:{values:n}}}class $l extends Wc{constructor(e){super(),this.elements=e}}function M1(t,e){let n=V1(e);for(const a of t.elements)n=n.filter(i=>!kn(i,a));return{arrayValue:{values:n}}}class mc extends Wc{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function hv(t){return Pe(t.integerValue||t.doubleValue)}function V1(t){return fg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e,n){this.field=e,this.transform=n}}function $D(t,e){return t.field.isEqual(e.field)&&function(a,i){return a instanceof Ql&&i instanceof Ql||a instanceof $l&&i instanceof $l?Jr(a.elements,i.elements,kn):a instanceof mc&&i instanceof mc?kn(a.Ae,i.Ae):a instanceof Yl&&i instanceof Yl}(t.transform,e.transform)}class XD{constructor(e,n){this.version=e,this.transformResults=n}}class mn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new mn}static exists(e){return new mn(void 0,e)}static updateTime(e){return new mn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Au(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Jc{}function j1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new pg(t.key,mn.none()):new mo(t.key,t.data,mn.none());{const n=t.data,a=jt.empty();let i=new Je(ct.comparator);for(let r of e.fields)if(!i.has(r)){let s=n.field(r);s===null&&r.length>1&&(r=r.popLast(),s=n.field(r)),s===null?a.delete(r):a.set(r,s),i=i.add(r)}return new fi(t.key,a,new Qt(i.toArray()),mn.none())}}function KD(t,e,n){t instanceof mo?function(i,r,s){const o=i.value.clone(),u=dv(i.fieldTransforms,r,s.transformResults);o.setAll(u),r.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof fi?function(i,r,s){if(!Au(i.precondition,r))return void r.convertToUnknownDocument(s.version);const o=dv(i.fieldTransforms,r,s.transformResults),u=r.data;u.setAll(L1(i)),u.setAll(o),r.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,r,s){r.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Tl(t,e,n,a){return t instanceof mo?function(r,s,o,u){if(!Au(r.precondition,s))return o;const c=r.value.clone(),f=mv(r.fieldTransforms,u,s);return c.setAll(f),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,n,a):t instanceof fi?function(r,s,o,u){if(!Au(r.precondition,s))return o;const c=mv(r.fieldTransforms,u,s),f=s.data;return f.setAll(L1(r)),f.setAll(c),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),o===null?null:o.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(m=>m.field))}(t,e,n,a):function(r,s,o){return Au(r.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,n)}function WD(t,e){let n=null;for(const a of t.fieldTransforms){const i=e.data.field(a.field),r=I1(a.transform,i||null);r!=null&&(n===null&&(n=jt.empty()),n.set(a.field,r))}return n||null}function fv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(a,i){return a===void 0&&i===void 0||!(!a||!i)&&Jr(a,i,(r,s)=>$D(r,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class mo extends Jc{constructor(e,n,a,i=[]){super(),this.key=e,this.value=n,this.precondition=a,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class fi extends Jc{constructor(e,n,a,i,r=[]){super(),this.key=e,this.data=n,this.fieldMask=a,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function L1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const a=t.data.field(n);e.set(n,a)}}),e}function dv(t,e,n){const a=new Map;de(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){const r=t[i],s=r.transform,o=e.data.field(r.field);a.set(r.field,YD(s,o,n[i]))}return a}function mv(t,e,n){const a=new Map;for(const i of t){const r=i.transform,s=n.data.field(i.field);a.set(i.field,GD(r,s,e))}return a}class pg extends Jc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class JD extends Jc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e,n,a,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=a,this.mutations=i}applyToRemoteDocument(e,n){const a=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const r=this.mutations[i];r.key.isEqual(e.key)&&KD(r,e,a[i])}}applyToLocalView(e,n){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(n=Tl(a,e,n,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(n=Tl(a,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const a=N1();return this.mutations.forEach(i=>{const r=e.get(i.key),s=r.overlayedDocument;let o=this.applyToLocalView(s,r.mutatedFields);o=n.has(i.key)?null:o;const u=j1(s,o);u!==null&&a.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(X.min())}),a}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ie())}isEqual(e){return this.batchId===e.batchId&&Jr(this.mutations,e.mutations,(n,a)=>fv(n,a))&&Jr(this.baseMutations,e.baseMutations,(n,a)=>fv(n,a))}}class yg{constructor(e,n,a,i){this.batch=e,this.commitVersion=n,this.mutationResults=a,this.docVersions=i}static from(e,n,a){de(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let i=function(){return zD}();const r=e.mutations;for(let s=0;s<r.length;s++)i=i.insert(r[s].key,a[s].version);return new yg(e,n,a,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He,le;function n4(t){switch(t){case U.OK:return Y(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return Y(15467,{code:t})}}function k1(t){if(t===void 0)return ha("GRPC error has no .code"),U.UNKNOWN;switch(t){case He.OK:return U.OK;case He.CANCELLED:return U.CANCELLED;case He.UNKNOWN:return U.UNKNOWN;case He.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case He.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case He.INTERNAL:return U.INTERNAL;case He.UNAVAILABLE:return U.UNAVAILABLE;case He.UNAUTHENTICATED:return U.UNAUTHENTICATED;case He.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case He.NOT_FOUND:return U.NOT_FOUND;case He.ALREADY_EXISTS:return U.ALREADY_EXISTS;case He.PERMISSION_DENIED:return U.PERMISSION_DENIED;case He.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case He.ABORTED:return U.ABORTED;case He.OUT_OF_RANGE:return U.OUT_OF_RANGE;case He.UNIMPLEMENTED:return U.UNIMPLEMENTED;case He.DATA_LOSS:return U.DATA_LOSS;default:return Y(39323,{code:t})}}(le=He||(He={}))[le.OK=0]="OK",le[le.CANCELLED=1]="CANCELLED",le[le.UNKNOWN=2]="UNKNOWN",le[le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",le[le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",le[le.NOT_FOUND=5]="NOT_FOUND",le[le.ALREADY_EXISTS=6]="ALREADY_EXISTS",le[le.PERMISSION_DENIED=7]="PERMISSION_DENIED",le[le.UNAUTHENTICATED=16]="UNAUTHENTICATED",le[le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",le[le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",le[le.ABORTED=10]="ABORTED",le[le.OUT_OF_RANGE=11]="OUT_OF_RANGE",le[le.UNIMPLEMENTED=12]="UNIMPLEMENTED",le[le.INTERNAL=13]="INTERNAL",le[le.UNAVAILABLE=14]="UNAVAILABLE",le[le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i4=new Wa([4294967295,4294967295],0);function gv(t){const e=a4().encode(t),n=new JT;return n.update(e),new Uint8Array(n.digest())}function pv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),a=e.getUint32(4,!0),i=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new Wa([n,a],0),new Wa([i,r],0)]}class vg{constructor(e,n,a){if(this.bitmap=e,this.padding=n,this.hashCount=a,n<0||n>=8)throw new nl(`Invalid padding: ${n}`);if(a<0)throw new nl(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new nl(`Invalid hash count: ${a}`);if(e.length===0&&n!==0)throw new nl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Wa.fromNumber(this.ge)}ye(e,n,a){let i=e.add(n.multiply(Wa.fromNumber(a)));return i.compare(i4)===1&&(i=new Wa([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=gv(e),[a,i]=pv(n);for(let r=0;r<this.hashCount;r++){const s=this.ye(a,i,r);if(!this.we(s))return!1}return!0}static create(e,n,a){const i=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),s=new vg(r,i,n);return a.forEach(o=>s.insert(o)),s}insert(e){if(this.ge===0)return;const n=gv(e),[a,i]=pv(n);for(let r=0;r<this.hashCount;r++){const s=this.ye(a,i,r);this.be(s)}}be(e){const n=Math.floor(e/8),a=e%8;this.bitmap[n]|=1<<a}}class nl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n,a,i,r){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=a,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,n,a){const i=new Map;return i.set(e,go.createSynthesizedTargetChangeForCurrentChange(e,n,a)),new Zc(X.min(),i,new Oe(ae),fa(),ie())}}class go{constructor(e,n,a,i,r){this.resumeToken=e,this.current=n,this.addedDocuments=a,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,n,a){return new go(a,n,ie(),ie(),ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,n,a,i){this.Se=e,this.removedTargetIds=n,this.key=a,this.De=i}}class U1{constructor(e,n){this.targetId=e,this.Ce=n}}class P1{constructor(e,n,a=dt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=a,this.cause=i}}class yv{constructor(){this.ve=0,this.Fe=vv(),this.Me=dt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ie(),n=ie(),a=ie();return this.Fe.forEach((i,r)=>{switch(r){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:a=a.add(i);break;default:Y(38017,{changeType:r})}}),new go(this.Me,this.xe,e,n,a)}Ke(){this.Oe=!1,this.Fe=vv()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,de(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class r4{constructor(e){this.Ge=e,this.ze=new Map,this.je=fa(),this.He=eu(),this.Je=eu(),this.Ze=new Oe(ae)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const a=this.nt(n);switch(e.state){case 0:this.rt(n)&&a.Le(e.resumeToken);break;case 1:a.We(),a.Ne||a.Ke(),a.Le(e.resumeToken);break;case 2:a.We(),a.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(a.Qe(),a.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),a.Le(e.resumeToken));break;default:Y(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((a,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,a=e.Ce.count,i=this.ot(n);if(i){const r=i.target;if(zd(r))if(a===0){const s=new G(r.path);this.et(n,s,vt.newNoDocument(s,X.min()))}else de(a===1,20013,{expectedCount:a});else{const s=this._t(n);if(s!==a){const o=this.ut(e),u=o?this.ct(o,e,s):1;if(u!==0){this.it(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:a="",padding:i=0},hashCount:r=0}=n;let s,o;try{s=ri(a).toUint8Array()}catch(u){if(u instanceof c1)return Hi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{o=new vg(s,i,r)}catch(u){return Hi(u instanceof nl?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return o.ge===0?null:o}ct(e,n,a){return n.Ce.count===a-this.Pt(e,n.targetId)?0:2}Pt(e,n){const a=this.Ge.getRemoteKeysForTarget(n);let i=0;return a.forEach(r=>{const s=this.Ge.ht(),o=`projects/${s.projectId}/databases/${s.database}/documents/${r.path.canonicalString()}`;e.mightContain(o)||(this.et(n,r,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((r,s)=>{const o=this.ot(s);if(o){if(r.current&&zd(o.target)){const u=new G(o.target.path);this.It(u).has(s)||this.Et(s,u)||this.et(s,u,vt.newNoDocument(u,e))}r.Be&&(n.set(s,r.ke()),r.Ke())}});let a=ie();this.Je.forEach((r,s)=>{let o=!0;s.forEachWhile(u=>{const c=this.ot(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(a=a.add(r))}),this.je.forEach((r,s)=>s.setReadTime(e));const i=new Zc(e,n,this.Ze,this.je,a);return this.je=fa(),this.He=eu(),this.Je=eu(),this.Ze=new Oe(ae),i}Ye(e,n){if(!this.rt(e))return;const a=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,a),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,a){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),a&&(this.je=this.je.insert(n,a))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new yv,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Je(ae),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Je(ae),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||F("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new yv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function eu(){return new Oe(G.comparator)}function vv(){return new Oe(G.comparator)}const s4={asc:"ASCENDING",desc:"DESCENDING"},l4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},o4={and:"AND",or:"OR"};class u4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function qd(t,e){return t.useProto3Json||Yc(e)?e:{value:e}}function gc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function z1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function c4(t,e){return gc(t,e.toTimestamp())}function jn(t){return de(!!t,49232),X.fromTimestamp(function(n){const a=ii(n);return new Re(a.seconds,a.nanos)}(t))}function _g(t,e){return Hd(t,e).canonicalString()}function Hd(t,e){const n=function(i){return new Ee(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function B1(t){const e=Ee.fromString(t);return de(Y1(e),10190,{key:e.toString()}),e}function Fd(t,e){return _g(t.databaseId,e.path)}function wf(t,e){const n=B1(e);if(n.get(1)!==t.databaseId.projectId)throw new H(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(H1(n))}function q1(t,e){return _g(t.databaseId,e)}function h4(t){const e=B1(t);return e.length===4?Ee.emptyPath():H1(e)}function Gd(t){return new Ee(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function H1(t){return de(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function _v(t,e,n){return{name:Fd(t,e),fields:n.value.mapValue.fields}}function f4(t,e){let n;if("targetChange"in e){e.targetChange;const a=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Y(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],r=function(c,f){return c.useProto3Json?(de(f===void 0||typeof f=="string",58123),dt.fromBase64String(f||"")):(de(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),dt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,o=s&&function(c){const f=c.code===void 0?U.UNKNOWN:k1(c.code);return new H(f,c.message||"")}(s);n=new P1(a,i,r,o||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const i=wf(t,a.document.name),r=jn(a.document.updateTime),s=a.document.createTime?jn(a.document.createTime):X.min(),o=new jt({mapValue:{fields:a.document.fields}}),u=vt.newFoundDocument(i,r,s,o),c=a.targetIds||[],f=a.removedTargetIds||[];n=new Ru(c,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const i=wf(t,a.document),r=a.readTime?jn(a.readTime):X.min(),s=vt.newNoDocument(i,r),o=a.removedTargetIds||[];n=new Ru([],o,s.key,s)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const i=wf(t,a.document),r=a.removedTargetIds||[];n=new Ru([],r,i,null)}else{if(!("filter"in e))return Y(11601,{Vt:e});{e.filter;const a=e.filter;a.targetId;const{count:i=0,unchangedNames:r}=a,s=new t4(i,r),o=a.targetId;n=new U1(o,s)}}return n}function d4(t,e){let n;if(e instanceof mo)n={update:_v(t,e.key,e.value)};else if(e instanceof pg)n={delete:Fd(t,e.key)};else if(e instanceof fi)n={update:_v(t,e.key,e.data),updateMask:T4(e.fieldMask)};else{if(!(e instanceof JD))return Y(16599,{dt:e.type});n={verify:Fd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(a=>function(r,s){const o=s.transform;if(o instanceof Yl)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Ql)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof $l)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof mc)return{fieldPath:s.field.canonicalString(),increment:o.Ae};throw Y(20930,{transform:s.transform})}(0,a))),e.precondition.isNone||(n.currentDocument=function(i,r){return r.updateTime!==void 0?{updateTime:c4(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:Y(27497)}(t,e.precondition)),n}function m4(t,e){return t&&t.length>0?(de(e!==void 0,14353),t.map(n=>function(i,r){let s=i.updateTime?jn(i.updateTime):jn(r);return s.isEqual(X.min())&&(s=jn(r)),new XD(s,i.transformResults||[])}(n,e))):[]}function g4(t,e){return{documents:[q1(t,e.path)]}}function p4(t,e){const n={structuredQuery:{}},a=e.path;let i;e.collectionGroup!==null?(i=a,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=a.popLast(),n.structuredQuery.from=[{collectionId:a.lastSegment()}]),n.parent=q1(t,i);const r=function(c){if(c.length!==0)return G1(En.create(c,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const s=function(c){if(c.length!==0)return c.map(f=>function(d){return{field:gr(d.field),direction:_4(d.dir)}}(f))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=qd(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:i}}function y4(t){let e=h4(t.parent);const n=t.structuredQuery,a=n.from?n.from.length:0;let i=null;if(a>0){de(a===1,65062);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let r=[];n.where&&(r=function(m){const d=F1(m);return d instanceof En&&b1(d)?d.getFilters():[d]}(n.where));let s=[];n.orderBy&&(s=function(m){return m.map(d=>function(R){return new Gl(pr(R.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(d))}(n.orderBy));let o=null;n.limit&&(o=function(m){let d;return d=typeof m=="object"?m.value:m,Yc(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(m){const d=!!m.before,v=m.values||[];return new fc(v,d)}(n.startAt));let c=null;return n.endAt&&(c=function(m){const d=!m.before,v=m.values||[];return new fc(v,d)}(n.endAt)),MD(e,i,s,r,o,"F",u,c)}function v4(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function F1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const a=pr(n.unaryFilter.field);return Qe.create(a,"==",{doubleValue:NaN});case"IS_NULL":const i=pr(n.unaryFilter.field);return Qe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=pr(n.unaryFilter.field);return Qe.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=pr(n.unaryFilter.field);return Qe.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Y(61313);default:return Y(60726)}}(t):t.fieldFilter!==void 0?function(n){return Qe.create(pr(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Y(58110);default:return Y(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return En.create(n.compositeFilter.filters.map(a=>F1(a)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Y(1026)}}(n.compositeFilter.op))}(t):Y(30097,{filter:t})}function _4(t){return s4[t]}function b4(t){return l4[t]}function E4(t){return o4[t]}function gr(t){return{fieldPath:t.canonicalString()}}function pr(t){return ct.fromServerFormat(t.fieldPath)}function G1(t){return t instanceof Qe?function(n){if(n.op==="=="){if(sv(n.value))return{unaryFilter:{field:gr(n.field),op:"IS_NAN"}};if(rv(n.value))return{unaryFilter:{field:gr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(sv(n.value))return{unaryFilter:{field:gr(n.field),op:"IS_NOT_NAN"}};if(rv(n.value))return{unaryFilter:{field:gr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gr(n.field),op:b4(n.op),value:n.value}}}(t):t instanceof En?function(n){const a=n.getFilters().map(i=>G1(i));return a.length===1?a[0]:{compositeFilter:{op:E4(n.op),filters:a}}}(t):Y(54877,{filter:t})}function T4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Y1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function Q1(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e,n,a,i,r=X.min(),s=X.min(),o=dt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=a,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=u}withSequenceNumber(e){return new Ua(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ua(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ua(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ua(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e){this.yt=e}}function S4(t){const e=y4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?dc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(){this.Sn=new A4}addToCollectionParentIndex(e,n){return this.Sn.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(ai.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(ai.min())}updateCollectionGroup(e,n,a){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class A4{constructor(){this.index={}}add(e){const n=e.lastSegment(),a=e.popLast(),i=this.index[n]||new Je(Ee.comparator),r=!i.has(a);return this.index[n]=i.add(a),r}has(e){const n=e.lastSegment(),a=e.popLast(),i=this.index[n];return i&&i.has(a)}getEntries(e){return(this.index[e]||new Je(Ee.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$1=41943040;class Vt{static withCacheSize(e){return new Vt(e,Vt.DEFAULT_COLLECTION_PERCENTILE,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vt.DEFAULT_COLLECTION_PERCENTILE=10,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vt.DEFAULT=new Vt($1,Vt.DEFAULT_COLLECTION_PERCENTILE,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vt.DISABLED=new Vt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new ts(0)}static ar(){return new ts(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev="LruGarbageCollector",R4=1048576;function Tv([t,e],[n,a]){const i=ae(t,n);return i===0?ae(e,a):i}class C4{constructor(e){this.Pr=e,this.buffer=new Je(Tv),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const a=this.buffer.last();Tv(n,a)<0&&(this.buffer=this.buffer.delete(a).add(n))}}get maxValue(){return this.buffer.last()[0]}}class N4{constructor(e,n,a){this.garbageCollector=e,this.asyncQueue=n,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){F(Ev,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ps(n)?F(Ev,"Ignoring IndexedDB error during garbage collection: ",n):await gs(n)}await this.Ar(3e5)})}}class D4{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(a=>Math.floor(n/100*a))}nthSequenceNumber(e,n){if(n===0)return z.resolve(Gc.ce);const a=new C4(n);return this.Vr.forEachTarget(e,i=>a.Er(i.sequenceNumber)).next(()=>this.Vr.mr(e,i=>a.Er(i))).next(()=>a.maxValue)}removeTargets(e,n,a){return this.Vr.removeTargets(e,n,a)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(bv)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bv):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let a,i,r,s,o,u,c;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,s=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(a=m,o=Date.now(),this.removeTargets(e,a,n))).next(m=>(r=m,u=Date.now(),this.removeOrphanedDocuments(e,a))).next(m=>(c=Date.now(),dr()<=oe.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(o-s)+`ms
	Removed ${r} targets in `+(u-o)+`ms
	Removed ${m} documents in `+(c-u)+`ms
Total Duration: ${c-f}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:m})))}}function I4(t,e){return new D4(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(){this.changes=new tr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,vt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const a=this.changes.get(n);return a!==void 0?z.resolve(a):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e,n,a,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=a,this.indexManager=i}getDocument(e,n){let a=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(a=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(a!==null&&Tl(a.mutation,i,Qt.empty(),Re.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(a=>this.getLocalViewOfDocuments(e,a,ie()).next(()=>a))}getLocalViewOfDocuments(e,n,a=ie()){const i=Ci();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,a).next(r=>{let s=tl();return r.forEach((o,u)=>{s=s.insert(o,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const a=Ci();return this.populateOverlays(e,a,n).next(()=>this.computeViews(e,n,a,ie()))}populateOverlays(e,n,a){const i=[];return a.forEach(r=>{n.has(r)||i.push(r)}),this.documentOverlayCache.getOverlays(e,i).next(r=>{r.forEach((s,o)=>{n.set(s,o)})})}computeViews(e,n,a,i){let r=fa();const s=El(),o=function(){return El()}();return n.forEach((u,c)=>{const f=a.get(c.key);i.has(c.key)&&(f===void 0||f.mutation instanceof fi)?r=r.insert(c.key,c):f!==void 0?(s.set(c.key,f.mutation.getFieldMask()),Tl(f.mutation,c,f.mutation.getFieldMask(),Re.now())):s.set(c.key,Qt.empty())}),this.recalculateAndSaveOverlays(e,r).next(u=>(u.forEach((c,f)=>s.set(c,f)),n.forEach((c,f)=>o.set(c,new M4(f,s.get(c)??null))),o))}recalculateAndSaveOverlays(e,n){const a=El();let i=new Oe((s,o)=>s-o),r=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const o of s)o.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let f=a.get(u)||Qt.empty();f=o.applyToLocalView(c,f),a.set(u,f);const m=(i.get(o.batchId)||ie()).add(u);i=i.insert(o.batchId,m)})}).next(()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const u=o.getNext(),c=u.key,f=u.value,m=N1();f.forEach(d=>{if(!r.has(d)){const v=j1(n.get(d),a.get(d));v!==null&&m.set(d,v),r=r.add(d)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,m))}return z.waitFor(s)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,n,a,i){return VD(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):S1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,a,i):this.getDocumentsMatchingCollectionQuery(e,n,a,i)}getNextDocuments(e,n,a,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,a,i).next(r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,a.largestBatchId,i-r.size):z.resolve(Ci());let o=Bl,u=r;return s.next(c=>z.forEach(c,(f,m)=>(o<m.largestBatchId&&(o=m.largestBatchId),r.get(f)?z.resolve():this.remoteDocumentCache.getEntry(e,f).next(d=>{u=u.insert(f,d)}))).next(()=>this.populateOverlays(e,c,r)).next(()=>this.computeViews(e,u,c,ie())).next(f=>({batchId:o,changes:C1(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(a=>{let i=tl();return a.isFoundDocument()&&(i=i.insert(a.key,a)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,a,i){const r=n.collectionGroup;let s=tl();return this.indexManager.getCollectionParents(e,r).next(o=>z.forEach(o,u=>{const c=function(m,d){return new ys(d,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(r));return this.getDocumentsMatchingCollectionQuery(e,c,a,i).next(f=>{f.forEach((m,d)=>{s=s.insert(m,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,a,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,a.largestBatchId).next(s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,a,r,i))).next(s=>{r.forEach((u,c)=>{const f=c.getKey();s.get(f)===null&&(s=s.insert(f,vt.newInvalidDocument(f)))});let o=tl();return s.forEach((u,c)=>{const f=r.get(u);f!==void 0&&Tl(f.mutation,c,Qt.empty(),Re.now()),Kc(n,c)&&(o=o.insert(u,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return z.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:jn(i.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(i){return{name:i.name,query:S4(i.bundledQuery),readTime:jn(i.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(){this.overlays=new Oe(G.comparator),this.Lr=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const a=Ci();return z.forEach(n,i=>this.getOverlay(e,i).next(r=>{r!==null&&a.set(i,r)})).next(()=>a)}saveOverlays(e,n,a){return a.forEach((i,r)=>{this.bt(e,n,r)}),z.resolve()}removeOverlaysForBatchId(e,n,a){const i=this.Lr.get(a);return i!==void 0&&(i.forEach(r=>this.overlays=this.overlays.remove(r)),this.Lr.delete(a)),z.resolve()}getOverlaysForCollection(e,n,a){const i=Ci(),r=n.length+1,s=new G(n.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const u=o.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===r&&u.largestBatchId>a&&i.set(u.getKey(),u)}return z.resolve(i)}getOverlaysForCollectionGroup(e,n,a,i){let r=new Oe((c,f)=>c-f);const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>a){let f=r.get(c.largestBatchId);f===null&&(f=Ci(),r=r.insert(c.largestBatchId,f)),f.set(c.getKey(),c)}}const o=Ci(),u=r.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,f)=>o.set(c,f)),!(o.size()>=i)););return z.resolve(o)}bt(e,n,a){const i=this.overlays.get(a.key);if(i!==null){const s=this.Lr.get(i.largestBatchId).delete(a.key);this.Lr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(a.key,new e4(n,a));let r=this.Lr.get(n);r===void 0&&(r=ie(),this.Lr.set(n,r)),this.Lr.set(n,r.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(){this.sessionToken=dt.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(){this.kr=new Je(tt.Kr),this.qr=new Je(tt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const a=new tt(e,n);this.kr=this.kr.add(a),this.qr=this.qr.add(a)}$r(e,n){e.forEach(a=>this.addReference(a,n))}removeReference(e,n){this.Wr(new tt(e,n))}Qr(e,n){e.forEach(a=>this.removeReference(a,n))}Gr(e){const n=new G(new Ee([])),a=new tt(n,e),i=new tt(n,e+1),r=[];return this.qr.forEachInRange([a,i],s=>{this.Wr(s),r.push(s.key)}),r}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new G(new Ee([])),a=new tt(n,e),i=new tt(n,e+1);let r=ie();return this.qr.forEachInRange([a,i],s=>{r=r.add(s.key)}),r}containsKey(e){const n=new tt(e,0),a=this.kr.firstAfterOrEqual(n);return a!==null&&e.isEqual(a.key)}}class tt{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return G.comparator(e.key,n.key)||ae(e.Hr,n.Hr)}static Ur(e,n){return ae(e.Hr,n.Hr)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Je(tt.Kr)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,a,i){const r=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new ZD(r,n,a,i);this.mutationQueue.push(s);for(const o of i)this.Jr=this.Jr.add(new tt(o.key,r)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return z.resolve(s)}lookupMutationBatch(e,n){return z.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const a=n+1,i=this.Xr(a),r=i<0?0:i;return z.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?cg:this.Yn-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const a=new tt(n,0),i=new tt(n,Number.POSITIVE_INFINITY),r=[];return this.Jr.forEachInRange([a,i],s=>{const o=this.Zr(s.Hr);r.push(o)}),z.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,n){let a=new Je(ae);return n.forEach(i=>{const r=new tt(i,0),s=new tt(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([r,s],o=>{a=a.add(o.Hr)})}),z.resolve(this.Yr(a))}getAllMutationBatchesAffectingQuery(e,n){const a=n.path,i=a.length+1;let r=a;G.isDocumentKey(r)||(r=r.child(""));const s=new tt(new G(r),0);let o=new Je(ae);return this.Jr.forEachWhile(u=>{const c=u.key.path;return!!a.isPrefixOf(c)&&(c.length===i&&(o=o.add(u.Hr)),!0)},s),z.resolve(this.Yr(o))}Yr(e){const n=[];return e.forEach(a=>{const i=this.Zr(a);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){de(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Jr;return z.forEach(n.mutations,i=>{const r=new tt(i.key,n.batchId);return a=a.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Jr=a})}nr(e){}containsKey(e,n){const a=new tt(n,0),i=this.Jr.firstAfterOrEqual(a);return z.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e){this.ti=e,this.docs=function(){return new Oe(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const a=n.key,i=this.docs.get(a),r=i?i.size:0,s=this.ti(n);return this.docs=this.docs.insert(a,{document:n.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const a=this.docs.get(n);return z.resolve(a?a.document.mutableCopy():vt.newInvalidDocument(n))}getEntries(e,n){let a=fa();return n.forEach(i=>{const r=this.docs.get(i);a=a.insert(i,r?r.document.mutableCopy():vt.newInvalidDocument(i))}),z.resolve(a)}getDocumentsMatchingQuery(e,n,a,i){let r=fa();const s=n.path,o=new G(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(o);for(;u.hasNext();){const{key:c,value:{document:f}}=u.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||cD(uD(f),a)<=0||(i.has(f.key)||Kc(n,f))&&(r=r.insert(f.key,f.mutableCopy()))}return z.resolve(r)}getAllFromCollectionGroup(e,n,a,i){Y(9500)}ni(e,n){return z.forEach(this.docs,a=>n(a))}newChangeBuffer(e){return new z4(this)}getSize(e){return z.resolve(this.size)}}class z4 extends O4{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((a,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(a)}),z.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e){this.persistence=e,this.ri=new tr(n=>dg(n),mg),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.ii=0,this.si=new bg,this.targetCount=0,this.oi=ts._r()}forEachTarget(e,n){return this.ri.forEach((a,i)=>n(i)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,a){return a&&(this.lastRemoteSnapshotVersion=a),n>this.ii&&(this.ii=n),z.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new ts(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.lr(n),z.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,a){let i=0;const r=[];return this.ri.forEach((s,o)=>{o.sequenceNumber<=n&&a.get(o.targetId)===null&&(this.ri.delete(s),r.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),z.waitFor(r).next(()=>i)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const a=this.ri.get(n)||null;return z.resolve(a)}addMatchingKeys(e,n,a){return this.si.$r(n,a),z.resolve()}removeMatchingKeys(e,n,a){this.si.Qr(n,a);const i=this.persistence.referenceDelegate,r=[];return i&&n.forEach(s=>{r.push(i.markPotentiallyOrphaned(e,s))}),z.waitFor(r)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const a=this.si.jr(n);return z.resolve(a)}containsKey(e,n){return z.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,n){this._i={},this.overlays={},this.ai=new Gc(0),this.ui=!1,this.ui=!0,this.ci=new k4,this.referenceDelegate=e(this),this.li=new B4(this),this.indexManager=new w4,this.remoteDocumentCache=function(i){return new P4(i)}(a=>this.referenceDelegate.hi(a)),this.serializer=new x4(n),this.Pi=new j4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new L4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let a=this._i[e.toKey()];return a||(a=new U4(n,this.referenceDelegate),this._i[e.toKey()]=a),a}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,a){F("MemoryPersistence","Starting transaction:",e);const i=new q4(this.ai.next());return this.referenceDelegate.Ti(),a(i).next(r=>this.referenceDelegate.Ii(i).next(()=>r)).toPromise().then(r=>(i.raiseOnCommittedEvent(),r))}Ei(e,n){return z.or(Object.values(this._i).map(a=>()=>a.containsKey(e,n)))}}class q4 extends fD{constructor(e){super(),this.currentSequenceNumber=e}}class Eg{constructor(e){this.persistence=e,this.Ri=new bg,this.Ai=null}static Vi(e){return new Eg(e)}get di(){if(this.Ai)return this.Ai;throw Y(60996)}addReference(e,n,a){return this.Ri.addReference(a,n),this.di.delete(a.toString()),z.resolve()}removeReference(e,n,a){return this.Ri.removeReference(a,n),this.di.add(a.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),z.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(i=>this.di.add(i.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(r=>this.di.add(r.toString()))}).next(()=>a.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.di,a=>{const i=G.fromPath(a);return this.mi(e,i).next(r=>{r||n.removeEntry(i,X.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(a=>{a?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return z.or([()=>z.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class pc{constructor(e,n){this.persistence=e,this.fi=new tr(a=>gD(a.path),(a,i)=>a.isEqual(i)),this.garbageCollector=I4(this,n)}static Vi(e,n){return new pc(e,n)}Ti(){}Ii(e){return z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(a=>n.next(i=>a+i))}pr(e){let n=0;return this.mr(e,a=>{n++}).next(()=>n)}mr(e,n){return z.forEach(this.fi,(a,i)=>this.wr(e,a,i).next(r=>r?z.resolve():n(i)))}removeTargets(e,n,a){return this.persistence.getTargetCache().removeTargets(e,n,a)}removeOrphanedDocuments(e,n){let a=0;const i=this.persistence.getRemoteDocumentCache(),r=i.newChangeBuffer();return i.ni(e,s=>this.wr(e,s,n).next(o=>{o||(a++,r.removeEntry(s,X.min()))})).next(()=>r.apply(e)).next(()=>a)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),z.resolve()}removeTarget(e,n){const a=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,n,a){return this.fi.set(a,e.currentSequenceNumber),z.resolve()}removeReference(e,n,a){return this.fi.set(a,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),z.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Su(e.data.value)),n}wr(e,n,a){return z.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.fi.get(n);return z.resolve(i!==void 0&&i>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,n,a,i){this.targetId=e,this.fromCache=n,this.Ts=a,this.Is=i}static Es(e,n){let a=ie(),i=ie();for(const r of n.docChanges)switch(r.type){case 0:a=a.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new Tg(e,n.fromCache,a,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return jC()?8:dD(MC())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,a,i){const r={result:null};return this.gs(e,n).next(s=>{r.result=s}).next(()=>{if(!r.result)return this.ps(e,n,i,a).next(s=>{r.result=s})}).next(()=>{if(r.result)return;const s=new H4;return this.ys(e,n,s).next(o=>{if(r.result=o,this.As)return this.ws(e,n,s,o.size)})}).next(()=>r.result)}ws(e,n,a,i){return a.documentReadCount<this.Vs?(dr()<=oe.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",mr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),z.resolve()):(dr()<=oe.DEBUG&&F("QueryEngine","Query:",mr(n),"scans",a.documentReadCount,"local documents and returns",i,"documents as results."),a.documentReadCount>this.ds*i?(dr()<=oe.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",mr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vn(n))):z.resolve())}gs(e,n){if(cv(n))return z.resolve(null);let a=Vn(n);return this.indexManager.getIndexType(e,a).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=dc(n,null,"F"),a=Vn(n)),this.indexManager.getDocumentsMatchingTarget(e,a).next(r=>{const s=ie(...r);return this.fs.getDocuments(e,s).next(o=>this.indexManager.getMinOffset(e,a).next(u=>{const c=this.bs(n,o);return this.Ss(n,c,s,u.readTime)?this.gs(e,dc(n,null,"F")):this.Ds(e,c,n,u)}))})))}ps(e,n,a,i){return cv(n)||i.isEqual(X.min())?z.resolve(null):this.fs.getDocuments(e,a).next(r=>{const s=this.bs(n,r);return this.Ss(n,s,a,i)?z.resolve(null):(dr()<=oe.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),mr(n)),this.Ds(e,s,n,oD(i,Bl)).next(o=>o))})}bs(e,n){let a=new Je(A1(e));return n.forEach((i,r)=>{Kc(e,r)&&(a=a.add(r))}),a}Ss(e,n,a,i){if(e.limit===null)return!1;if(a.size!==n.size)return!0;const r=e.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}ys(e,n,a){return dr()<=oe.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",mr(n)),this.fs.getDocumentsMatchingQuery(e,n,ai.min(),a)}Ds(e,n,a,i){return this.fs.getDocumentsMatchingQuery(e,a,i).next(r=>(n.forEach(s=>{r=r.insert(s.key,s)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg="LocalStore",G4=3e8;class Y4{constructor(e,n,a,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new Oe(ae),this.Fs=new tr(r=>dg(r),mg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(a)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new V4(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function Q4(t,e,n,a){return new Y4(t,e,n,a)}async function K1(t,e){const n=K(t);return await n.persistence.runTransaction("Handle user change","readonly",a=>{let i;return n.mutationQueue.getAllMutationBatches(a).next(r=>(i=r,n.Os(e),n.mutationQueue.getAllMutationBatches(a))).next(r=>{const s=[],o=[];let u=ie();for(const c of i){s.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}for(const c of r){o.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(a,u).next(c=>({Ns:c,removedBatchIds:s,addedBatchIds:o}))})})}function $4(t,e){const n=K(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const i=e.batch.keys(),r=n.xs.newChangeBuffer({trackRemovals:!0});return function(o,u,c,f){const m=c.batch,d=m.keys();let v=z.resolve();return d.forEach(R=>{v=v.next(()=>f.getEntry(u,R)).next(O=>{const D=c.docVersions.get(R);de(D!==null,48541),O.version.compareTo(D)<0&&(m.applyToRemoteDocument(O,c),O.isValidDocument()&&(O.setReadTime(c.commitVersion),f.addEntry(O)))})}),v.next(()=>o.mutationQueue.removeMutationBatch(u,m))}(n,a,e,r).next(()=>r.apply(a)).next(()=>n.mutationQueue.performConsistencyCheck(a)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(a,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(o){let u=ie();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(u=u.add(o.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(a,i))})}function W1(t){const e=K(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function X4(t,e){const n=K(t),a=e.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const s=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const o=[];e.targetChanges.forEach((f,m)=>{const d=i.get(m);if(!d)return;o.push(n.li.removeMatchingKeys(r,f.removedDocuments,m).next(()=>n.li.addMatchingKeys(r,f.addedDocuments,m)));let v=d.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(m)!==null?v=v.withResumeToken(dt.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):f.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(f.resumeToken,a)),i=i.insert(m,v),function(O,D,x){return O.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=G4?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(d,v,f)&&o.push(n.li.updateTargetData(r,v))});let u=fa(),c=ie();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(r,f))}),o.push(K4(r,s,e.documentUpdates).next(f=>{u=f.Bs,c=f.Ls})),!a.isEqual(X.min())){const f=n.li.getLastRemoteSnapshotVersion(r).next(m=>n.li.setTargetsMetadata(r,r.currentSequenceNumber,a));o.push(f)}return z.waitFor(o).next(()=>s.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,u,c)).next(()=>u)}).then(r=>(n.vs=i,r))}function K4(t,e,n){let a=ie(),i=ie();return n.forEach(r=>a=a.add(r)),e.getEntries(t,a).next(r=>{let s=fa();return n.forEach((o,u)=>{const c=r.get(o);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(o)),u.isNoDocument()&&u.version.isEqual(X.min())?(e.removeEntry(o,u.readTime),s=s.insert(o,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),s=s.insert(o,u)):F(xg,"Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",u.version)}),{Bs:s,Ls:i}})}function W4(t,e){const n=K(t);return n.persistence.runTransaction("Get next mutation batch","readonly",a=>(e===void 0&&(e=cg),n.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function J4(t,e){const n=K(t);return n.persistence.runTransaction("Allocate target","readwrite",a=>{let i;return n.li.getTargetData(a,e).next(r=>r?(i=r,z.resolve(i)):n.li.allocateTargetId(a).next(s=>(i=new Ua(e,s,"TargetPurposeListen",a.currentSequenceNumber),n.li.addTargetData(a,i).next(()=>i))))}).then(a=>{const i=n.vs.get(a.targetId);return(i===null||a.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(a.targetId,a),n.Fs.set(e,a.targetId)),a})}async function Yd(t,e,n){const a=K(t),i=a.vs.get(e),r=n?"readwrite":"readwrite-primary";try{n||await a.persistence.runTransaction("Release target",r,s=>a.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!ps(s))throw s;F(xg,`Failed to update sequence numbers for target ${e}: ${s}`)}a.vs=a.vs.remove(e),a.Fs.delete(i.target)}function xv(t,e,n){const a=K(t);let i=X.min(),r=ie();return a.persistence.runTransaction("Execute query","readwrite",s=>function(u,c,f){const m=K(u),d=m.Fs.get(f);return d!==void 0?z.resolve(m.vs.get(d)):m.li.getTargetData(c,f)}(a,s,Vn(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,a.li.getMatchingKeysForTargetId(s,o.targetId).next(u=>{r=u})}).next(()=>a.Cs.getDocumentsMatchingQuery(s,e,n?i:X.min(),n?r:ie())).next(o=>(Z4(a,kD(e),o),{documents:o,ks:r})))}function Z4(t,e,n){let a=t.Ms.get(e)||X.min();n.forEach((i,r)=>{r.readTime.compareTo(a)>0&&(a=r.readTime)}),t.Ms.set(e,a)}class Sv{constructor(){this.activeTargetIds=HD()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eI{constructor(){this.vo=new Sv,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,a){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,a){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Sv,Promise.resolve()}handleUserChange(e,n,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv="ConnectivityMonitor";class Av{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){F(wv,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){F(wv,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tu=null;function Qd(){return tu===null?tu=function(){return 268435456+Math.round(2147483648*Math.random())}():tu++,"0x"+tu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af="RestConnection",nI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class aI{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${a}/databases/${i}`,this.$o=this.databaseId.database===cc?`project_id=${a}`:`project_id=${a}&database_id=${i}`}Wo(e,n,a,i,r){const s=Qd(),o=this.Qo(e,n.toUriEncodedString());F(Af,`Sending RPC '${e}' ${s}:`,o,a);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(u,i,r);const{host:c}=new URL(o),f=ho(c);return this.zo(e,o,u,a,f).then(m=>(F(Af,`Received RPC '${e}' ${s}: `,m),m),m=>{throw Hi(Af,`RPC '${e}' ${s} failed with error: `,m,"url: ",o,"request:",a),m})}jo(e,n,a,i,r,s){return this.Wo(e,n,a,i,r)}Go(e,n,a){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ms}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,r)=>e[r]=i),a&&a.headers.forEach((i,r)=>e[r]=i)}Qo(e,n){const a=nI[e];let i=`${this.qo}/v1/${n}:${a}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pt="WebChannelConnection",Gs=(t,e,n)=>{t.listen(e,a=>{try{n(a)}catch(i){setTimeout(()=>{throw i},0)}})};class kr extends aI{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!kr.c_){const e=n1();Gs(e,t1.STAT_EVENT,n=>{n.stat===jd.PROXY?F(pt,"STAT_EVENT: detected buffering proxy"):n.stat===jd.NOPROXY&&F(pt,"STAT_EVENT: detected no buffering proxy")}),kr.c_=!0}}zo(e,n,a,i,r){const s=Qd();return new Promise((o,u)=>{const c=new ZT;c.setWithCredentials(!0),c.listenOnce(e1.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case xu.NO_ERROR:const m=c.getResponseJson();F(pt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(m)),o(m);break;case xu.TIMEOUT:F(pt,`RPC '${e}' ${s} timed out`),u(new H(U.DEADLINE_EXCEEDED,"Request time out"));break;case xu.HTTP_ERROR:const d=c.getStatus();if(F(pt,`RPC '${e}' ${s} failed with status:`,d,"response text:",c.getResponseText()),d>0){let v=c.getResponseJson();Array.isArray(v)&&(v=v[0]);const R=v==null?void 0:v.error;if(R&&R.status&&R.message){const O=function(x){const y=x.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(y)>=0?y:U.UNKNOWN}(R.status);u(new H(O,R.message))}else u(new H(U.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new H(U.UNAVAILABLE,"Connection failed."));break;default:Y(9055,{l_:e,streamId:s,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{F(pt,`RPC '${e}' ${s} completed.`)}});const f=JSON.stringify(i);F(pt,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",f,a,15)})}T_(e,n,a){const i=Qd(),r=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=this.createWebChannelTransport(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(o.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Go(o.initMessageHeaders,n,a),o.encodeInitMessageHeaders=!0;const c=r.join("");F(pt,`Creating RPC '${e}' stream ${i}: ${c}`,o);const f=s.createWebChannel(c,o);this.I_(f);let m=!1,d=!1;const v=new iI({Ho:R=>{d?F(pt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(F(pt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),F(pt,`RPC '${e}' stream ${i} sending:`,R),f.send(R))},Jo:()=>f.close()});return Gs(f,el.EventType.OPEN,()=>{d||(F(pt,`RPC '${e}' stream ${i} transport opened.`),v.i_())}),Gs(f,el.EventType.CLOSE,()=>{d||(d=!0,F(pt,`RPC '${e}' stream ${i} transport closed`),v.o_(),this.E_(f))}),Gs(f,el.EventType.ERROR,R=>{d||(d=!0,Hi(pt,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),v.o_(new H(U.UNAVAILABLE,"The operation could not be completed")))}),Gs(f,el.EventType.MESSAGE,R=>{var O;if(!d){const D=R.data[0];de(!!D,16349);const x=D,y=(x==null?void 0:x.error)||((O=x[0])==null?void 0:O.error);if(y){F(pt,`RPC '${e}' stream ${i} received error:`,y);const _=y.status;let N=function(E){const b=He[E];if(b!==void 0)return k1(b)}(_),V=y.message;_==="NOT_FOUND"&&V.includes("database")&&V.includes("does not exist")&&V.includes(this.databaseId.database)&&Hi(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),N===void 0&&(N=U.INTERNAL,V="Unknown error status: "+_+" with message "+y.message),d=!0,v.o_(new H(N,V)),f.close()}else F(pt,`RPC '${e}' stream ${i} received:`,D),v.__(D)}}),kr.u_(),setTimeout(()=>{v.s_()},0),v}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,a){super.Go(e,n,a),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return a1()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(t){return new kr(t)}function Rf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eh(t){return new u4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kr.c_=!1;class J1{constructor(e,n,a=1e3,i=1.5,r=6e4){this.Ci=e,this.timerId=n,this.R_=a,this.A_=i,this.V_=r,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),a=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-a);i>0&&F("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${a} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv="PersistentStream";class Z1{constructor(e,n,a,i,r,s,o,u){this.Ci=e,this.b_=a,this.S_=i,this.connection=r,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new J1(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(ha(n.toString()),ha("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,i])=>{this.D_===n&&this.G_(a,i)},a=>{e(()=>{const i=new H(U.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(i)})})}G_(e,n){const a=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{a(()=>this.listener.Zo())}),this.stream.Yo(()=>{a(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(i=>{a(()=>this.z_(i))}),this.stream.onMessage(i=>{a(()=>++this.F_==1?this.H_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return F(Rv,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(F(Rv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sI extends Z1{constructor(e,n,a,i,r,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,a,i,s),this.serializer=r}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=f4(this.serializer,e),a=function(r){if(!("targetChange"in r))return X.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?X.min():s.readTime?jn(s.readTime):X.min()}(e);return this.listener.J_(n,a)}Z_(e){const n={};n.database=Gd(this.serializer),n.addTarget=function(r,s){let o;const u=s.target;if(o=zd(u)?{documents:g4(r,u)}:{query:p4(r,u).ft},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=z1(r,s.resumeToken);const c=qd(r,s.expectedCount);c!==null&&(o.expectedCount=c)}else if(s.snapshotVersion.compareTo(X.min())>0){o.readTime=gc(r,s.snapshotVersion.toTimestamp());const c=qd(r,s.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const a=v4(this.serializer,e);a&&(n.labels=a),this.K_(n)}X_(e){const n={};n.database=Gd(this.serializer),n.removeTarget=e,this.K_(n)}}class lI extends Z1{constructor(e,n,a,i,r,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,a,i,s),this.serializer=r}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return de(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,de(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){de(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=m4(e.writeResults,e.commitTime),a=jn(e.commitTime);return this.listener.na(a,n)}ra(){const e={};e.database=Gd(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(a=>d4(this.serializer,a))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{}class uI extends oI{constructor(e,n,a,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=a,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new H(U.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,a,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.Wo(e,Hd(n,a),i,r,s)).catch(r=>{throw r.name==="FirebaseError"?(r.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new H(U.UNKNOWN,r.toString())})}jo(e,n,a,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.jo(e,Hd(n,a),i,s,o,r)).catch(s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(U.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function cI(t,e,n,a){return new uI(t,e,n,a)}class hI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ha(n),this.aa=!1):F("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi="RemoteStore";class fI{constructor(e,n,a,i,r){this.localStore=e,this.datastore=n,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=r,this.Aa.Mo(s=>{a.enqueueAndForget(async()=>{nr(this)&&(F(Fi,"Restarting streams for network reachability change."),await async function(u){const c=K(u);c.Ea.add(4),await po(c),c.Va.set("Unknown"),c.Ea.delete(4),await th(c)}(this))})}),this.Va=new hI(a,i)}}async function th(t){if(nr(t))for(const e of t.Ra)await e(!0)}async function po(t){for(const e of t.Ra)await e(!1)}function ex(t,e){const n=K(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Rg(n)?Ag(n):vs(n).O_()&&wg(n,e))}function Sg(t,e){const n=K(t),a=vs(n);n.Ia.delete(e),a.O_()&&tx(n,e),n.Ia.size===0&&(a.O_()?a.L_():nr(n)&&n.Va.set("Unknown"))}function wg(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}vs(t).Z_(e)}function tx(t,e){t.da.$e(e),vs(t).X_(e)}function Ag(t){t.da=new r4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),vs(t).start(),t.Va.ua()}function Rg(t){return nr(t)&&!vs(t).x_()&&t.Ia.size>0}function nr(t){return K(t).Ea.size===0}function nx(t){t.da=void 0}async function dI(t){t.Va.set("Online")}async function mI(t){t.Ia.forEach((e,n)=>{wg(t,e)})}async function gI(t,e){nx(t),Rg(t)?(t.Va.ha(e),Ag(t)):t.Va.set("Unknown")}async function pI(t,e,n){if(t.Va.set("Online"),e instanceof P1&&e.state===2&&e.cause)try{await async function(i,r){const s=r.cause;for(const o of r.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.Ia.delete(o),i.da.removeTarget(o))}(t,e)}catch(a){F(Fi,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await yc(t,a)}else if(e instanceof Ru?t.da.Xe(e):e instanceof U1?t.da.st(e):t.da.tt(e),!n.isEqual(X.min()))try{const a=await W1(t.localStore);n.compareTo(a)>=0&&await function(r,s){const o=r.da.Tt(s);return o.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const f=r.Ia.get(c);f&&r.Ia.set(c,f.withResumeToken(u.resumeToken,s))}}),o.targetMismatches.forEach((u,c)=>{const f=r.Ia.get(u);if(!f)return;r.Ia.set(u,f.withResumeToken(dt.EMPTY_BYTE_STRING,f.snapshotVersion)),tx(r,u);const m=new Ua(f.target,u,c,f.sequenceNumber);wg(r,m)}),r.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(a){F(Fi,"Failed to raise snapshot:",a),await yc(t,a)}}async function yc(t,e,n){if(!ps(e))throw e;t.Ea.add(1),await po(t),t.Va.set("Offline"),n||(n=()=>W1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{F(Fi,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await th(t)})}function ax(t,e){return e().catch(n=>yc(t,n,e))}async function nh(t){const e=K(t),n=li(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:cg;for(;yI(e);)try{const i=await W4(e.localStore,a);if(i===null){e.Ta.length===0&&n.L_();break}a=i.batchId,vI(e,i)}catch(i){await yc(e,i)}ix(e)&&rx(e)}function yI(t){return nr(t)&&t.Ta.length<10}function vI(t,e){t.Ta.push(e);const n=li(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function ix(t){return nr(t)&&!li(t).x_()&&t.Ta.length>0}function rx(t){li(t).start()}async function _I(t){li(t).ra()}async function bI(t){const e=li(t);for(const n of t.Ta)e.ea(n.mutations)}async function EI(t,e,n){const a=t.Ta.shift(),i=yg.from(a,e,n);await ax(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await nh(t)}async function TI(t,e){e&&li(t).Y_&&await async function(a,i){if(function(s){return n4(s)&&s!==U.ABORTED}(i.code)){const r=a.Ta.shift();li(a).B_(),await ax(a,()=>a.remoteSyncer.rejectFailedWrite(r.batchId,i)),await nh(a)}}(t,e),ix(t)&&rx(t)}async function Cv(t,e){const n=K(t);n.asyncQueue.verifyOperationInProgress(),F(Fi,"RemoteStore received new credentials");const a=nr(n);n.Ea.add(3),await po(n),a&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await th(n)}async function xI(t,e){const n=K(t);e?(n.Ea.delete(2),await th(n)):e||(n.Ea.add(2),await po(n),n.Va.set("Unknown"))}function vs(t){return t.ma||(t.ma=function(n,a,i){const r=K(n);return r.sa(),new sI(a,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{Zo:dI.bind(null,t),Yo:mI.bind(null,t),t_:gI.bind(null,t),J_:pI.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),Rg(t)?Ag(t):t.Va.set("Unknown")):(await t.ma.stop(),nx(t))})),t.ma}function li(t){return t.fa||(t.fa=function(n,a,i){const r=K(n);return r.sa(),new lI(a,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:_I.bind(null,t),t_:TI.bind(null,t),ta:bI.bind(null,t),na:EI.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await nh(t)):(await t.fa.stop(),t.Ta.length>0&&(F(Fi,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,n,a,i,r){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=a,this.op=i,this.removalCallback=r,this.deferred=new aa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,a,i,r){const s=Date.now()+a,o=new Cg(e,n,s,i,r);return o.start(a),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ng(t,e){if(ha("AsyncQueue",`${e}: ${t}`),ps(t))return new H(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{static emptySet(e){return new Ur(e.comparator)}constructor(e){this.comparator=e?(n,a)=>e(n,a)||G.comparator(n.key,a.key):(n,a)=>G.comparator(n.key,a.key),this.keyedMap=tl(),this.sortedSet=new Oe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,a)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ur)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=a.getNext().key;if(!i.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const a=new Ur;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=n,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(){this.ga=new Oe(G.comparator)}track(e){const n=e.doc.key,a=this.ga.get(n);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(n,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(n,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(n):e.type===1&&a.type===2?this.ga=this.ga.insert(n,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Y(63341,{Vt:e,pa:a}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,a)=>{e.push(a)}),e}}class ns{constructor(e,n,a,i,r,s,o,u,c){this.query=e,this.docs=n,this.oldDocs=a,this.docChanges=i,this.mutatedKeys=r,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,a,i,r){const s=[];return n.forEach(o=>{s.push({type:0,doc:o})}),new ns(e,n,Ur.emptySet(n),s,a,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,a=e.docChanges;if(n.length!==a.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==a[i].type||!n[i].doc.isEqual(a[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class wI{constructor(){this.queries=Dv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,a){const i=K(n),r=i.queries;i.queries=Dv(),r.forEach((s,o)=>{for(const u of o.ba)u.onError(a)})})(this,new H(U.ABORTED,"Firestore shutting down"))}}function Dv(){return new tr(t=>w1(t),Xc)}async function Dg(t,e){const n=K(t);let a=3;const i=e.query;let r=n.queries.get(i);r?!r.Sa()&&e.Da()&&(a=2):(r=new SI,a=e.Da()?0:1);try{switch(a){case 0:r.wa=await n.onListen(i,!0);break;case 1:r.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const o=Ng(s,`Initialization of query '${mr(e.query)}' failed`);return void e.onError(o)}n.queries.set(i,r),r.ba.push(e),e.va(n.onlineState),r.wa&&e.Fa(r.wa)&&Og(n)}async function Ig(t,e){const n=K(t),a=e.query;let i=3;const r=n.queries.get(a);if(r){const s=r.ba.indexOf(e);s>=0&&(r.ba.splice(s,1),r.ba.length===0?i=e.Da()?0:1:!r.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(a),n.onUnlisten(a,!0);case 1:return n.queries.delete(a),n.onUnlisten(a,!1);case 2:return n.onLastRemoteStoreUnlisten(a);default:return}}function AI(t,e){const n=K(t);let a=!1;for(const i of e){const r=i.query,s=n.queries.get(r);if(s){for(const o of s.ba)o.Fa(i)&&(a=!0);s.wa=i}}a&&Og(n)}function RI(t,e,n){const a=K(t),i=a.queries.get(e);if(i)for(const r of i.ba)r.onError(n);a.queries.delete(e)}function Og(t){t.Ca.forEach(e=>{e.next()})}var $d,Iv;(Iv=$d||($d={})).Ma="default",Iv.Cache="cache";class Mg{constructor(e,n,a){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const i of e.docChanges)i.type!==3&&a.push(i);e=new ns(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const a=n!=="Offline";return(!this.options.Ka||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ns.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==$d.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e){this.key=e}}class lx{constructor(e){this.key=e}}class CI{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ie(),this.mutatedKeys=ie(),this.eu=A1(e),this.tu=new Ur(this.eu)}get nu(){return this.Za}ru(e,n){const a=n?n.iu:new Nv,i=n?n.tu:this.tu;let r=n?n.mutatedKeys:this.mutatedKeys,s=i,o=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,m)=>{const d=i.get(f),v=Kc(this.query,m)?m:null,R=!!d&&this.mutatedKeys.has(d.key),O=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let D=!1;d&&v?d.data.isEqual(v.data)?R!==O&&(a.track({type:3,doc:v}),D=!0):this.su(d,v)||(a.track({type:2,doc:v}),D=!0,(u&&this.eu(v,u)>0||c&&this.eu(v,c)<0)&&(o=!0)):!d&&v?(a.track({type:0,doc:v}),D=!0):d&&!v&&(a.track({type:1,doc:d}),D=!0,(u||c)&&(o=!0)),D&&(v?(s=s.add(v),r=O?r.add(f):r.delete(f)):(s=s.delete(f),r=r.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),r=r.delete(f.key),a.track({type:1,doc:f})}return{tu:s,iu:a,Ss:o,mutatedKeys:r}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,a,i){const r=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((f,m)=>function(v,R){const O=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y(20277,{Vt:D})}};return O(v)-O(R)}(f.type,m.type)||this.eu(f.doc,m.doc)),this.ou(a),i=i??!1;const o=n&&!i?this._u():[],u=this.Ya.size===0&&this.current&&!i?1:0,c=u!==this.Xa;return this.Xa=u,s.length!==0||c?{snapshot:new ns(this.query,e.tu,r,s,e.mutatedKeys,u===0,c,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Nv,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ie(),this.tu.forEach(a=>{this.uu(a.key)&&(this.Ya=this.Ya.add(a.key))});const n=[];return e.forEach(a=>{this.Ya.has(a)||n.push(new lx(a))}),this.Ya.forEach(a=>{e.has(a)||n.push(new sx(a))}),n}cu(e){this.Za=e.ks,this.Ya=ie();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ns.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Vg="SyncEngine";class NI{constructor(e,n,a){this.query=e,this.targetId=n,this.view=a}}class DI{constructor(e){this.key=e,this.hu=!1}}class II{constructor(e,n,a,i,r,s){this.localStore=e,this.remoteStore=n,this.eventManager=a,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new tr(o=>w1(o),Xc),this.Iu=new Map,this.Eu=new Set,this.Ru=new Oe(G.comparator),this.Au=new Map,this.Vu=new bg,this.du={},this.mu=new Map,this.fu=ts.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function OI(t,e,n=!0){const a=dx(t);let i;const r=a.Tu.get(e);return r?(a.sharedClientState.addLocalQueryTarget(r.targetId),i=r.view.lu()):i=await ox(a,e,n,!0),i}async function MI(t,e){const n=dx(t);await ox(n,e,!0,!1)}async function ox(t,e,n,a){const i=await J4(t.localStore,Vn(e)),r=i.targetId,s=t.sharedClientState.addLocalQueryTarget(r,n);let o;return a&&(o=await VI(t,e,r,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&ex(t.remoteStore,i),o}async function VI(t,e,n,a,i){t.pu=(m,d,v)=>async function(O,D,x,y){let _=D.view.ru(x);_.Ss&&(_=await xv(O.localStore,D.query,!1).then(({documents:E})=>D.view.ru(E,_)));const N=y&&y.targetChanges.get(D.targetId),V=y&&y.targetMismatches.get(D.targetId)!=null,k=D.view.applyChanges(_,O.isPrimaryClient,N,V);return Mv(O,D.targetId,k.au),k.snapshot}(t,m,d,v);const r=await xv(t.localStore,e,!0),s=new CI(e,r.ks),o=s.ru(r.documents),u=go.createSynthesizedTargetChangeForCurrentChange(n,a&&t.onlineState!=="Offline",i),c=s.applyChanges(o,t.isPrimaryClient,u);Mv(t,n,c.au);const f=new NI(e,n,s);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function jI(t,e,n){const a=K(t),i=a.Tu.get(e),r=a.Iu.get(i.targetId);if(r.length>1)return a.Iu.set(i.targetId,r.filter(s=>!Xc(s,e))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(i.targetId),a.sharedClientState.isActiveQueryTarget(i.targetId)||await Yd(a.localStore,i.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(i.targetId),n&&Sg(a.remoteStore,i.targetId),Xd(a,i.targetId)}).catch(gs)):(Xd(a,i.targetId),await Yd(a.localStore,i.targetId,!0))}async function LI(t,e){const n=K(t),a=n.Tu.get(e),i=n.Iu.get(a.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(a.targetId),Sg(n.remoteStore,a.targetId))}async function kI(t,e,n){const a=FI(t);try{const i=await function(s,o){const u=K(s),c=Re.now(),f=o.reduce((v,R)=>v.add(R.key),ie());let m,d;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let R=fa(),O=ie();return u.xs.getEntries(v,f).next(D=>{R=D,R.forEach((x,y)=>{y.isValidDocument()||(O=O.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,R)).next(D=>{m=D;const x=[];for(const y of o){const _=WD(y,m.get(y.key).overlayedDocument);_!=null&&x.push(new fi(y.key,_,y1(_.value.mapValue),mn.exists(!0)))}return u.mutationQueue.addMutationBatch(v,c,x,o)}).next(D=>{d=D;const x=D.applyToLocalDocumentSet(m,O);return u.documentOverlayCache.saveOverlays(v,D.batchId,x)})}).then(()=>({batchId:d.batchId,changes:C1(m)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(i.batchId),function(s,o,u){let c=s.du[s.currentUser.toKey()];c||(c=new Oe(ae)),c=c.insert(o,u),s.du[s.currentUser.toKey()]=c}(a,i.batchId,n),await yo(a,i.changes),await nh(a.remoteStore)}catch(i){const r=Ng(i,"Failed to persist write");n.reject(r)}}async function ux(t,e){const n=K(t);try{const a=await X4(n.localStore,e);e.targetChanges.forEach((i,r)=>{const s=n.Au.get(r);s&&(de(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?de(s.hu,14607):i.removedDocuments.size>0&&(de(s.hu,42227),s.hu=!1))}),await yo(n,a,e)}catch(a){await gs(a)}}function Ov(t,e,n){const a=K(t);if(a.isPrimaryClient&&n===0||!a.isPrimaryClient&&n===1){const i=[];a.Tu.forEach((r,s)=>{const o=s.view.va(e);o.snapshot&&i.push(o.snapshot)}),function(s,o){const u=K(s);u.onlineState=o;let c=!1;u.queries.forEach((f,m)=>{for(const d of m.ba)d.va(o)&&(c=!0)}),c&&Og(u)}(a.eventManager,e),i.length&&a.Pu.J_(i),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function UI(t,e,n){const a=K(t);a.sharedClientState.updateQueryState(e,"rejected",n);const i=a.Au.get(e),r=i&&i.key;if(r){let s=new Oe(G.comparator);s=s.insert(r,vt.newNoDocument(r,X.min()));const o=ie().add(r),u=new Zc(X.min(),new Map,new Oe(ae),s,o);await ux(a,u),a.Ru=a.Ru.remove(r),a.Au.delete(e),jg(a)}else await Yd(a.localStore,e,!1).then(()=>Xd(a,e,n)).catch(gs)}async function PI(t,e){const n=K(t),a=e.batch.batchId;try{const i=await $4(n.localStore,e);hx(n,a,null),cx(n,a),n.sharedClientState.updateMutationState(a,"acknowledged"),await yo(n,i)}catch(i){await gs(i)}}async function zI(t,e,n){const a=K(t);try{const i=await function(s,o){const u=K(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let f;return u.mutationQueue.lookupMutationBatch(c,o).next(m=>(de(m!==null,37113),f=m.keys(),u.mutationQueue.removeMutationBatch(c,m))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,f,o)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,f)).next(()=>u.localDocuments.getDocuments(c,f))})}(a.localStore,e);hx(a,e,n),cx(a,e),a.sharedClientState.updateMutationState(e,"rejected",n),await yo(a,i)}catch(i){await gs(i)}}function cx(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function hx(t,e,n){const a=K(t);let i=a.du[a.currentUser.toKey()];if(i){const r=i.get(e);r&&(n?r.reject(n):r.resolve(),i=i.remove(e)),a.du[a.currentUser.toKey()]=i}}function Xd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const a of t.Iu.get(e))t.Tu.delete(a),n&&t.Pu.yu(a,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(a=>{t.Vu.containsKey(a)||fx(t,a)})}function fx(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(Sg(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),jg(t))}function Mv(t,e,n){for(const a of n)a instanceof sx?(t.Vu.addReference(a.key,e),BI(t,a)):a instanceof lx?(F(Vg,"Document no longer in limbo: "+a.key),t.Vu.removeReference(a.key,e),t.Vu.containsKey(a.key)||fx(t,a.key)):Y(19791,{wu:a})}function BI(t,e){const n=e.key,a=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(a)||(F(Vg,"New document in limbo: "+n),t.Eu.add(a),jg(t))}function jg(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new G(Ee.fromString(e)),a=t.fu.next();t.Au.set(a,new DI(n)),t.Ru=t.Ru.insert(n,a),ex(t.remoteStore,new Ua(Vn($c(n.path)),a,"TargetPurposeLimboResolution",Gc.ce))}}async function yo(t,e,n){const a=K(t),i=[],r=[],s=[];a.Tu.isEmpty()||(a.Tu.forEach((o,u)=>{s.push(a.pu(u,e,n).then(c=>{var f;if((c||n)&&a.isPrimaryClient){const m=c?!c.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:f.current;a.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(c){i.push(c);const m=Tg.Es(u.targetId,c);r.push(m)}}))}),await Promise.all(s),a.Pu.J_(i),await async function(u,c){const f=K(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>z.forEach(c,d=>z.forEach(d.Ts,v=>f.persistence.referenceDelegate.addReference(m,d.targetId,v)).next(()=>z.forEach(d.Is,v=>f.persistence.referenceDelegate.removeReference(m,d.targetId,v)))))}catch(m){if(!ps(m))throw m;F(xg,"Failed to update sequence numbers: "+m)}for(const m of c){const d=m.targetId;if(!m.fromCache){const v=f.vs.get(d),R=v.snapshotVersion,O=v.withLastLimboFreeSnapshotVersion(R);f.vs=f.vs.insert(d,O)}}}(a.localStore,r))}async function qI(t,e){const n=K(t);if(!n.currentUser.isEqual(e)){F(Vg,"User change. New user:",e.toKey());const a=await K1(n.localStore,e);n.currentUser=e,function(r,s){r.mu.forEach(o=>{o.forEach(u=>{u.reject(new H(U.CANCELLED,s))})}),r.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await yo(n,a.Ns)}}function HI(t,e){const n=K(t),a=n.Au.get(e);if(a&&a.hu)return ie().add(a.key);{let i=ie();const r=n.Iu.get(e);if(!r)return i;for(const s of r){const o=n.Tu.get(s);i=i.unionWith(o.view.nu)}return i}}function dx(t){const e=K(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ux.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=HI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=UI.bind(null,e),e.Pu.J_=AI.bind(null,e.eventManager),e.Pu.yu=RI.bind(null,e.eventManager),e}function FI(t){const e=K(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zI.bind(null,e),e}class vc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=eh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Q4(this.persistence,new F4,e.initialUser,this.serializer)}Cu(e){return new X1(Eg.Vi,this.serializer)}Du(e){return new eI}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vc.provider={build:()=>new vc};class GI extends vc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){de(this.persistence.referenceDelegate instanceof pc,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new N4(a,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Vt.withCacheSize(this.cacheSizeBytes):Vt.DEFAULT;return new X1(a=>pc.Vi(a,n),this.serializer)}}class Kd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>Ov(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=qI.bind(null,this.syncEngine),await xI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new wI}()}createDatastore(e){const n=eh(e.databaseInfo.databaseId),a=rI(e.databaseInfo);return cI(e.authCredentials,e.appCheckCredentials,a,n)}createRemoteStore(e){return function(a,i,r,s,o){return new fI(a,i,r,s,o)}(this.localStore,this.datastore,e.asyncQueue,n=>Ov(this.syncEngine,n,0),function(){return Av.v()?new Av:new tI}())}createSyncEngine(e,n){return function(i,r,s,o,u,c,f){const m=new II(i,r,s,o,u,c);return f&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const r=K(i);F(Fi,"RemoteStore shutting down."),r.Ea.add(5),await po(r),r.Aa.shutdown(),r.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Kd.provider={build:()=>new Kd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ha("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi="FirestoreClient";class YI{constructor(e,n,a,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=a,this._databaseInfo=i,this.user=yt.UNAUTHENTICATED,this.clientId=ug.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(a,async s=>{F(oi,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(a,s=>(F(oi,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new aa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const a=Ng(n,"Failed to shutdown persistence");e.reject(a)}}),e.promise}}async function Cf(t,e){t.asyncQueue.verifyOperationInProgress(),F(oi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let a=n.initialUser;t.setCredentialChangeListener(async i=>{a.isEqual(i)||(await K1(e.localStore,i),a=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Vv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await QI(t);F(oi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(a=>Cv(e.remoteStore,a)),t.setAppCheckTokenChangeListener((a,i)=>Cv(e.remoteStore,i)),t._onlineComponents=e}async function QI(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){F(oi,"Using user provided OfflineComponentProvider");try{await Cf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===U.FAILED_PRECONDITION||i.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Hi("Error using user provided cache. Falling back to memory cache: "+n),await Cf(t,new vc)}}else F(oi,"Using default OfflineComponentProvider"),await Cf(t,new GI(void 0));return t._offlineComponents}async function mx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(F(oi,"Using user provided OnlineComponentProvider"),await Vv(t,t._uninitializedComponentsProvider._online)):(F(oi,"Using default OnlineComponentProvider"),await Vv(t,new Kd))),t._onlineComponents}function $I(t){return mx(t).then(e=>e.syncEngine)}async function _c(t){const e=await mx(t),n=e.eventManager;return n.onListen=OI.bind(null,e.syncEngine),n.onUnlisten=jI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=MI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=LI.bind(null,e.syncEngine),n}function XI(t,e,n,a){const i=new Lg(a),r=new Mg(e,i,n);return t.asyncQueue.enqueueAndForget(async()=>Dg(await _c(t),r)),()=>{i.Nu(),t.asyncQueue.enqueueAndForget(async()=>Ig(await _c(t),r))}}function KI(t,e,n={}){const a=new aa;return t.asyncQueue.enqueueAndForget(async()=>function(r,s,o,u,c){const f=new Lg({next:d=>{f.Nu(),s.enqueueAndForget(()=>Ig(r,m));const v=d.docs.has(o);!v&&d.fromCache?c.reject(new H(U.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&d.fromCache&&u&&u.source==="server"?c.reject(new H(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(d)},error:d=>c.reject(d)}),m=new Mg($c(o.path),f,{includeMetadataChanges:!0,Ka:!0});return Dg(r,m)}(await _c(t),t.asyncQueue,e,n,a)),a.promise}function WI(t,e,n={}){const a=new aa;return t.asyncQueue.enqueueAndForget(async()=>function(r,s,o,u,c){const f=new Lg({next:d=>{f.Nu(),s.enqueueAndForget(()=>Ig(r,m)),d.fromCache&&u.source==="server"?c.reject(new H(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(d)},error:d=>c.reject(d)}),m=new Mg(o,f,{includeMetadataChanges:!0,Ka:!0});return Dg(r,m)}(await _c(t),t.asyncQueue,e,n,a)),a.promise}function JI(t,e){const n=new aa;return t.asyncQueue.enqueueAndForget(async()=>kI(await $I(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI="ComponentProvider",jv=new Map;function eO(t,e,n,a,i){return new vD(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,gx(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px="firestore.googleapis.com",Lv=!0;class kv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new H(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=px,this.ssl=Lv}else this.host=e.host,this.ssl=e.ssl??Lv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<R4)throw new H(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gx(e.experimentalLongPollingOptions??{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new H(U.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new H(U.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new H(U.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(a,i){return a.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ah{constructor(e,n,a,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=a,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new KN;switch(a.type){case"firstParty":return new eD(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new H(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const a=jv.get(n);a&&(F(ZI,"Removing Datastore"),jv.delete(n),a.terminate())}(this),Promise.resolve()}}function tO(t,e,n,a={}){var c;t=kt(t,ah);const i=ho(e),r=t._getSettings(),s={...r,emulatorOptions:t._getEmulatorOptions()},o=`${e}:${n}`;i&&(UT(`https://${o}`),zT("Firestore",!0)),r.host!==px&&r.host!==o&&Hi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...r,host:o,ssl:i,emulatorOptions:a};if(!lc(u,s)&&(t._setSettings(u),a.mockUserToken)){let f,m;if(typeof a.mockUserToken=="string")f=a.mockUserToken,m=yt.MOCK_USER;else{f=PT(a.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const d=a.mockUserToken.sub||a.mockUserToken.user_id;if(!d)throw new H(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new yt(d)}t._authCredentials=new WN(new r1(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,n,a){this.converter=n,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new pa(this.firestore,e,this._query)}}class Le{constructor(e,n,a){this.converter=n,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ja(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Le(this.firestore,e,this._key)}toJSON(){return{type:Le._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,a){if(fo(n,Le._jsonSchema))return new Le(e,a||null,new G(Ee.fromString(n.referencePath)))}}Le._jsonSchemaVersion="firestore/documentReference/1.0",Le._jsonSchema={type:Xe("string",Le._jsonSchemaVersion),referencePath:Xe("string")};class Ja extends pa{constructor(e,n,a){super(e,n,$c(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Le(this.firestore,null,new G(e))}withConverter(e){return new Ja(this.firestore,e,this._path)}}function _s(t,e,...n){if(t=Pt(t),s1("collection","path",e),t instanceof ah){const a=Ee.fromString(e,...n);return K0(a),new Ja(t,null,a)}{if(!(t instanceof Le||t instanceof Ja))throw new H(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=t._path.child(Ee.fromString(e,...n));return K0(a),new Ja(t.firestore,null,a)}}function ya(t,e,...n){if(t=Pt(t),arguments.length===1&&(e=ug.newId()),s1("doc","path",e),t instanceof ah){const a=Ee.fromString(e,...n);return X0(a),new Le(t,null,new G(a))}{if(!(t instanceof Le||t instanceof Ja))throw new H(U.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=t._path.child(Ee.fromString(e,...n));return X0(a),new Le(t.firestore,t instanceof Ja?t.converter:null,new G(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv="AsyncQueue";class Pv{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new J1(this,"async_queue_retry"),this._c=()=>{const a=Rf();a&&F(Uv,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const n=Rf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Rf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new aa;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ps(e))throw e;F(Uv,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(a=>{throw this.nc=a,this.rc=!1,ha("INTERNAL UNHANDLED ERROR: ",zv(a)),a}).then(a=>(this.rc=!1,a))));return this.ac=n,n}enqueueAfterDelay(e,n,a){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Cg.createAndSchedule(this,e,n,a,r=>this.hc(r));return this.tc.push(i),i}uc(){this.nc&&Y(47125,{Pc:zv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,a)=>n.targetTimeMs-a.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function zv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class da extends ah{constructor(e,n,a,i){super(e,n,a,i),this.type="firestore",this._queue=new Pv,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Pv(e),this._firestoreClient=void 0,await e}}}function nO(t,e){const n=typeof t=="object"?t:XT(),a=typeof t=="string"?t:cc,i=GT(n,"firestore").getImmediate({identifier:a});if(!i._initialized){const r=LT("firestore");r&&tO(i,...r)}return i}function ih(t){if(t._terminated)throw new H(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||aO(t),t._firestoreClient}function aO(t){var a,i,r,s;const e=t._freezeSettings(),n=eO(t._databaseId,((a=t._app)==null?void 0:a.options.appId)||"",t._persistenceKey,(i=t._app)==null?void 0:i.options.apiKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new YI(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new cn(dt.fromBase64String(e))}catch(n){throw new H(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new cn(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:cn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(fo(e,cn._jsonSchema))return cn.fromBase64String(e.bytes)}}cn._jsonSchemaVersion="firestore/bytes/1.0",cn._jsonSchema={type:Xe("string",cn._jsonSchemaVersion),bytes:Xe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ln._jsonSchemaVersion}}static fromJSON(e){if(fo(e,Ln._jsonSchema))return new Ln(e.latitude,e.longitude)}}Ln._jsonSchemaVersion="firestore/geoPoint/1.0",Ln._jsonSchema={type:Xe("string",Ln._jsonSchemaVersion),latitude:Xe("number"),longitude:Xe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(a,i){if(a.length!==i.length)return!1;for(let r=0;r<a.length;++r)if(a[r]!==i[r])return!1;return!0}(this._values,e._values)}toJSON(){return{type:_n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(fo(e,_n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new _n(e.vectorValues);throw new H(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_n._jsonSchemaVersion="firestore/vectorValue/1.0",_n._jsonSchema={type:Xe("string",_n._jsonSchemaVersion),vectorValues:Xe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iO=/^__.*__$/;class rO{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return this.fieldMask!==null?new fi(e,this.data,this.fieldMask,n,this.fieldTransforms):new mo(e,this.data,n,this.fieldTransforms)}}class yx{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return new fi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function vx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y(40011,{dataSource:t})}}class Ug{constructor(e,n,a,i,r,s){this.settings=e,this.databaseId=n,this.serializer=a,this.ignoreUndefinedProperties=i,r===void 0&&this.validatePath(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Ug({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var i;const n=(i=this.path)==null?void 0:i.child(e),a=this.contextWith({path:n,arrayElement:!1});return a.validatePathSegment(e),a}childContextForFieldPath(e){var i;const n=(i=this.path)==null?void 0:i.child(e),a=this.contextWith({path:n,arrayElement:!1});return a.validatePath(),a}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return bc(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(vx(this.dataSource)&&iO.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class sO{constructor(e,n,a){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=a||eh(e)}createContext(e,n,a,i=!1){return new Ug({dataSource:e,methodName:n,targetDoc:a,path:ct.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sh(t){const e=t._freezeSettings(),n=eh(t._databaseId);return new sO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function _x(t,e,n,a,i,r={}){const s=t.createContext(r.merge||r.mergeFields?2:0,e,n,i);zg("Data must be an object, but it was:",s,a);const o=bx(a,s);let u,c;if(r.merge)u=new Qt(s.fieldMask),c=s.fieldTransforms;else if(r.mergeFields){const f=[];for(const m of r.mergeFields){const d=Gi(e,m,n);if(!s.contains(d))throw new H(U.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);xx(f,d)||f.push(d)}u=new Qt(f),c=s.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,c=s.fieldTransforms;return new rO(new jt(o),u,c)}class lh extends rh{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lh}}class Pg extends rh{_toFieldTransform(e){return new QD(e.path,new Yl)}isEqual(e){return e instanceof Pg}}function lO(t,e,n,a){const i=t.createContext(1,e,n);zg("Data must be an object, but it was:",i,a);const r=[],s=jt.empty();hi(a,(u,c)=>{const f=Tx(e,u,n);c=Pt(c);const m=i.childContextForFieldPath(f);if(c instanceof lh)r.push(f);else{const d=vo(c,m);d!=null&&(r.push(f),s.set(f,d))}});const o=new Qt(r);return new yx(s,o,i.fieldTransforms)}function oO(t,e,n,a,i,r){const s=t.createContext(1,e,n),o=[Gi(e,a,n)],u=[i];if(r.length%2!=0)throw new H(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<r.length;d+=2)o.push(Gi(e,r[d])),u.push(r[d+1]);const c=[],f=jt.empty();for(let d=o.length-1;d>=0;--d)if(!xx(c,o[d])){const v=o[d];let R=u[d];R=Pt(R);const O=s.childContextForFieldPath(v);if(R instanceof lh)c.push(v);else{const D=vo(R,O);D!=null&&(c.push(v),f.set(v,D))}}const m=new Qt(c);return new yx(f,m,s.fieldTransforms)}function uO(t,e,n,a=!1){return vo(n,t.createContext(a?4:3,e))}function vo(t,e){if(Ex(t=Pt(t)))return zg("Unsupported field value:",e,t),bx(t,e);if(t instanceof rh)return function(a,i){if(!vx(i.dataSource))throw i.createError(`${a._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${a._methodName}() is not currently supported inside arrays`);const r=a._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(a,i){const r=[];let s=0;for(const o of a){let u=vo(o,i.childContextForArray(s));u==null&&(u={nullValue:"NULL_VALUE"}),r.push(u),s++}return{arrayValue:{values:r}}}(t,e)}return function(a,i){if((a=Pt(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return FD(i.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const r=Re.fromDate(a);return{timestampValue:gc(i.serializer,r)}}if(a instanceof Re){const r=new Re(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:gc(i.serializer,r)}}if(a instanceof Ln)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof cn)return{bytesValue:z1(i.serializer,a._byteString)};if(a instanceof Le){const r=i.databaseId,s=a.firestore._databaseId;if(!s.isEqual(r))throw i.createError(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:_g(a.firestore._databaseId||i.databaseId,a._key.path)}}if(a instanceof _n)return function(s,o){const u=s instanceof _n?s.toArray():s;return{mapValue:{fields:{[g1]:{stringValue:p1},[hc]:{arrayValue:{values:u.map(f=>{if(typeof f!="number")throw o.createError("VectorValues must only contain numeric values.");return gg(o.serializer,f)})}}}}}}(a,i);if(Q1(a))return a._toProto(i.serializer);throw i.createError(`Unsupported field value: ${Fc(a)}`)}(t,e)}function bx(t,e){const n={};return u1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hi(t,(a,i)=>{const r=vo(i,e.childContextForField(a));r!=null&&(n[a]=r)}),{mapValue:{fields:n}}}function Ex(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Re||t instanceof Ln||t instanceof cn||t instanceof Le||t instanceof rh||t instanceof _n||Q1(t))}function zg(t,e,n){if(!Ex(n)||!l1(n)){const a=Fc(n);throw a==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+a)}}function Gi(t,e,n){if((e=Pt(e))instanceof kg)return e._internalPath;if(typeof e=="string")return Tx(t,e);throw bc("Field path arguments must be of type string or ",t,!1,void 0,n)}const cO=new RegExp("[~\\*/\\[\\]]");function Tx(t,e,n){if(e.search(cO)>=0)throw bc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new kg(...e.split("."))._internalPath}catch{throw bc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function bc(t,e,n,a,i){const r=a&&!a.isEmpty(),s=i!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let u="";return(r||s)&&(u+=" (found",r&&(u+=` in field ${a}`),s&&(u+=` in document ${i}`),u+=")"),new H(U.INVALID_ARGUMENT,o+t+u)}function xx(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{convertValue(e,n="none"){switch(si(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ri(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Y(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const a={};return hi(e,(i,r)=>{a[i]=this.convertValue(r,n)}),a}convertVectorValue(e){var a,i,r;const n=(r=(i=(a=e.fields)==null?void 0:a[hc].arrayValue)==null?void 0:i.values)==null?void 0:r.map(s=>Pe(s.doubleValue));return new _n(n)}convertGeoPoint(e){return new Ln(Pe(e.latitude),Pe(e.longitude))}convertArray(e,n){return(e.values||[]).map(a=>this.convertValue(a,n))}convertServerTimestamp(e,n){switch(n){case"previous":const a=Qc(e);return a==null?null:this.convertValue(a,n);case"estimate":return this.convertTimestamp(ql(e));default:return null}}convertTimestamp(e){const n=ii(e);return new Re(n.seconds,n.nanos)}convertDocumentKey(e,n){const a=Ee.fromString(e);de(Y1(a),9688,{name:e});const i=new Hl(a.get(1),a.get(3)),r=new G(a.popFirst(5));return i.isEqual(n)||ha(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg extends hO{constructor(e){super(),this.firestore=e}convertBytes(e){return new cn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Le(this.firestore,null,n)}}function ar(){return new Pg("serverTimestamp")}const Bv="@firebase/firestore",qv="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(t){return function(n,a){if(typeof n!="object"||n===null)return!1;const i=n;for(const r of a)if(r in i&&typeof i[r]=="function")return!0;return!1}(t,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e,n,a,i,r){this._firestore=e,this._userDataWriter=n,this._key=a,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Le(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new fO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(Gi("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class fO extends Sx{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qg{}class Hg extends qg{}function qn(t,e,...n){let a=[];e instanceof qg&&a.push(e),a=a.concat(n),function(r){const s=r.filter(u=>u instanceof Fg).length,o=r.filter(u=>u instanceof oh).length;if(s>1||s>0&&o>0)throw new H(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const i of a)t=i._apply(t);return t}class oh extends Hg{constructor(e,n,a){super(),this._field=e,this._op=n,this._value=a,this.type="where"}static _create(e,n,a){return new oh(e,n,a)}_apply(e){const n=this._parse(e);return Cx(e._query,n),new pa(e.firestore,e.converter,Bd(e._query,n))}_parse(e){const n=sh(e.firestore);return function(r,s,o,u,c,f,m){let d;if(c.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new H(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Gv(m,f);const R=[];for(const O of m)R.push(Fv(u,r,O));d={arrayValue:{values:R}}}else d=Fv(u,r,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Gv(m,f),d=uO(o,s,m,f==="in"||f==="not-in");return Qe.create(c,f,d)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ma(t,e,n){const a=e,i=Gi("where",t);return oh._create(i,a,n)}class Fg extends qg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Fg(e,n)}_parse(e){const n=this._queryConstraints.map(a=>a._parse(e)).filter(a=>a.getFilters().length>0);return n.length===1?n[0]:En.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,r){let s=i;const o=r.getFlattenedFilters();for(const u of o)Cx(s,u),s=Bd(s,u)}(e._query,n),new pa(e.firestore,e.converter,Bd(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Gg extends Hg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Gg(e,n)}_apply(e){const n=function(i,r,s){if(i.startAt!==null)throw new H(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new H(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Gl(r,s)}(e._query,this._field,this._direction);return new pa(e.firestore,e.converter,LD(e._query,n))}}function Ax(t,e="asc"){const n=e,a=Gi("orderBy",t);return Gg._create(a,n)}class Yg extends Hg{constructor(e,n,a){super(),this.type=e,this._limit=n,this._limitType=a}static _create(e,n,a){return new Yg(e,n,a)}_apply(e){return new pa(e.firestore,e.converter,dc(e._query,this._limit,this._limitType))}}function Rx(t){return lD("limit",t),Yg._create("limit",t,"F")}function Fv(t,e,n){if(typeof(n=Pt(n))=="string"){if(n==="")throw new H(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!S1(e)&&n.indexOf("/")!==-1)throw new H(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const a=e.path.child(Ee.fromString(n));if(!G.isDocumentKey(a))throw new H(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return iv(t,new G(a))}if(n instanceof Le)return iv(t,n._key);throw new H(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fc(n)}.`)}function Gv(t,e){if(!Array.isArray(t)||t.length===0)throw new H(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Cx(t,e){const n=function(i,r){for(const s of i)for(const o of s.getFlattenedFilters())if(r.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new H(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function Nx(t,e,n){let a;return a=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,a}class al{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vi extends Sx{constructor(e,n,a,i,r,s){super(e,n,a,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Cu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const a=this._document.data.field(Gi("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new H(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Vi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Vi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Vi._jsonSchema={type:Xe("string",Vi._jsonSchemaVersion),bundleSource:Xe("string","DocumentSnapshot"),bundleName:Xe("string"),bundle:Xe("string")};class Cu extends Vi{data(e={}){return super.data(e)}}class ji{constructor(e,n,a,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new al(i.hasPendingWrites,i.fromCache),this.query=a}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(a=>{e.call(n,new Cu(this._firestore,this._userDataWriter,a.key,a,new al(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(o=>{const u=new Cu(i._firestore,i._userDataWriter,o.doc.key,o.doc,new al(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>r||o.type!==3).map(o=>{const u=new Cu(i._firestore,i._userDataWriter,o.doc.key,o.doc,new al(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,f=-1;return o.type!==0&&(c=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),f=s.indexOf(o.doc.key)),{type:dO(o.type),doc:u,oldIndex:c,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new H(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ji._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ug.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],a=[],i=[];return this.docs.forEach(r=>{r._document!==null&&(n.push(r._document),a.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),i.push(r.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function dO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ji._jsonSchemaVersion="firestore/querySnapshot/1.0",ji._jsonSchema={type:Xe("string",ji._jsonSchemaVersion),bundleSource:Xe("string","QuerySnapshot"),bundleName:Xe("string"),bundle:Xe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(t){t=kt(t,Le);const e=kt(t.firestore,da),n=ih(e);return KI(n,t._key).then(a=>Ix(e,t,a))}function di(t){t=kt(t,pa);const e=kt(t.firestore,da),n=ih(e),a=new Bg(e);return wx(t._query),WI(n,t._query).then(i=>new ji(e,a,t,i))}function Qg(t,e,n){t=kt(t,Le);const a=kt(t.firestore,da),i=Nx(t.converter,e,n),r=sh(a);return uh(a,[_x(r,"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,mn.none())])}function $g(t,e,n,...a){t=kt(t,Le);const i=kt(t.firestore,da),r=sh(i);let s;return s=typeof(e=Pt(e))=="string"||e instanceof kg?oO(r,"updateDoc",t._key,e,n,a):lO(r,"updateDoc",t._key,e),uh(i,[s.toMutation(t._key,mn.exists(!0))])}function mO(t){return uh(kt(t.firestore,da),[new pg(t._key,mn.none())])}function Xg(t,e){const n=kt(t.firestore,da),a=ya(t),i=Nx(t.converter,e),r=sh(t.firestore);return uh(n,[_x(r,"addDoc",a._key,i,t.converter!==null,{}).toMutation(a._key,mn.exists(!1))]).then(()=>a)}function _o(t,...e){var c,f,m;t=Pt(t);let n={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||Hv(e[a])||(n=e[a++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Hv(e[a])){const d=e[a];e[a]=(c=d.next)==null?void 0:c.bind(d),e[a+1]=(f=d.error)==null?void 0:f.bind(d),e[a+2]=(m=d.complete)==null?void 0:m.bind(d)}let r,s,o;if(t instanceof Le)s=kt(t.firestore,da),o=$c(t._key.path),r={next:d=>{e[a]&&e[a](Ix(s,t,d))},error:e[a+1],complete:e[a+2]};else{const d=kt(t,pa);s=kt(d.firestore,da),o=d._query;const v=new Bg(s);r={next:R=>{e[a]&&e[a](new ji(s,v,d,R))},error:e[a+1],complete:e[a+2]},wx(t._query)}const u=ih(s);return XI(u,o,i,r)}function uh(t,e){const n=ih(t);return JI(n,e)}function Ix(t,e,n){const a=n.docs.get(e._key),i=new Bg(t);return new Vi(t,i,e._key,a,new al(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){XN(QT),Pl(new Wr("firestore",(a,{instanceIdentifier:i,options:r})=>{const s=a.getProvider("app").getImmediate(),o=new da(new JN(a.getProvider("auth-internal")),new tD(s,a.getProvider("app-check-internal")),_D(s,i),s);return r={useFetchStreams:n,...r},o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),Ka(Bv,qv,e),Ka(Bv,qv,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox="firebasestorage.googleapis.com",Mx="storageBucket",gO=2*60*1e3,pO=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue extends er{constructor(e,n,a=0){super(Nf(e),`Firebase Storage: ${n} (${Nf(e)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ue.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Nf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ke;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ke||(ke={}));function Nf(t){return"storage/"+t}function Kg(){const t="An unknown error occurred, please check the error payload for server response.";return new Ue(ke.UNKNOWN,t)}function yO(t){return new Ue(ke.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function vO(t){return new Ue(ke.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function _O(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ue(ke.UNAUTHENTICATED,t)}function bO(){return new Ue(ke.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function EO(t){return new Ue(ke.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function TO(){return new Ue(ke.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function xO(){return new Ue(ke.CANCELED,"User canceled the upload/download.")}function SO(t){return new Ue(ke.INVALID_URL,"Invalid URL '"+t+"'.")}function wO(t){return new Ue(ke.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function AO(){return new Ue(ke.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Mx+"' property when initializing the app?")}function RO(){return new Ue(ke.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function CO(){return new Ue(ke.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function NO(t){return new Ue(ke.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Wd(t){return new Ue(ke.INVALID_ARGUMENT,t)}function Vx(){return new Ue(ke.APP_DELETED,"The Firebase app was deleted.")}function DO(t){return new Ue(ke.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function xl(t,e){return new Ue(ke.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ys(t){throw new Ue(ke.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let a;try{a=$t.makeFromUrl(e,n)}catch{return new $t(e,"")}if(a.path==="")return a;throw wO(e)}static makeFromUrl(e,n){let a=null;const i="([A-Za-z0-9.\\-_]+)";function r(N){N.path.charAt(N.path.length-1)==="/"&&(N.path_=N.path_.slice(0,-1))}const s="(/(.*))?$",o=new RegExp("^gs://"+i+s,"i"),u={bucket:1,path:3};function c(N){N.path_=decodeURIComponent(N.path)}const f="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",v=new RegExp(`^https?://${m}/${f}/b/${i}/o${d}`,"i"),R={bucket:1,path:3},O=n===Ox?"(?:storage.googleapis.com|storage.cloud.google.com)":n,D="([^?#]*)",x=new RegExp(`^https?://${O}/${i}/${D}`,"i"),_=[{regex:o,indices:u,postModify:r},{regex:v,indices:R,postModify:c},{regex:x,indices:{bucket:1,path:2},postModify:c}];for(let N=0;N<_.length;N++){const V=_[N],k=V.regex.exec(e);if(k){const E=k[V.indices.bucket];let b=k[V.indices.path];b||(b=""),a=new $t(E,b),V.postModify(a);break}}if(a==null)throw SO(e);return a}}class IO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OO(t,e,n){let a=1,i=null,r=null,s=!1,o=0;function u(){return o===2}let c=!1;function f(...D){c||(c=!0,e.apply(null,D))}function m(D){i=setTimeout(()=>{i=null,t(v,u())},D)}function d(){r&&clearTimeout(r)}function v(D,...x){if(c){d();return}if(D){d(),f.call(null,D,...x);return}if(u()||s){d(),f.call(null,D,...x);return}a<64&&(a*=2);let _;o===1?(o=2,_=0):_=(a+Math.random())*1e3,m(_)}let R=!1;function O(D){R||(R=!0,d(),!c&&(i!==null?(D||(o=2),clearTimeout(i),m(0)):D||(o=1)))}return m(0),r=setTimeout(()=>{s=!0,O(!0)},n),O}function MO(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VO(t){return t!==void 0}function jO(t){return typeof t=="object"&&!Array.isArray(t)}function Wg(t){return typeof t=="string"||t instanceof String}function Yv(t){return Jg()&&t instanceof Blob}function Jg(){return typeof Blob<"u"}function Qv(t,e,n,a){if(a<e)throw Wd(`Invalid value for '${t}'. Expected ${e} or greater.`);if(a>n)throw Wd(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(t,e,n){let a=e;return n==null&&(a=`https://${e}`),`${n}://${a}/v0${t}`}function jx(t){const e=encodeURIComponent;let n="?";for(const a in t)if(t.hasOwnProperty(a)){const i=e(a)+"="+e(t[a]);n=n+i+"&"}return n=n.slice(0,-1),n}var Li;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Li||(Li={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LO(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,r=e.indexOf(t)!==-1;return n||i||r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e,n,a,i,r,s,o,u,c,f,m,d=!0,v=!1){this.url_=e,this.method_=n,this.headers_=a,this.body_=i,this.successCodes_=r,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=f,this.connectionFactory_=m,this.retry=d,this.isUsingEmulator=v,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,O)=>{this.resolve_=R,this.reject_=O,this.start_()})}start_(){const e=(a,i)=>{if(i){a(!1,new nu(!1,null,!0));return}const r=this.connectionFactory_();this.pendingConnection_=r;const s=o=>{const u=o.loaded,c=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,c)};this.progressCallback_!==null&&r.addUploadProgressListener(s),r.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&r.removeUploadProgressListener(s),this.pendingConnection_=null;const o=r.getErrorCode()===Li.NO_ERROR,u=r.getStatus();if(!o||LO(u,this.additionalRetryCodes_)&&this.retry){const f=r.getErrorCode()===Li.ABORT;a(!1,new nu(!1,null,f));return}const c=this.successCodes_.indexOf(u)!==-1;a(!0,new nu(c,r))})},n=(a,i)=>{const r=this.resolve_,s=this.reject_,o=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(o,o.getResponse());VO(u)?r(u):r()}catch(u){s(u)}else if(o!==null){const u=Kg();u.serverResponse=o.getErrorText(),this.errorCallback_?s(this.errorCallback_(o,u)):s(u)}else if(i.canceled){const u=this.appDelete_?Vx():xO();s(u)}else{const u=TO();s(u)}};this.canceled_?n(!1,new nu(!1,null,!0)):this.backoffId_=OO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&MO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class nu{constructor(e,n,a){this.wasSuccessCode=e,this.connection=n,this.canceled=!!a}}function UO(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function PO(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function zO(t,e){e&&(t["X-Firebase-GMPID"]=e)}function BO(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function qO(t,e,n,a,i,r,s=!0,o=!1){const u=jx(t.urlParams),c=t.url+u,f=Object.assign({},t.headers);return zO(f,e),UO(f,n),PO(f,r),BO(f,a),new kO(c,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HO(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function FO(...t){const e=HO();if(e!==void 0){const n=new e;for(let a=0;a<t.length;a++)n.append(t[a]);return n.getBlob()}else{if(Jg())return new Blob(t);throw new Ue(ke.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function GO(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YO(t){if(typeof atob>"u")throw NO("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Df{constructor(e,n){this.data=e,this.contentType=n||null}}function QO(t,e){switch(t){case On.RAW:return new Df(Lx(e));case On.BASE64:case On.BASE64URL:return new Df(kx(t,e));case On.DATA_URL:return new Df(XO(e),KO(e))}throw Kg()}function Lx(t){const e=[];for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);if(a<=127)e.push(a);else if(a<=2047)e.push(192|a>>6,128|a&63);else if((a&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const r=a,s=t.charCodeAt(++n);a=65536|(r&1023)<<10|s&1023,e.push(240|a>>18,128|a>>12&63,128|a>>6&63,128|a&63)}else(a&64512)===56320?e.push(239,191,189):e.push(224|a>>12,128|a>>6&63,128|a&63)}return new Uint8Array(e)}function $O(t){let e;try{e=decodeURIComponent(t)}catch{throw xl(On.DATA_URL,"Malformed data URL.")}return Lx(e)}function kx(t,e){switch(t){case On.BASE64:{const i=e.indexOf("-")!==-1,r=e.indexOf("_")!==-1;if(i||r)throw xl(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case On.BASE64URL:{const i=e.indexOf("+")!==-1,r=e.indexOf("/")!==-1;if(i||r)throw xl(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=YO(e)}catch(i){throw i.message.includes("polyfill")?i:xl(t,"Invalid character found")}const a=new Uint8Array(n.length);for(let i=0;i<n.length;i++)a[i]=n.charCodeAt(i);return a}class Ux{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw xl(On.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const a=n[1]||null;a!=null&&(this.base64=WO(a,";base64"),this.contentType=this.base64?a.substring(0,a.length-7):a),this.rest=e.substring(e.indexOf(",")+1)}}function XO(t){const e=new Ux(t);return e.base64?kx(On.BASE64,e.rest):$O(e.rest)}function KO(t){return new Ux(t).contentType}function WO(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,n){let a=0,i="";Yv(e)?(this.data_=e,a=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),a=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),a=e.length),this.size_=a,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(Yv(this.data_)){const a=this.data_,i=GO(a,e,n);return i===null?null:new Oa(i)}else{const a=new Uint8Array(this.data_.buffer,e,n-e);return new Oa(a,!0)}}static getBlob(...e){if(Jg()){const n=e.map(a=>a instanceof Oa?a.data_:a);return new Oa(FO.apply(null,n))}else{const n=e.map(s=>Wg(s)?QO(On.RAW,s).data:s.data_);let a=0;n.forEach(s=>{a+=s.byteLength});const i=new Uint8Array(a);let r=0;return n.forEach(s=>{for(let o=0;o<s.length;o++)i[r++]=s[o]}),new Oa(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(t){let e;try{e=JSON.parse(t)}catch{return null}return jO(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JO(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function ZO(t,e){const n=e.split("/").filter(a=>a.length>0).join("/");return t.length===0?n:t+"/"+n}function zx(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e3(t,e){return e}class wt{constructor(e,n,a,i){this.server=e,this.local=n||e,this.writable=!!a,this.xform=i||e3}}let au=null;function t3(t){return!Wg(t)||t.length<2?t:zx(t)}function Bx(){if(au)return au;const t=[];t.push(new wt("bucket")),t.push(new wt("generation")),t.push(new wt("metageneration")),t.push(new wt("name","fullPath",!0));function e(r,s){return t3(s)}const n=new wt("name");n.xform=e,t.push(n);function a(r,s){return s!==void 0?Number(s):s}const i=new wt("size");return i.xform=a,t.push(i),t.push(new wt("timeCreated")),t.push(new wt("updated")),t.push(new wt("md5Hash",null,!0)),t.push(new wt("cacheControl",null,!0)),t.push(new wt("contentDisposition",null,!0)),t.push(new wt("contentEncoding",null,!0)),t.push(new wt("contentLanguage",null,!0)),t.push(new wt("contentType",null,!0)),t.push(new wt("metadata","customMetadata",!0)),au=t,au}function n3(t,e){function n(){const a=t.bucket,i=t.fullPath,r=new $t(a,i);return e._makeStorageReference(r)}Object.defineProperty(t,"ref",{get:n})}function a3(t,e,n){const a={};a.type="file";const i=n.length;for(let r=0;r<i;r++){const s=n[r];a[s.local]=s.xform(a,e[s.server])}return n3(a,t),a}function qx(t,e,n){const a=Px(e);return a===null?null:a3(t,a,n)}function i3(t,e,n,a){const i=Px(e);if(i===null||!Wg(i.downloadTokens))return null;const r=i.downloadTokens;if(r.length===0)return null;const s=encodeURIComponent;return r.split(",").map(c=>{const f=t.bucket,m=t.fullPath,d="/b/"+s(f)+"/o/"+s(m),v=Zg(d,n,a),R=jx({alt:"media",token:c});return v+R})[0]}function r3(t,e){const n={},a=e.length;for(let i=0;i<a;i++){const r=e[i];r.writable&&(n[r.server]=t[r.local])}return JSON.stringify(n)}class Hx{constructor(e,n,a,i){this.url=e,this.method=n,this.handler=a,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(t){if(!t)throw Kg()}function s3(t,e){function n(a,i){const r=qx(t,i,e);return Fx(r!==null),r}return n}function l3(t,e){function n(a,i){const r=qx(t,i,e);return Fx(r!==null),i3(r,i,t.host,t._protocol)}return n}function Gx(t){function e(n,a){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=bO():i=_O():n.getStatus()===402?i=vO(t.bucket):n.getStatus()===403?i=EO(t.path):i=a,i.status=n.getStatus(),i.serverResponse=a.serverResponse,i}return e}function o3(t){const e=Gx(t);function n(a,i){let r=e(a,i);return a.getStatus()===404&&(r=yO(t.path)),r.serverResponse=i.serverResponse,r}return n}function u3(t,e,n){const a=e.fullServerUrl(),i=Zg(a,t.host,t._protocol),r="GET",s=t.maxOperationRetryTime,o=new Hx(i,r,l3(t,n),s);return o.errorHandler=o3(e),o}function c3(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function h3(t,e,n){const a=Object.assign({},n);return a.fullPath=t.path,a.size=e.size(),a.contentType||(a.contentType=c3(null,e)),a}function f3(t,e,n,a,i){const r=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function o(){let _="";for(let N=0;N<2;N++)_=_+Math.random().toString().slice(2);return _}const u=o();s["Content-Type"]="multipart/related; boundary="+u;const c=h3(e,a,i),f=r3(c,n),m="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+c.contentType+`\r
\r
`,d=`\r
--`+u+"--",v=Oa.getBlob(m,a,d);if(v===null)throw RO();const R={name:c.fullPath},O=Zg(r,t.host,t._protocol),D="POST",x=t.maxUploadRetryTime,y=new Hx(O,D,s3(t,n),x);return y.urlParams=R,y.headers=s,y.body=v.uploadData(),y.errorHandler=Gx(e),y}class d3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Li.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Li.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Li.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,a,i,r){if(this.sent_)throw Ys("cannot .send() more than once");if(ho(e)&&a&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),r!==void 0)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ys("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ys("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ys("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ys("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class m3 extends d3{initXhr(){this.xhr_.responseType="text"}}function Yx(){return new m3}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,n){this._service=e,n instanceof $t?this._location=n:this._location=$t.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Yi(e,n)}get root(){const e=new $t(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return zx(this._location.path)}get storage(){return this._service}get parent(){const e=JO(this._location.path);if(e===null)return null;const n=new $t(this._location.bucket,e);return new Yi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw DO(e)}}function g3(t,e,n){t._throwIfRoot("uploadBytes");const a=f3(t.storage,t._location,Bx(),new Oa(e,!0),n);return t.storage.makeRequestWithTokens(a,Yx).then(i=>({metadata:i,ref:t}))}function p3(t){t._throwIfRoot("getDownloadURL");const e=u3(t.storage,t._location,Bx());return t.storage.makeRequestWithTokens(e,Yx).then(n=>{if(n===null)throw CO();return n})}function y3(t,e){const n=ZO(t._location.path,e),a=new $t(t._location.bucket,n);return new Yi(t.storage,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v3(t){return/^[A-Za-z]+:\/\//.test(t)}function _3(t,e){return new Yi(t,e)}function Qx(t,e){if(t instanceof ep){const n=t;if(n._bucket==null)throw AO();const a=new Yi(n,n._bucket);return e!=null?Qx(a,e):a}else return e!==void 0?y3(t,e):t}function b3(t,e){if(e&&v3(e)){if(t instanceof ep)return _3(t,e);throw Wd("To use ref(service, url), the first argument must be a Storage instance.")}else return Qx(t,e)}function $v(t,e){const n=e==null?void 0:e[Mx];return n==null?null:$t.makeFromBucketSpec(n,t)}function E3(t,e,n,a={}){t.host=`${e}:${n}`;const i=ho(e);i&&(UT(`https://${t.host}/b`),zT("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:r}=a;r&&(t._overrideAuthToken=typeof r=="string"?r:PT(r,t.app.options.projectId))}class ep{constructor(e,n,a,i,r,s=!1){this.app=e,this._authProvider=n,this._appCheckProvider=a,this._url=i,this._firebaseVersion=r,this._isUsingEmulator=s,this._bucket=null,this._host=Ox,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=gO,this._maxUploadRetryTime=pO,this._requests=new Set,i!=null?this._bucket=$t.makeFromBucketSpec(i,this._host):this._bucket=$v(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=$t.makeFromBucketSpec(this._url,e):this._bucket=$v(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Qv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Qv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(YT(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Yi(this,e)}_makeRequest(e,n,a,i,r=!0){if(this._deleted)return new IO(Vx());{const s=qO(e,this._appId,a,i,n,this._firebaseVersion,r,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,n){const[a,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,a,i).getPromise()}}const Xv="@firebase/storage",Kv="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x="storage";function Xx(t,e,n){return t=Pt(t),g3(t,e,n)}function Kx(t){return t=Pt(t),p3(t)}function Wx(t,e){return t=Pt(t),b3(t,e)}function T3(t=XT(),e){t=Pt(t);const a=GT(t,$x).getImmediate({identifier:e}),i=LT("storage");return i&&x3(a,...i),a}function x3(t,e,n,a={}){E3(t,e,n,a)}function S3(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),a=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new ep(n,a,i,e,QT)}function w3(){Pl(new Wr($x,S3,"PUBLIC").setMultipleInstances(!0)),Ka(Xv,Kv,""),Ka(Xv,Kv,"esm2020")}w3();var A3="firebase",R3="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ka(A3,R3,"app");const C3={apiKey:"AIzaSyDDQ8mE8kDssOBeai82HGWtvmC_b1t92kI",authDomain:"family-fitness-3494e.firebaseapp.com",projectId:"family-fitness-3494e",storageBucket:"family-fitness-3494e.firebasestorage.app",messagingSenderId:"546604582637",appId:"1:546604582637:web:18e8899628b0c103f8aee4"},Jx=$T(C3),Bt=nO(Jx),Zx=T3(Jx),eS=()=>_s(Bt,"users"),bo=()=>_s(Bt,"workouts"),tS=()=>_s(Bt,"weekly_summaries"),nS=()=>_s(Bt,"absences"),N3=()=>_s(Bt,"flagged_workouts");async function D3(){return(await di(eS())).docs.map(e=>({id:e.id,...e.data()}))}async function Wv(t){const e=await Dx(ya(Bt,"users",t));return e.exists()?{id:e.id,...e.data()}:null}async function Nu(t,e){await Qg(ya(Bt,"users",t),e,{merge:!0})}function I3(t,e){return _o(eS(),n=>t(n.docs.map(a=>({id:a.id,...a.data()}))),n=>{console.error("subscribeUsers error:",n),e==null||e(n)})}async function O3(t){return Xg(bo(),{...t,createdAt:ar()})}async function M3(t){const e=qn(bo(),ma("weekId","==",t));return(await di(e)).docs.map(a=>({id:a.id,...a.data()}))}async function aS(t){const e=qn(bo(),ma("userId","==",t));return(await di(e)).docs.map(a=>({id:a.id,...a.data()})).sort((a,i)=>(i.date||"").localeCompare(a.date||""))}function V3(t,e,n){const a=qn(bo(),ma("weekId","==",t));return _o(a,i=>e(i.docs.map(r=>({id:r.id,...r.data()}))),i=>{console.error("subscribeWorkoutsForWeek error:",i),n==null||n(i)})}async function Jv(t,e,n){const a=`${t}_${e}`;await Qg(ya(Bt,"weekly_summaries",a),{userId:t,weekId:e,...n,updatedAt:ar()},{merge:!0})}async function j3(t){const e=qn(tS(),ma("weekId","==",t));return(await di(e)).docs.map(a=>({id:a.id,...a.data()}))}async function L3(t){const e=qn(tS(),ma("userId","==",t));return(await di(e)).docs.map(a=>({id:a.id,...a.data()})).sort((a,i)=>(i.weekId||"").localeCompare(a.weekId||""))}async function k3(t){return Xg(nS(),{...t,createdAt:ar()})}async function U3(){return(await di(nS())).docs.map(e=>({id:e.id,...e.data()}))}function P3(t,e,n=50){const a=qn(bo(),Ax("createdAt","desc"),Rx(n));return _o(a,i=>t(i.docs.map(r=>({id:r.id,...r.data()}))),i=>{console.error("subscribeAllWorkouts error:",i),e==null||e(i)})}const ch=()=>_s(Bt,"justifications");async function z3(t){return Xg(ch(),{...t,createdAt:ar()})}async function Zv(t,e){const n=qn(ch(),ma("userId","==",t),ma("weekId","==",e)),a=await di(n);return a.empty?null:{id:a.docs[0].id,...a.docs[0].data()}}async function B3(t,e){await $g(ya(Bt,"justifications",t),{...e,updatedAt:ar()})}async function q3(t){const e=qn(ch(),ma("weekId","==",t));return(await di(e)).docs.map(a=>({id:a.id,...a.data()}))}function H3(t,e){const n=qn(ch(),Ax("createdAt","desc"),Rx(20));return _o(n,a=>t(a.docs.map(i=>({id:i.id,...i.data()}))),a=>{console.error("subscribeJustifications error:",a),e==null||e(a)})}async function F3(t,e,n){const a=Date.now(),i=t.name.split(".").pop(),r=`justifications/${e}/${n}_${a}.${i}`,s=Wx(Zx,r),o=await Xx(s,t);return Kx(o.ref)}async function G3(t,e,n){const a=ya(Bt,"flagged_workouts",t);if((await Dx(a)).exists())throw new Error("Este ejercicio ya fue reportado.");await Qg(a,{workoutId:t,flaggedBy:e,workoutOwnerId:n,status:"pending",votes:{[e]:"fake"},createdAt:ar(),resolvedAt:null})}async function Y3(t,e,n){const a=ya(Bt,"flagged_workouts",t);await $g(a,{[`votes.${e}`]:n})}async function e_(t,e){const n=ya(Bt,"flagged_workouts",t);await $g(n,{status:e,resolvedAt:ar()})}async function Q3(t){await mO(ya(Bt,"workouts",t))}function $3(t,e){const n=qn(N3(),ma("status","==","pending"));return _o(n,a=>t(a.docs.map(i=>({id:i.id,...i.data()}))),a=>{console.error("subscribeFlaggedWorkouts error:",a),e==null||e(a)})}async function X3(t,e,n){const a=Date.now(),i=t.name.split(".").pop(),r=`workouts/${e}/${n}_${a}.${i}`,s=Wx(Zx,r),o=await Xx(s,t);return Kx(o.ref)}const iS=M.createContext(null);function K3({children:t}){const[e,n]=M.useState(null),[a,i]=M.useState(!0);M.useEffect(()=>{const u=localStorage.getItem("fitfamily_user");if(u)try{const{userId:c}=JSON.parse(u),f=hn.find(m=>m.id===c);f&&n(f)}catch{localStorage.removeItem("fitfamily_user")}i(!1)},[]);const r=M.useCallback(async u=>{const c=await Wv(u);return(c==null?void 0:c.pin)||null},[]),s=M.useCallback(async(u,c)=>{const f=await Wv(u),m=f==null?void 0:f.pin;if(m){if(m!==c)throw new Error("PIN incorrecto")}else await Nu(u,{pin:c});const d=hn.find(v=>v.id===u);return n(d),localStorage.setItem("fitfamily_user",JSON.stringify({userId:u})),d},[]),o=M.useCallback(()=>{n(null),localStorage.removeItem("fitfamily_user")},[]);return p.jsx(iS.Provider,{value:{currentUser:e,isLoggedIn:!!e,loading:a,login:s,logout:o,checkUserPin:r},children:t})}function mi(){const t=M.useContext(iS);if(!t)throw new Error("useAuth must be used within AuthProvider");return t}const rS=6048e5,W3=864e5,sS=6e4,lS=36e5,t_=Symbol.for("constructDateFrom");function Un(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&t_ in t?t[t_](e):t instanceof Date?new t.constructor(e):new Date(e)}function Ct(t,e){return Un(e||t,t)}function J3(t,e,n){const a=Ct(t,n==null?void 0:n.in);return isNaN(e)?Un(t,NaN):(e&&a.setDate(a.getDate()+e),a)}let Z3={};function hh(){return Z3}function as(t,e){var o,u,c,f;const n=hh(),a=(e==null?void 0:e.weekStartsOn)??((u=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((f=(c=n.locale)==null?void 0:c.options)==null?void 0:f.weekStartsOn)??0,i=Ct(t,e==null?void 0:e.in),r=i.getDay(),s=(r<a?7:0)+r-a;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function Ec(t,e){return as(t,{...e,weekStartsOn:1})}function oS(t,e){const n=Ct(t,e==null?void 0:e.in),a=n.getFullYear(),i=Un(n,0);i.setFullYear(a+1,0,4),i.setHours(0,0,0,0);const r=Ec(i),s=Un(n,0);s.setFullYear(a,0,4),s.setHours(0,0,0,0);const o=Ec(s);return n.getTime()>=r.getTime()?a+1:n.getTime()>=o.getTime()?a:a-1}function n_(t){const e=Ct(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function eM(t,...e){const n=Un.bind(null,e.find(a=>typeof a=="object"));return e.map(n)}function a_(t,e){const n=Ct(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function tM(t,e,n){const[a,i]=eM(n==null?void 0:n.in,t,e),r=a_(a),s=a_(i),o=+r-n_(r),u=+s-n_(s);return Math.round((o-u)/W3)}function nM(t,e){const n=oS(t,e),a=Un(t,0);return a.setFullYear(n,0,4),a.setHours(0,0,0,0),Ec(a)}function fh(t,e,n){return J3(t,e*7,n)}function aM(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function iM(t){return!(!aM(t)&&typeof t!="number"||isNaN(+Ct(t)))}function rM(t,e){const n=Ct(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function sM(t,e){const n=e==null?void 0:e.weekStartsOn,a=Ct(t,e==null?void 0:e.in),i=a.getDay(),r=(i<n?-7:0)+6-(i-n);return a.setDate(a.getDate()+r),a.setHours(23,59,59,999),a}const lM={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},oM=(t,e,n)=>{let a;const i=lM[t];return typeof i=="string"?a=i:e===1?a=i.one:a=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a};function Pr(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const uM={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},cM={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},hM={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},fM={date:Pr({formats:uM,defaultWidth:"full"}),time:Pr({formats:cM,defaultWidth:"full"}),dateTime:Pr({formats:hM,defaultWidth:"full"})},dM={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},mM=(t,e,n,a)=>dM[t];function Rn(t){return(e,n)=>{const a=n!=null&&n.context?String(n.context):"standalone";let i;if(a==="formatting"&&t.formattingValues){const s=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):s;i=t.formattingValues[o]||t.formattingValues[s]}else{const s=t.defaultWidth,o=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[o]||t.values[s]}const r=t.argumentCallback?t.argumentCallback(e):e;return i[r]}}const gM={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},pM={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},yM={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},vM={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},_M={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},bM={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},EM=(t,e)=>{const n=Number(t),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},TM={ordinalNumber:EM,era:Rn({values:gM,defaultWidth:"wide"}),quarter:Rn({values:pM,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Rn({values:yM,defaultWidth:"wide"}),day:Rn({values:vM,defaultWidth:"wide"}),dayPeriod:Rn({values:_M,defaultWidth:"wide",formattingValues:bM,defaultFormattingWidth:"wide"})};function Cn(t){return(e,n={})=>{const a=n.width,i=a&&t.matchPatterns[a]||t.matchPatterns[t.defaultMatchWidth],r=e.match(i);if(!r)return null;const s=r[0],o=a&&t.parsePatterns[a]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(o)?SM(o,m=>m.test(s)):xM(o,m=>m.test(s));let c;c=t.valueCallback?t.valueCallback(u):u,c=n.valueCallback?n.valueCallback(c):c;const f=e.slice(s.length);return{value:c,rest:f}}}function xM(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function SM(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function uS(t){return(e,n={})=>{const a=e.match(t.matchPattern);if(!a)return null;const i=a[0],r=e.match(t.parsePattern);if(!r)return null;let s=t.valueCallback?t.valueCallback(r[0]):r[0];s=n.valueCallback?n.valueCallback(s):s;const o=e.slice(i.length);return{value:s,rest:o}}}const wM=/^(\d+)(th|st|nd|rd)?/i,AM=/\d+/i,RM={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},CM={any:[/^b/i,/^(a|c)/i]},NM={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},DM={any:[/1/i,/2/i,/3/i,/4/i]},IM={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},OM={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},MM={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},VM={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},jM={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},LM={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},kM={ordinalNumber:uS({matchPattern:wM,parsePattern:AM,valueCallback:t=>parseInt(t,10)}),era:Cn({matchPatterns:RM,defaultMatchWidth:"wide",parsePatterns:CM,defaultParseWidth:"any"}),quarter:Cn({matchPatterns:NM,defaultMatchWidth:"wide",parsePatterns:DM,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Cn({matchPatterns:IM,defaultMatchWidth:"wide",parsePatterns:OM,defaultParseWidth:"any"}),day:Cn({matchPatterns:MM,defaultMatchWidth:"wide",parsePatterns:VM,defaultParseWidth:"any"}),dayPeriod:Cn({matchPatterns:jM,defaultMatchWidth:"any",parsePatterns:LM,defaultParseWidth:"any"})},UM={code:"en-US",formatDistance:oM,formatLong:fM,formatRelative:mM,localize:TM,match:kM,options:{weekStartsOn:0,firstWeekContainsDate:1}};function PM(t,e){const n=Ct(t,e==null?void 0:e.in);return tM(n,rM(n))+1}function zM(t,e){const n=Ct(t,e==null?void 0:e.in),a=+Ec(n)-+nM(n);return Math.round(a/rS)+1}function cS(t,e){var f,m,d,v;const n=Ct(t,e==null?void 0:e.in),a=n.getFullYear(),i=hh(),r=(e==null?void 0:e.firstWeekContainsDate)??((m=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??i.firstWeekContainsDate??((v=(d=i.locale)==null?void 0:d.options)==null?void 0:v.firstWeekContainsDate)??1,s=Un((e==null?void 0:e.in)||t,0);s.setFullYear(a+1,0,r),s.setHours(0,0,0,0);const o=as(s,e),u=Un((e==null?void 0:e.in)||t,0);u.setFullYear(a,0,r),u.setHours(0,0,0,0);const c=as(u,e);return+n>=+o?a+1:+n>=+c?a:a-1}function BM(t,e){var o,u,c,f;const n=hh(),a=(e==null?void 0:e.firstWeekContainsDate)??((u=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(c=n.locale)==null?void 0:c.options)==null?void 0:f.firstWeekContainsDate)??1,i=cS(t,e),r=Un((e==null?void 0:e.in)||t,0);return r.setFullYear(i,0,a),r.setHours(0,0,0,0),as(r,e)}function qM(t,e){const n=Ct(t,e==null?void 0:e.in),a=+as(n,e)-+BM(n,e);return Math.round(a/rS)+1}function me(t,e){const n=t<0?"-":"",a=Math.abs(t).toString().padStart(e,"0");return n+a}const wa={y(t,e){const n=t.getFullYear(),a=n>0?n:1-n;return me(e==="yy"?a%100:a,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):me(n+1,2)},d(t,e){return me(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return me(t.getHours()%12||12,e.length)},H(t,e){return me(t.getHours(),e.length)},m(t,e){return me(t.getMinutes(),e.length)},s(t,e){return me(t.getSeconds(),e.length)},S(t,e){const n=e.length,a=t.getMilliseconds(),i=Math.trunc(a*Math.pow(10,n-3));return me(i,e.length)}},ur={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},i_={G:function(t,e,n){const a=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});case"GGGG":default:return n.era(a,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const a=t.getFullYear(),i=a>0?a:1-a;return n.ordinalNumber(i,{unit:"year"})}return wa.y(t,e)},Y:function(t,e,n,a){const i=cS(t,a),r=i>0?i:1-i;if(e==="YY"){const s=r%100;return me(s,2)}return e==="Yo"?n.ordinalNumber(r,{unit:"year"}):me(r,e.length)},R:function(t,e){const n=oS(t);return me(n,e.length)},u:function(t,e){const n=t.getFullYear();return me(n,e.length)},Q:function(t,e,n){const a=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(a);case"QQ":return me(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(t,e,n){const a=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(a);case"qq":return me(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(t,e,n){const a=t.getMonth();switch(e){case"M":case"MM":return wa.M(t,e);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(t,e,n){const a=t.getMonth();switch(e){case"L":return String(a+1);case"LL":return me(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(t,e,n,a){const i=qM(t,a);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):me(i,e.length)},I:function(t,e,n){const a=zM(t);return e==="Io"?n.ordinalNumber(a,{unit:"week"}):me(a,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):wa.d(t,e)},D:function(t,e,n){const a=PM(t);return e==="Do"?n.ordinalNumber(a,{unit:"dayOfYear"}):me(a,e.length)},E:function(t,e,n){const a=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});case"EEEE":default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(t,e,n,a){const i=t.getDay(),r=(i-a.weekStartsOn+8)%7||7;switch(e){case"e":return String(r);case"ee":return me(r,2);case"eo":return n.ordinalNumber(r,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,a){const i=t.getDay(),r=(i-a.weekStartsOn+8)%7||7;switch(e){case"c":return String(r);case"cc":return me(r,e.length);case"co":return n.ordinalNumber(r,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const a=t.getDay(),i=a===0?7:a;switch(e){case"i":return String(i);case"ii":return me(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});case"iiii":default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const a=t.getHours();let i;switch(a===12?i=ur.noon:a===0?i=ur.midnight:i=a/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const a=t.getHours();let i;switch(a>=17?i=ur.evening:a>=12?i=ur.afternoon:a>=4?i=ur.morning:i=ur.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let a=t.getHours()%12;return a===0&&(a=12),n.ordinalNumber(a,{unit:"hour"})}return wa.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):wa.H(t,e)},K:function(t,e,n){const a=t.getHours()%12;return e==="Ko"?n.ordinalNumber(a,{unit:"hour"}):me(a,e.length)},k:function(t,e,n){let a=t.getHours();return a===0&&(a=24),e==="ko"?n.ordinalNumber(a,{unit:"hour"}):me(a,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):wa.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):wa.s(t,e)},S:function(t,e){return wa.S(t,e)},X:function(t,e,n){const a=t.getTimezoneOffset();if(a===0)return"Z";switch(e){case"X":return s_(a);case"XXXX":case"XX":return Ri(a);case"XXXXX":case"XXX":default:return Ri(a,":")}},x:function(t,e,n){const a=t.getTimezoneOffset();switch(e){case"x":return s_(a);case"xxxx":case"xx":return Ri(a);case"xxxxx":case"xxx":default:return Ri(a,":")}},O:function(t,e,n){const a=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+r_(a,":");case"OOOO":default:return"GMT"+Ri(a,":")}},z:function(t,e,n){const a=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+r_(a,":");case"zzzz":default:return"GMT"+Ri(a,":")}},t:function(t,e,n){const a=Math.trunc(+t/1e3);return me(a,e.length)},T:function(t,e,n){return me(+t,e.length)}};function r_(t,e=""){const n=t>0?"-":"+",a=Math.abs(t),i=Math.trunc(a/60),r=a%60;return r===0?n+String(i):n+String(i)+e+me(r,2)}function s_(t,e){return t%60===0?(t>0?"-":"+")+me(Math.abs(t)/60,2):Ri(t,e)}function Ri(t,e=""){const n=t>0?"-":"+",a=Math.abs(t),i=me(Math.trunc(a/60),2),r=me(a%60,2);return n+i+e+r}const l_=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},hS=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},HM=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],a=n[1],i=n[2];if(!i)return l_(t,e);let r;switch(a){case"P":r=e.dateTime({width:"short"});break;case"PP":r=e.dateTime({width:"medium"});break;case"PPP":r=e.dateTime({width:"long"});break;case"PPPP":default:r=e.dateTime({width:"full"});break}return r.replace("{{date}}",l_(a,e)).replace("{{time}}",hS(i,e))},FM={p:hS,P:HM},GM=/^D+$/,YM=/^Y+$/,QM=["D","DD","YY","YYYY"];function $M(t){return GM.test(t)}function XM(t){return YM.test(t)}function KM(t,e,n){const a=WM(t,e,n);if(console.warn(a),QM.includes(t))throw new RangeError(a)}function WM(t,e,n){const a=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${a} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const JM=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ZM=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,eV=/^'([^]*?)'?$/,tV=/''/g,nV=/[a-zA-Z]/;function Jd(t,e,n){var f,m,d,v,R,O,D,x;const a=hh(),i=(n==null?void 0:n.locale)??a.locale??UM,r=(n==null?void 0:n.firstWeekContainsDate)??((m=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??a.firstWeekContainsDate??((v=(d=a.locale)==null?void 0:d.options)==null?void 0:v.firstWeekContainsDate)??1,s=(n==null?void 0:n.weekStartsOn)??((O=(R=n==null?void 0:n.locale)==null?void 0:R.options)==null?void 0:O.weekStartsOn)??a.weekStartsOn??((x=(D=a.locale)==null?void 0:D.options)==null?void 0:x.weekStartsOn)??0,o=Ct(t,n==null?void 0:n.in);if(!iM(o))throw new RangeError("Invalid time value");let u=e.match(ZM).map(y=>{const _=y[0];if(_==="p"||_==="P"){const N=FM[_];return N(y,i.formatLong)}return y}).join("").match(JM).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const _=y[0];if(_==="'")return{isToken:!1,value:aV(y)};if(i_[_])return{isToken:!0,value:y};if(_.match(nV))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");return{isToken:!1,value:y}});i.localize.preprocessor&&(u=i.localize.preprocessor(o,u));const c={firstWeekContainsDate:r,weekStartsOn:s,locale:i};return u.map(y=>{if(!y.isToken)return y.value;const _=y.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&XM(_)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&$M(_))&&KM(_,e,String(t));const N=i_[_[0]];return N(o,_,i.localize,c)}).join("")}function aV(t){const e=t.match(eV);return e?e[1].replace(tV,"'"):t}function iV(t,e){const n=()=>Un(e==null?void 0:e.in,NaN),i=oV(t);let r;if(i.date){const c=uV(i.date,2);r=cV(c.restDateString,c.year)}if(!r||isNaN(+r))return n();const s=+r;let o=0,u;if(i.time&&(o=hV(i.time),isNaN(o)))return n();if(i.timezone){if(u=fV(i.timezone),isNaN(u))return n()}else{const c=new Date(s+o),f=Ct(0,e==null?void 0:e.in);return f.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),f.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),f}return Ct(s+o+u,e==null?void 0:e.in)}const iu={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},rV=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,sV=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,lV=/^([+-])(\d{2})(?::?(\d{2}))?$/;function oV(t){const e={},n=t.split(iu.dateTimeDelimiter);let a;if(n.length>2)return e;if(/:/.test(n[0])?a=n[0]:(e.date=n[0],a=n[1],iu.timeZoneDelimiter.test(e.date)&&(e.date=t.split(iu.timeZoneDelimiter)[0],a=t.substr(e.date.length,t.length))),a){const i=iu.timezone.exec(a);i?(e.time=a.replace(i[1],""),e.timezone=i[1]):e.time=a}return e}function uV(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),a=t.match(n);if(!a)return{year:NaN,restDateString:""};const i=a[1]?parseInt(a[1]):null,r=a[2]?parseInt(a[2]):null;return{year:r===null?i:r*100,restDateString:t.slice((a[1]||a[2]).length)}}function cV(t,e){if(e===null)return new Date(NaN);const n=t.match(rV);if(!n)return new Date(NaN);const a=!!n[4],i=Qs(n[1]),r=Qs(n[2])-1,s=Qs(n[3]),o=Qs(n[4]),u=Qs(n[5])-1;if(a)return yV(e,o,u)?dV(e,o,u):new Date(NaN);{const c=new Date(0);return!gV(e,r,s)||!pV(e,i)?new Date(NaN):(c.setUTCFullYear(e,r,Math.max(i,s)),c)}}function Qs(t){return t?parseInt(t):1}function hV(t){const e=t.match(sV);if(!e)return NaN;const n=If(e[1]),a=If(e[2]),i=If(e[3]);return vV(n,a,i)?n*lS+a*sS+i*1e3:NaN}function If(t){return t&&parseFloat(t.replace(",","."))||0}function fV(t){if(t==="Z")return 0;const e=t.match(lV);if(!e)return 0;const n=e[1]==="+"?-1:1,a=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return _V(a,i)?n*(a*lS+i*sS):NaN}function dV(t,e,n){const a=new Date(0);a.setUTCFullYear(t,0,4);const i=a.getUTCDay()||7,r=(e-1)*7+n+1-i;return a.setUTCDate(a.getUTCDate()+r),a}const mV=[31,null,31,30,31,30,31,31,30,31,30,31];function fS(t){return t%400===0||t%4===0&&t%100!==0}function gV(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(mV[e]||(fS(t)?29:28))}function pV(t,e){return e>=1&&e<=(fS(t)?366:365)}function yV(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function vV(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function _V(t,e){return e>=0&&e<=59}function bV(t,e,n){return fh(t,-1,n)}const EV={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 da",other:"{{count}} das"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 ao",other:"alrededor de {{count}} aos"},xYears:{one:"1 ao",other:"{{count}} aos"},overXYears:{one:"ms de 1 ao",other:"ms de {{count}} aos"},almostXYears:{one:"casi 1 ao",other:"casi {{count}} aos"}},TV=(t,e,n)=>{let a;const i=EV[t];return typeof i=="string"?a=i:e===1?a=i.one:a=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"en "+a:"hace "+a:a},xV={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},SV={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},wV={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},AV={date:Pr({formats:xV,defaultWidth:"full"}),time:Pr({formats:SV,defaultWidth:"full"}),dateTime:Pr({formats:wV,defaultWidth:"full"})},RV={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'maana a la' p",nextWeek:"eeee 'a la' p",other:"P"},CV={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'maana a las' p",nextWeek:"eeee 'a las' p",other:"P"},NV=(t,e,n,a)=>e.getHours()!==1?CV[t]:RV[t],DV={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despus de cristo"]},IV={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},OV={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},MV={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s"],abbreviated:["dom","lun","mar","mi","jue","vie","sb"],wide:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},VV={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"}},jV={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},LV=(t,e)=>Number(t)+"",kV={ordinalNumber:LV,era:Rn({values:DV,defaultWidth:"wide"}),quarter:Rn({values:IV,defaultWidth:"wide",argumentCallback:t=>Number(t)-1}),month:Rn({values:OV,defaultWidth:"wide"}),day:Rn({values:MV,defaultWidth:"wide"}),dayPeriod:Rn({values:VV,defaultWidth:"wide",formattingValues:jV,defaultFormattingWidth:"wide"})},UV=/^(\d+)()?/i,PV=/\d+/i,zV={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[u]n|despu[e]s de cristo|era com[u]n)/i},BV={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[u]n)/i,/^(despu[e]s de cristo|era com[u]n)/i]},qV={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},HV={any:[/1/i,/2/i,/3/i,/4/i]},FV={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},GV={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},YV={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[a])/i,abbreviated:/^(dom|lun|mar|mi[e]|jue|vie|s[a]b)/i,wide:/^(domingo|lunes|martes|mi[e]rcoles|jueves|viernes|s[a]bado)/i},QV={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},$V={narrow:/^(a|p|mn|md|(de la|a las) (maana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (maana|tarde|noche))/i},XV={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/maana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},KV={ordinalNumber:uS({matchPattern:UV,parsePattern:PV,valueCallback:function(t){return parseInt(t,10)}}),era:Cn({matchPatterns:zV,defaultMatchWidth:"wide",parsePatterns:BV,defaultParseWidth:"any"}),quarter:Cn({matchPatterns:qV,defaultMatchWidth:"wide",parsePatterns:HV,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Cn({matchPatterns:FV,defaultMatchWidth:"wide",parsePatterns:GV,defaultParseWidth:"any"}),day:Cn({matchPatterns:YV,defaultMatchWidth:"wide",parsePatterns:QV,defaultParseWidth:"any"}),dayPeriod:Cn({matchPatterns:$V,defaultMatchWidth:"any",parsePatterns:XV,defaultParseWidth:"any"})},o_={code:"es",formatDistance:TV,formatLong:AV,formatRelative:NV,localize:kV,match:KV,options:{weekStartsOn:1,firstWeekContainsDate:1}};function is(t=new Date){const e=typeof t=="string"?iV(t):t,n=as(e,{weekStartsOn:1}),a=n.getFullYear(),r=new Date(a,0,1).getDay()||7,s=new Date(a,0,1+(1-r)),o=n-s,u=Math.round(o/(7*24*60*60*1e3))+1;return`${a}-W${String(u).padStart(2,"0")}`}function tp(t){const[e,n]=t.split("-W"),a=parseInt(e),i=parseInt(n),s=new Date(a,0,1).getDay()||7,o=new Date(a,0,1+(1-s)),u=fh(o,i-1),c=sM(u,{weekStartsOn:1});return{start:u,end:c}}function WV(t,e=2,n=2){const{start:a}=tp(t),i=[];for(let r=-e;r<=n;r++){if(r===0)continue;const s=fh(a,r);i.push(is(s))}return i}function JV(t){const{start:e}=tp(t);return is(bV(e))}function Tc(t){const{start:e,end:n}=tp(t);return`${Jd(e,"d 'de' MMM",{locale:o_})} - ${Jd(n,"d 'de' MMM",{locale:o_})}`}function ZV(){const[t,e]=M.useState([]),[n,a]=M.useState([]),[i,r]=M.useState([]),[s,o]=M.useState([]),[u,c]=M.useState(!0),[f,m]=M.useState(null),[d,v]=M.useState(0),R=is();M.useEffect(()=>{let V,k,E;async function b(){c(!0),m(null),E=setTimeout(()=>{c(!1),m("Tiempo de espera agotado. Revisa tu conexin o la configuracin de Firebase.")},15e3);try{const S=await D3();for(const I of hn){const A=S.find(fe=>fe.id===I.id);A?(A.name!==I.name||A.avatar!==I.avatar)&&await Nu(I.id,{name:I.name,avatar:I.avatar}):await Nu(I.id,{name:I.name,avatar:I.avatar,walletBalance:0,extraLives:0,currentFineLevel:Ko,consecutiveMisses:0,consecutiveSuccesses:0,hasShield:!1})}const C=await U3();o(C),V=I3(I=>e(I),I=>console.error("Users subscription error:",I)),k=V3(R,I=>a(I),I=>console.error("Workouts subscription error:",I));const w=await j3(R);r(w)}catch(S){console.error("Error initializing game data:",S),m(S.message||"Error conectando con la base de datos")}finally{clearTimeout(E),c(!1)}}return b(),()=>{clearTimeout(E),V==null||V(),k==null||k()}},[R]),M.useEffect(()=>{const V=t.reduce((k,E)=>k+(E.walletBalance||0),0);v(V)},[t]);const O=M.useCallback(V=>n.filter(k=>k.userId===V).length,[n]),D=M.useCallback(V=>s.filter(E=>{var b;return E.userId===V&&((b=E.recoveryWeeks)==null?void 0:b.includes(R))}).reduce((E,b)=>{var S;return E+(((S=b.missedSessionsPerRecoveryWeek)==null?void 0:S[R])||0)},0),[s,R]),x=M.useCallback(V=>s.some(k=>k.userId===V&&k.frozenWeekId===R),[s,R]),y=M.useCallback(V=>{const k=t.find(q=>q.id===V);if(!k)return null;const E=hn.find(q=>q.id===V),b=M0(E,k),S={...k,avatar:b},C=O(V),w=D(V),I=x(V),A=I?0:Nr+w,fe=Math.min(C,Nr),mt=Math.max(0,C-Nr-w);return{userId:V,user:S,sessions:C,totalRequired:A,regularSessions:fe,recoverySessions:w,bonusSessions:mt,frozen:I,goalMet:C>=A,progress:A>0?Math.min(1,C/A):1,canEarnLife:!I&&C>=V0+w}},[t,O,D,x]),_=M.useCallback(async(V=R)=>{const k=await M3(V),E=await q3(V);JV(V);for(const b of hn){const S=t.find(qe=>qe.id===b.id);if(!S)continue;if(s.some(qe=>qe.userId===b.id&&qe.frozenWeekId===V)){await Jv(b.id,V,{status:"frozen",sessions:0,fineApplied:0,lifeUsed:!1,lifeEarned:!1});continue}const w=k.filter(qe=>qe.userId===b.id).length,I=s.filter(qe=>{var Tt;return qe.userId===b.id&&((Tt=qe.recoveryWeeks)==null?void 0:Tt.includes(V))}).reduce((qe,Tt)=>{var bs;return qe+(((bs=Tt.missedSessionsPerRecoveryWeek)==null?void 0:bs[V])||0)},0),A=Nr+I;let fe=0,mt=!1,q=!1,W=!1,$=!1,ue=S.extraLives||0,xe=S.consecutiveMisses||0,_t=S.consecutiveSuccesses||0,bt=S.hasShield||!1,Et=S.currentFineLevel||Ko;const rt=A-w;if(rt<=0)Et=Math.max(Ko,Math.floor(Et/2)),xe=0,_t+=1,_t>=4&&!bt&&(bt=!0,W=!0),w-I>=V0&&(q=!0,ue+=1);else if(rt===1&&ue>0)mt=!0,ue-=1,Et=Math.max(Ko,Math.floor(Et/2)),xe=0,_t+=1,_t>=4&&!bt&&(bt=!0,W=!0);else if(E.find(Tt=>Tt.userId===b.id&&Tt.aiVerdict===!0))_t=0;else{let Tt=Et;bt&&(Tt=Math.floor(Tt/2),bt=!1,$=!0),fe=Tt,xe+=1,_t=0,Et=Math.min(vC,Et*2)}await Nu(b.id,{extraLives:ue,walletBalance:(S.walletBalance||0)+fe,currentFineLevel:Et,consecutiveMisses:xe,consecutiveSuccesses:_t,hasShield:bt});const xn=E.find(qe=>qe.userId===b.id&&qe.aiVerdict===!0);let gi="completed";fe>0?gi="missed":xn&&rt>0&&(gi="justified"),await Jv(b.id,V,{status:gi,sessions:w,totalRequired:A,recoverySessions:I,fineApplied:fe,lifeUsed:mt,lifeEarned:q,shieldEarned:W,shieldBroken:$,deficit:Math.max(0,rt)})}},[t,s,R]);return{users:t.map(V=>{const k=hn.find(E=>E.id===V.id);return{...V,avatar:M0(k,V)}}),workouts:n,summaries:i,absences:s,loading:u,error:f,totalPot:d,currentWeekId:R,getSessionCount:O,getRecoverySessions:D,isWeekFrozen:x,getUserWeekStatus:y,processWeekEnd:_}}const e6="/fitness/";function Zt({src:t,name:e="",size:n="md",hasShield:a=!1}){const i={sm:{container:"w-8 h-8",text:"text-2xl",img:"h-10",shield:"text-xs -bottom-1 -right-1"},md:{container:"w-12 h-12",text:"text-4xl",img:"h-14",shield:"text-sm -bottom-1 -right-1"},lg:{container:"w-16 h-16",text:"text-5xl",img:"h-20",shield:"text-base -bottom-1 -right-1"},xl:{container:"w-20 h-20",text:"text-6xl",img:"h-24",shield:"text-lg -bottom-1 -right-1"}},r=i[n]||i.md,s=t&&t.startsWith("/"),o=a?p.jsx("span",{className:`absolute ${r.shield} drop-shadow-lg`,children:""}):null;if(s){const u=`${e6}${t.startsWith("/")?t.slice(1):t}`;return p.jsxs("div",{className:"relative inline-flex items-center justify-center flex-shrink-0",children:[p.jsx("img",{src:u,alt:e,className:`${r.img} w-auto object-contain`}),o]})}return p.jsxs("div",{className:`relative ${r.container} flex items-center justify-center flex-shrink-0`,children:[p.jsx("span",{className:r.text,children:t||""}),o]})}function t6(){const{login:t,checkUserPin:e}=mi(),[n,a]=M.useState(null),[i,r]=M.useState(""),[s,o]=M.useState(!1),[u,c]=M.useState(""),[f,m]=M.useState(""),[d,v]=M.useState(!1),[R,O]=M.useState(!1),D=async _=>{a(_),r(""),c(""),m(""),O(!0);try{const N=await e(_.id);o(!N)}catch{o(!0)}finally{O(!1)}},x=()=>{a(null),r(""),c(""),m("")},y=async _=>{if(_.preventDefault(),m(""),i.length!==4){m("El PIN debe tener 4 dgitos.");return}if(s&&i!==u){m("Los PINs no coinciden.");return}v(!0);try{await t(n.id,i)}catch(N){m(N.message||"Error al iniciar sesin")}finally{v(!1)}};return p.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center px-4",children:p.jsxs("div",{className:"w-full max-w-sm",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("div",{className:"text-5xl mb-2",children:""}),p.jsx("h1",{className:"text-3xl font-black text-white",children:"FitFamily"}),p.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Tracker Familiar de Ejercicio"})]}),n?p.jsxs("div",{children:[p.jsx("button",{onClick:x,className:"text-gray-400 hover:text-white mb-4 text-sm flex items-center gap-1",children:" Cambiar usuario"}),p.jsxs("div",{className:"bg-gray-800 rounded-2xl p-6 border border-gray-700",children:[p.jsxs("div",{className:"text-center mb-4",children:[p.jsx("div",{className:"mb-2 flex justify-center",children:p.jsx(Zt,{src:n.avatar,name:n.name,size:"xl"})}),p.jsx("h2",{className:"text-xl font-bold text-white",children:n.name})]}),R?p.jsx("p",{className:"text-gray-400 text-center py-4",children:"Verificando..."}):p.jsxs("form",{onSubmit:y,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:s?" Crea tu PIN (4 dgitos)":" Ingresa tu PIN"}),p.jsx("input",{type:"password",inputMode:"numeric",maxLength:4,value:i,onChange:_=>r(_.target.value.replace(/\D/g,"").slice(0,4)),placeholder:"   ",autoFocus:!0,className:"w-full bg-gray-700 border border-gray-600 rounded-xl px-4 py-3 text-white text-center text-2xl tracking-[0.5em] focus:ring-2 focus:ring-indigo-500 focus:outline-none"})]}),s&&p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirma tu PIN"}),p.jsx("input",{type:"password",inputMode:"numeric",maxLength:4,value:u,onChange:_=>c(_.target.value.replace(/\D/g,"").slice(0,4)),placeholder:"   ",className:"w-full bg-gray-700 border border-gray-600 rounded-xl px-4 py-3 text-white text-center text-2xl tracking-[0.5em] focus:ring-2 focus:ring-indigo-500 focus:outline-none"})]}),f&&p.jsx("p",{className:"text-red-400 text-sm bg-red-900/20 rounded-xl p-2 text-center",children:f}),p.jsx("button",{type:"submit",disabled:d||i.length!==4,className:`w-full py-3 rounded-xl font-bold text-lg transition-all ${d||i.length!==4?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-500 text-white active:scale-95"}`,children:d?" Entrando...":s?" Crear PIN y Entrar":" Entrar"})]})]})]}):p.jsxs("div",{children:[p.jsx("p",{className:"text-gray-300 text-center mb-4 font-medium",children:"Quin eres?"}),p.jsx("div",{className:"grid grid-cols-2 gap-3",children:hn.map(_=>p.jsxs("button",{onClick:()=>D(_),className:"bg-gray-800 hover:bg-gray-700 border border-gray-700 hover:border-indigo-500 rounded-2xl p-4 text-center transition-all active:scale-95",children:[p.jsx("div",{className:"mb-2",children:p.jsx(Zt,{src:_.avatar,name:_.name,size:"lg"})}),p.jsx("div",{className:"text-white font-semibold",children:_.name})]},_.id))})]})]})})}function n6({status:t}){const e=tg();if(!t)return null;const{userId:n,user:a,sessions:i,totalRequired:r,frozen:s,goalMet:o,progress:u,canEarnLife:c}=t,f=Math.round(u*100),m="".repeat(a.extraLives||0),d="".repeat(Math.max(0,3-(a.extraLives||0)));return p.jsxs("div",{onClick:()=>e(`/user/${n}`),className:"bg-gray-800 rounded-2xl p-4 shadow-lg border border-gray-700 cursor-pointer hover:border-indigo-500/50 transition-all active:scale-[0.98]",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[p.jsx(Zt,{src:a.avatar,name:a.name,size:"md",hasShield:a.hasShield}),p.jsxs("div",{className:"flex-1",children:[p.jsx("h3",{className:"font-bold text-lg text-white",children:a.name}),p.jsxs("div",{className:"text-sm",children:[m,d]})]}),s&&p.jsx("span",{className:"bg-blue-600/20 text-blue-400 text-xs font-semibold px-2 py-1 rounded-full",children:" Ausencia"}),o&&!s&&p.jsx("span",{className:"bg-green-600/20 text-green-400 text-xs font-semibold px-2 py-1 rounded-full",children:" Meta"})]}),p.jsxs("div",{className:"mb-2",children:[p.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mb-1",children:[p.jsx("span",{children:"Sesiones esta semana"}),p.jsxs("span",{className:"font-mono font-bold text-white",children:[i,"/",r]})]}),p.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3 overflow-hidden",children:p.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${o?"bg-green-500":u>=.66?"bg-yellow-500":"bg-red-500"}`,style:{width:`${f}%`}})})]}),p.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-2",children:[p.jsxs("span",{children:["Multa acumulada:"," ",p.jsx("span",{className:"text-red-400 font-semibold",children:co(a.walletBalance||0)})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[(a.consecutiveSuccesses||0)>0&&p.jsxs("span",{className:`font-semibold ${a.hasShield?"text-cyan-400":"text-orange-400"}`,children:[" ",a.consecutiveSuccesses," ",a.hasShield&&""]}),c&&p.jsx("span",{className:"text-yellow-400 font-semibold",children:" +1 vida"})]})]})]})}function a6({total:t}){return p.jsxs("div",{className:"bg-gradient-to-r from-amber-600 to-orange-600 rounded-2xl p-4 shadow-lg text-center",children:[p.jsx("p",{className:"text-sm text-amber-100 font-medium",children:" Pozo Total Recaudado"}),p.jsx("p",{className:"text-3xl font-black text-white mt-1",children:co(t)})]})}function i6({users:t}){const e=t.filter(n=>(n.walletBalance||0)>0).sort((n,a)=>(a.walletBalance||0)-(n.walletBalance||0));return e.length===0?p.jsx("div",{className:"bg-gray-800 rounded-2xl p-4 border border-gray-700 text-center",children:p.jsx("p",{className:"text-green-400 font-semibold",children:" Sin multas pendientes! Sigan as!"})}):p.jsxs("div",{className:"bg-gray-800 rounded-2xl p-4 border border-gray-700",children:[p.jsx("h3",{className:"text-lg font-bold text-red-400 mb-3 flex items-center gap-2",children:" Muro de la Vergenza"}),p.jsx("div",{className:"space-y-2",children:e.map(n=>p.jsxs("div",{className:"flex items-center justify-between bg-gray-900/50 rounded-xl px-3 py-2",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Zt,{src:n.avatar,name:n.name,size:"sm",hasShield:n.hasShield}),p.jsx("span",{className:"font-medium text-white",children:n.name})]}),p.jsx("span",{className:"text-red-400 font-bold font-mono",children:co(n.walletBalance||0)})]},n.id))})]})}async function r6(t,{maxDimension:e=1200,quality:n=.7}={}){return t.size<500*1024?t:new Promise((a,i)=>{const r=new Image,s=URL.createObjectURL(t);r.onload=()=>{URL.revokeObjectURL(s);let{width:o,height:u}=r;(o>e||u>e)&&(o>u?(u=Math.round(u*e/o),o=e):(o=Math.round(o*e/u),u=e));let c,f;try{c=new OffscreenCanvas(o,u),f=c.getContext("2d")}catch{c=document.createElement("canvas"),c.width=o,c.height=u,f=c.getContext("2d")}f.drawImage(r,0,0,o,u),c instanceof OffscreenCanvas?c.convertToBlob({type:"image/jpeg",quality:n}).then(m=>{const d=new File([m],t.name.replace(/\.\w+$/,".jpg"),{type:"image/jpeg",lastModified:Date.now()});a(d)}).catch(i):c.toBlob(m=>{if(!m){i(new Error("Canvas toBlob failed"));return}const d=new File([m],t.name.replace(/\.\w+$/,".jpg"),{type:"image/jpeg",lastModified:Date.now()});a(d)},"image/jpeg",n)},r.onerror=()=>{URL.revokeObjectURL(s),a(t)},r.src=s})}async function dS(t,e={}){const n=await r6(t,e);return new Promise(a=>{const i=new FileReader;i.onloadend=()=>a({file:n,preview:i.result}),i.readAsDataURL(n)})}async function s6(t){try{!t.type||!t.type.includes("jpeg")&&t.type.includes("jpg");const e=await l6(t,0,128*1024),n=new DataView(e);if(n.getUint16(0)!==65496)return null;let a=2;for(;a<n.byteLength-4;){const i=n.getUint16(a);if(i===65505){const r=n.getUint16(a+2),s=a+4;if(n.getUint8(s)===69&&n.getUint8(s+1)===120&&n.getUint8(s+2)===105&&n.getUint8(s+3)===102&&n.getUint8(s+4)===0&&n.getUint8(s+5)===0){const o=s+6,u=o6(n,o,o+r-6);if(u)return u6(u)}a+=2+r}else if((i&65280)===65280){if(i===65498)break;const r=n.getUint16(a+2);a+=2+r}else break}if(t.lastModified){const i=new Date(t.lastModified);if(!isNaN(i.getTime()))return{date:c6(i),datetime:i,source:"file_modified"}}return null}catch(e){return console.warn("EXIF extraction failed:",e),null}}function l6(t,e,n){return new Promise((a,i)=>{const r=new FileReader;r.onload=()=>a(r.result),r.onerror=i;const s=t.slice(e,Math.min(n,t.size));r.readAsArrayBuffer(s)})}function o6(t,e,n){const a=Math.min(n,t.byteLength),r=t.getUint16(e)===18761,s=t.getUint32(e+4,r),o=e+s;let u=null,c=null;if(o+2>=a)return null;const f=t.getUint16(o,r);for(let m=0;m<f;m++){const d=o+2+m*12;if(d+12>a)break;const v=t.getUint16(d,r);if(v===306){const R=t.getUint32(d+8,r);u=u_(t,e+R,19,a)}v===34665&&(c=t.getUint32(d+8,r))}if(c!==null){const m=e+c;if(m+2<a){const d=t.getUint16(m,r);for(let v=0;v<d;v++){const R=m+2+v*12;if(R+12>a)break;const O=t.getUint16(R,r);if(O===36867||O===36868){const D=t.getUint32(R+8,r),x=u_(t,e+D,19,a);if(x)return x}}}}return u}function u_(t,e,n,a){if(e+n>a)return null;let i="";for(let r=0;r<n;r++){const s=t.getUint8(e+r);if(s===0)break;i+=String.fromCharCode(s)}return i.length>0?i:null}function u6(t){const e=t.match(/(\d{4}):(\d{2}):(\d{2})\s+(\d{2}):(\d{2}):(\d{2})/);if(!e)return null;const[,n,a,i,r,s,o]=e,u=new Date(+n,+a-1,+i,+r,+s,+o);return isNaN(u.getTime())?null:{date:`${n}-${a}-${i}`,datetime:u,source:"exif"}}function c6(t){const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${a}`}async function c_(t,e){const n=await s6(t);if(!n)return{valid:!0,message:"No se pudo leer la fecha de la foto. Asegrate de que sea del da correcto.",photoDate:null};const a=n.date;if(a===e)return{valid:!0,message:null,photoDate:a};const i=new Date(e+"T12:00:00"),r=new Date(a+"T12:00:00");return Math.abs(Math.round((i-r)/(1e3*60*60*24)))<=1?{valid:!0,message:`La foto es del ${a} (${n.source==="exif"?"dato EXIF":"fecha archivo"}). Diferencia de 1 da  podra ser por zona horaria.`,photoDate:a}:{valid:!1,message:` La foto es del ${a}, pero reportas el ${e}. La foto debe ser del da de la actividad.`,photoDate:a}}function h6({onClose:t,onSuccess:e}){const{currentUser:n}=mi(),a=(n==null?void 0:n.id)||"",[i,r]=M.useState(Jd(new Date,"yyyy-MM-dd")),[s,o]=M.useState(""),[u,c]=M.useState(""),[f,m]=M.useState(""),[d,v]=M.useState(null),[R,O]=M.useState(null),[D,x]=M.useState(null),[y,_]=M.useState(!1),[N,V]=M.useState(""),k=M.useRef(null),E=M.useRef(null),b=async w=>{if(w)try{const{file:I,preview:A}=await dS(w);v(I),O(A);const fe=await c_(w,i);fe.message?x(fe):x(null),fe.valid||V(fe.message)}catch{v(w);const I=new FileReader;I.onloadend=()=>O(I.result),I.readAsDataURL(w),x(null)}},S=w=>{const I=w.target.files[0];I&&b(I)},C=async w=>{if(w.preventDefault(),V(""),!a||!i||!s||!u||!d){V("Todos los campos son obligatorios, incluyendo la foto.");return}if(D&&!D.valid){V(D.message);return}_(!0);try{const I=await X3(d,a,i),A=is(new Date(i+"T12:00:00"));await O3({userId:a,date:i,weekId:A,exerciseType:s,duration:parseInt(u),description:f,photoURL:I}),e==null||e(),t==null||t()}catch(I){console.error(I),V("Error al guardar. Revisa tu conexin e intntalo de nuevo.")}finally{_(!1)}};return p.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-end sm:items-center justify-center",children:p.jsxs("div",{className:"bg-gray-800 w-full max-w-lg rounded-t-3xl sm:rounded-2xl max-h-[90vh] overflow-y-auto",children:[p.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[p.jsx("h2",{className:"text-xl font-bold text-white",children:" Registrar Ejercicio"}),p.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white text-2xl leading-none",children:""})]}),p.jsxs("form",{onSubmit:C,className:"p-4 space-y-4",children:[p.jsxs("div",{className:"flex items-center gap-3 bg-gray-700/50 rounded-xl p-3",children:[p.jsx(Zt,{src:n==null?void 0:n.avatar,name:n==null?void 0:n.name,size:"md"}),p.jsxs("div",{children:[p.jsx("p",{className:"font-semibold text-white",children:n==null?void 0:n.name}),p.jsxs("p",{className:"text-xs text-gray-400",children:["Registrando como ",n==null?void 0:n.name]})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Fecha"}),p.jsx("input",{type:"date",value:i,onChange:w=>{r(w.target.value),d&&c_(d,w.target.value).then(I=>{x(I.message?I:null),I.valid?V(""):V(I.message)}).catch(()=>{})},className:"w-full bg-gray-700 border border-gray-600 rounded-xl px-3 py-2 text-white focus:ring-2 focus:ring-indigo-500 focus:outline-none"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Tipo de ejercicio"}),p.jsxs("select",{value:s,onChange:w=>o(w.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-xl px-3 py-2 text-white focus:ring-2 focus:ring-indigo-500 focus:outline-none",children:[p.jsx("option",{value:"",children:"Seleccionar..."}),_C.map(w=>p.jsx("option",{value:w,children:w},w))]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Duracin (minutos)"}),p.jsx("input",{type:"number",min:"1",max:"300",value:u,onChange:w=>c(w.target.value),placeholder:"30",className:"w-full bg-gray-700 border border-gray-600 rounded-xl px-3 py-2 text-white focus:ring-2 focus:ring-indigo-500 focus:outline-none"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:" Foto (obligatoria)"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{type:"button",onClick:()=>{var w;return(w=k.current)==null?void 0:w.click()},className:"flex-1 py-3 rounded-xl font-semibold text-sm bg-indigo-600 hover:bg-indigo-500 text-white transition-all active:scale-95 flex items-center justify-center gap-2",children:" Cmara"}),p.jsx("button",{type:"button",onClick:()=>{var w;return(w=E.current)==null?void 0:w.click()},className:"flex-1 py-3 rounded-xl font-semibold text-sm bg-gray-700 hover:bg-gray-600 text-white transition-all active:scale-95 flex items-center justify-center gap-2",children:" Galera"})]}),p.jsx("input",{ref:k,type:"file",accept:"image/*",capture:"environment",onChange:S,className:"hidden"}),p.jsx("input",{ref:E,type:"file",accept:"image/*",onChange:S,className:"hidden"}),R&&p.jsxs("div",{className:"mt-2 relative",children:[p.jsx("img",{src:R,alt:"Preview",className:"rounded-xl w-full max-h-48 object-cover"}),p.jsx("button",{type:"button",onClick:()=>{v(null),O(null),x(null),V("")},className:"absolute top-2 right-2 bg-black/60 text-white w-7 h-7 rounded-full flex items-center justify-center text-sm hover:bg-black/80",children:""})]}),D&&D.message&&D.valid&&p.jsxs("p",{className:"mt-1 text-xs text-amber-400 bg-amber-900/20 rounded-lg p-2",children:[" ",D.message]}),D&&!D.valid&&p.jsx("p",{className:"mt-1 text-xs text-red-400 bg-red-900/20 rounded-lg p-2",children:D.message})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Descripcin (opcional)"}),p.jsx("textarea",{value:f,onChange:w=>m(w.target.value),placeholder:"Qu hiciste hoy?",rows:2,className:"w-full bg-gray-700 border border-gray-600 rounded-xl px-3 py-2 text-white focus:ring-2 focus:ring-indigo-500 focus:outline-none resize-none"})]}),N&&!D&&p.jsx("p",{className:"text-red-400 text-sm bg-red-900/20 rounded-xl p-2",children:N}),p.jsx("button",{type:"submit",disabled:y||!d||D&&!D.valid,className:`w-full py-3 rounded-xl font-bold text-lg transition-all ${y||!d||D&&!D.valid?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-500 text-white active:scale-95"}`,children:y?" Guardando...":" Registrar Sesin"})]})]})})}const f6="AIzaSyDvcCDTWe4yr1PodLoADXs5LJ0RqytAMhw",d6=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${f6}`,m6=`Eres el juez estricto pero justo del reto fitness familiar "FitFamily".

CONTEXTO:
- 4 miembros de una familia deben completar 3 sesiones de ejercicio por semana
- Si no cumplen, pagan una multa en pesos chilenos
- Existe un sistema de "semana congelada" para ausencias PREVISIBLES (viajes, vacaciones, etc.)
- Las justificaciones son SOLO para IMPREVISTOS (cosas que no se pudieron planificar)

CRITERIOS PARA ACEPTAR:
- Enfermedad sbita (gripe, COVID, infeccin)  idealmente con certificado mdico o foto
- Lesin que impida ejercicio  con evidencia (foto, certificado)
- Emergencia familiar grave (hospitalizacin de familiar, accidente)
- Catstrofe natural o situacin de fuerza mayor

CRITERIOS PARA RECHAZAR:
- "No tuve tiempo" / "Estuve ocupado"  siempre hay 30 min para ejercicio
- Flojera, cansancio, falta de motivacin  eso es precisamente lo que el reto combate
- Viaje planificado  eso se congela con anticipacin
- Clima  se puede ejercitar adentro
- Excusas vagas sin evidencia concreta
- Trabajo excesivo  se puede hacer ejercicio corto
- Cualquier situacin que ERA previsible y se pudo planificar como semana congelada

S ESTRICTO. El objetivo del reto es que NO haya excusas fciles. Solo situaciones genuinamente fuera del control de la persona.

Si el usuario menciona evidencia (certificado, foto) pero no la adjunta, pdela.
Si adjunta una imagen, evalala como evidencia.`;async function g6(t,e=null){var n,a,i,r,s,o;try{const u=[{text:m6},{text:`
JUSTIFICACIN DEL USUARIO:
"${t}"

Responde SOLO con un JSON vlido (sin markdown, sin backticks):
{"valid": true/false, "reason": "explicacin breve en espaol de mximo 2 frases"}`}];if(e){const R=e.split(",")[1]||e,O=((n=e.match(/data:(.*?);/))==null?void 0:n[1])||"image/jpeg";u.push({inlineData:{mimeType:O,data:R}}),u[1].text+=`

(El usuario adjunt una imagen como evidencia. Evalala.)`}const c=await fetch(d6,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:u}],generationConfig:{temperature:.1,maxOutputTokens:200}})});if(!c.ok){const R=await c.text();throw console.error("Gemini API error:",R),new Error("Error al consultar la IA")}const m=((o=(s=(r=(i=(a=(await c.json()).candidates)==null?void 0:a[0])==null?void 0:i.content)==null?void 0:r.parts)==null?void 0:s[0])==null?void 0:o.text)||"",d=m.match(/\{[\s\S]*\}/);if(!d)return console.error("Could not parse AI response:",m),{valid:!1,reason:"No se pudo interpretar la respuesta de la IA."};const v=JSON.parse(d[0]);return{valid:!!v.valid,reason:v.reason||"Sin explicacin."}}catch(u){return console.error("AI Judge error:",u),{valid:!1,reason:"Error al evaluar la justificacin. Intntalo de nuevo."}}}function p6({weekId:t,existing:e=null,onClose:n,onResult:a}){const{currentUser:i}=mi(),r=!!e,[s,o]=M.useState((e==null?void 0:e.excuse)||""),[u,c]=M.useState(null),[f,m]=M.useState((e==null?void 0:e.evidencePhotoURL)||null),[d,v]=M.useState(!1),[R,O]=M.useState(null),[D,x]=M.useState(""),y=async V=>{const k=V.target.files[0];if(k)try{const{file:E,preview:b}=await dS(k);c(E),m(b)}catch{c(k);const E=new FileReader;E.onloadend=()=>m(E.result),E.readAsDataURL(k)}},_=async V=>{if(V.preventDefault(),x(""),!s.trim()){x("Escribe tu justificacin.");return}if(s.trim().length<15){x("La justificacin debe ser ms detallada (mnimo 15 caracteres).");return}v(!0);try{const k=await g6(s.trim(),f);O(k);let E=(e==null?void 0:e.evidencePhotoURL)||null;u&&(E=await F3(u,i.id,t)),r&&e.id?await B3(e.id,{excuse:s.trim(),evidencePhotoURL:E,aiVerdict:k.valid,aiReason:k.reason,appealCount:(e.appealCount||0)+1}):await z3({userId:i.id,weekId:t,excuse:s.trim(),evidencePhotoURL:E,aiVerdict:k.valid,aiReason:k.reason,appealCount:0}),a==null||a(k)}catch(k){console.error("Justification error:",k),x("Error al enviar la justificacin. Intntalo de nuevo.")}finally{v(!1)}},N=()=>{O(null)};return p.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-end sm:items-center justify-center",children:p.jsxs("div",{className:"bg-gray-800 w-full max-w-lg rounded-t-3xl sm:rounded-2xl max-h-[90vh] overflow-y-auto",children:[p.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[p.jsx("h2",{className:"text-xl font-bold text-white",children:r?" Editar y Apelar":" Justificacin"}),p.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white text-2xl leading-none",children:""})]}),p.jsxs("div",{className:"p-4 space-y-4",children:[p.jsxs("div",{className:"flex items-center gap-3 bg-gray-700/50 rounded-xl p-3",children:[p.jsx(Zt,{src:i==null?void 0:i.avatar,name:i==null?void 0:i.name,size:"md"}),p.jsxs("div",{children:[p.jsx("p",{className:"font-semibold text-white",children:i==null?void 0:i.name}),p.jsx("p",{className:"text-xs text-gray-400",children:r?"Edita tu justificacin y enva la apelacin al Juez IA.":"No cumpliste la meta esta semana. Tienes una justificacin?"})]})]}),p.jsxs("div",{className:"bg-amber-900/20 border border-amber-700/30 rounded-xl p-3 text-sm text-amber-300",children:[p.jsx("p",{className:"font-semibold mb-1",children:r?" Apelacin":" Solo para imprevistos"}),p.jsx("p",{className:"text-amber-400 text-xs",children:r?"Corrige tu justificacin, agrega ms detalles o mejor evidencia. La IA volver a evaluar.":"Enfermedad sbita, lesin, emergencia. Si era previsible (viaje, vacaciones), usa la semana congelada. Adjunta evidencia (certificado mdico, foto) para mayor probabilidad de aprobacin."})]}),r&&e.aiReason&&!R&&p.jsxs("div",{className:"bg-red-900/20 border border-red-700/30 rounded-xl p-3",children:[p.jsx("p",{className:"text-xs text-red-400 font-semibold mb-1",children:"Respuesta anterior del Juez IA:"}),p.jsxs("p",{className:"text-sm text-red-300",children:[" ",e.aiReason]})]}),R?p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:`rounded-2xl p-4 border-2 text-center ${R.valid?"bg-green-900/20 border-green-500/50":"bg-red-900/20 border-red-500/50"}`,children:[p.jsx("div",{className:"text-4xl mb-2",children:R.valid?"":""}),p.jsx("h3",{className:`text-lg font-bold ${R.valid?"text-green-400":"text-red-400"}`,children:R.valid?"Justificacin Aceptada":"Justificacin Rechazada"}),p.jsx("p",{className:"text-gray-300 text-sm mt-2",children:R.reason}),R.valid&&p.jsx("p",{className:"text-green-400/70 text-xs mt-2",children:"La multa se congela esta semana (no se cobra, pero no cuenta como semana exitosa)."}),!R.valid&&p.jsx("p",{className:"text-red-400/70 text-xs mt-2",children:"Se aplicar la multa correspondiente."})]}),p.jsxs("div",{className:"bg-gray-700/50 rounded-xl p-3",children:[p.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Tu justificacin:"}),p.jsx("p",{className:"text-sm text-gray-300",children:s}),f&&p.jsx("img",{src:f,alt:"Evidencia",className:"mt-2 rounded-lg w-full max-h-32 object-cover"})]}),p.jsxs("div",{className:"flex gap-3",children:[!R.valid&&p.jsx("button",{onClick:N,className:"flex-1 py-3 rounded-xl font-bold bg-amber-600 hover:bg-amber-500 text-white transition-all active:scale-95",children:" Editar y Apelar"}),p.jsx("button",{onClick:n,className:`${R.valid?"w-full":"flex-1"} py-3 rounded-xl font-bold bg-gray-700 hover:bg-gray-600 text-white transition-all`,children:"Cerrar"})]})]}):p.jsxs("form",{onSubmit:_,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:r?"Qu pas? Edita tu justificacin.":"Qu pas? S especfico."}),p.jsx("textarea",{value:s,onChange:V=>o(V.target.value),placeholder:"Ejemplo: Me dio gripe fuerte desde el martes, con fiebre de 39. Adjunto certificado mdico.",rows:3,className:"w-full bg-gray-700 border border-gray-600 rounded-xl px-3 py-2 text-white focus:ring-2 focus:ring-indigo-500 focus:outline-none resize-none"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:" Evidencia (opcional pero recomendada)"}),p.jsx("input",{type:"file",accept:"image/*",onChange:y,className:"w-full text-sm text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-xl file:border-0 file:bg-indigo-600 file:text-white file:font-semibold hover:file:bg-indigo-500 file:cursor-pointer"}),f&&p.jsx("img",{src:f,alt:"Evidencia",className:"mt-2 rounded-xl w-full max-h-48 object-cover"})]}),D&&p.jsx("p",{className:"text-red-400 text-sm bg-red-900/20 rounded-xl p-2",children:D}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{type:"button",onClick:n,className:"flex-1 py-3 rounded-xl font-bold text-gray-400 bg-gray-700 hover:bg-gray-600 transition-all",children:r?"Cancelar":"Acepto la multa"}),p.jsx("button",{type:"submit",disabled:d,className:`flex-1 py-3 rounded-xl font-bold transition-all ${d?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-500 text-white active:scale-95"}`,children:d?" Evaluando...":r?" Enviar Apelacin":" Enviar al Juez IA"})]})]})]})]})})}function y6({gameState:t}){const{currentUser:e}=mi(),[n,a]=M.useState(!1),[i,r]=M.useState(!1),[s,o]=M.useState(null),{users:u,totalPot:c,currentWeekId:f,getUserWeekStatus:m,loading:d,error:v}=t;M.useEffect(()=>{e!=null&&e.id&&f&&Zv(e.id,f).then(D=>{o(D)}).catch(()=>{})},[e==null?void 0:e.id,f]);const R=()=>{e!=null&&e.id&&f&&Zv(e.id,f).then(D=>{o(D)}).catch(()=>{})};if(d)return p.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-4xl mb-2 animate-bounce",children:""}),p.jsx("p",{className:"text-gray-400",children:"Cargando..."})]})});if(v)return p.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:p.jsxs("div",{className:"text-center max-w-sm",children:[p.jsx("div",{className:"text-4xl mb-2",children:""}),p.jsx("p",{className:"text-red-400 font-semibold mb-2",children:"Error de conexin"}),p.jsx("p",{className:"text-gray-400 text-sm mb-4",children:v}),p.jsx("button",{onClick:()=>window.location.reload(),className:"bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded-xl font-medium",children:"Reintentar"})]})});const O=hn.map(D=>m(D.id)).filter(Boolean);return p.jsxs("div",{className:"space-y-4 pb-24",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("h2",{className:"text-2xl font-black text-white",children:"FitFamily"}),p.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:[" ",Tc(f)]})]}),p.jsx(a6,{total:c}),p.jsx("div",{className:"space-y-3",children:O.map(D=>p.jsx(n6,{status:D},D.userId))}),e&&(()=>{const D=m(e.id);return!D||D.goalMet||D.frozen?null:s?s.aiVerdict?p.jsx("div",{className:"bg-green-900/10 border border-green-700/20 rounded-2xl p-3 text-center",children:p.jsx("p",{className:"text-green-400 text-sm",children:" Justificacin aceptada  multa congelada esta semana"})}):p.jsxs("button",{onClick:()=>r(!0),className:"w-full bg-red-900/20 border border-red-700/30 rounded-2xl p-4 text-left hover:bg-red-900/30 transition-all active:scale-[0.98]",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("span",{className:"text-2xl",children:""}),p.jsxs("div",{children:[p.jsx("p",{className:"font-semibold text-red-300",children:"Justificacin rechazada"}),p.jsx("p",{className:"text-xs text-red-400/70",children:"Puedes editar y apelar tu justificacin"})]})]}),p.jsx("div",{className:"mt-2 bg-red-900/30 rounded-xl p-2",children:p.jsxs("p",{className:"text-xs text-red-300 truncate",children:[" ",s.aiReason]})})]}):p.jsx("button",{onClick:()=>r(!0),className:"w-full bg-amber-900/20 border border-amber-700/30 rounded-2xl p-4 text-left hover:bg-amber-900/30 transition-all active:scale-[0.98]",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("span",{className:"text-2xl",children:""}),p.jsxs("div",{children:[p.jsx("p",{className:"font-semibold text-amber-300",children:"No vas a cumplir esta semana?"}),p.jsx("p",{className:"text-xs text-amber-400/70",children:"Si tienes un imprevisto, enva tu justificacin al Juez IA"})]})]})})})(),p.jsx(i6,{users:u}),p.jsx("button",{onClick:()=>a(!0),className:"fixed bottom-6 right-6 w-16 h-16 bg-indigo-600 hover:bg-indigo-500 rounded-full shadow-2xl flex items-center justify-center text-3xl active:scale-90 transition-all z-40","aria-label":"Registrar ejercicio",children:""}),n&&p.jsx(h6,{onClose:()=>a(!1),onSuccess:()=>a(!1)}),i&&p.jsx(p6,{weekId:f,existing:(s==null?void 0:s.aiVerdict)===!1?s:null,onClose:()=>{r(!1),R()},onResult:D=>{R()}})]})}function v6(){const{currentUser:t}=mi(),[e,n]=M.useState([]),[a,i]=M.useState([]),[r,s]=M.useState([]),[o,u]=M.useState(!0),[c,f]=M.useState(null),[m,d]=M.useState(null);M.useEffect(()=>{let y=0;const _=()=>{y++,y>=3&&u(!1)},N=P3(E=>{n(E),_()},E=>{console.error(E),_()}),V=H3(E=>{i(E),_()},E=>{console.error(E),_()}),k=$3(E=>{s(E),_()},E=>{console.error(E),_()});return()=>{N(),V(),k()}},[]);const v=y=>hn.find(_=>_.id===y)||{name:"Desconocido",avatar:""},R=y=>{if(!(y!=null&&y.seconds))return"";const _=Date.now()-y.seconds*1e3,N=Math.floor(_/6e4);if(N<1)return"Ahora";if(N<60)return`hace ${N} min`;const V=Math.floor(N/60);if(V<24)return`hace ${V}h`;const k=Math.floor(V/24);return k<7?`hace ${k}d`:`hace ${Math.floor(k/7)} sem`},O=y=>r.find(_=>_.workoutId===y),D=async y=>{try{await G3(y.id,t.id,y.userId),d(null)}catch(_){alert(_.message),d(null)}},x=async(y,_)=>{try{await Y3(y,t.id,_);const V={...O(y).votes,[t.id]:_};if(Object.keys(V).length>=3){const E=Object.values(V).filter(S=>S==="fake").length,b=Object.values(V).filter(S=>S==="legitimate").length;E>=b?(await e_(y,"fake"),await Q3(y)):await e_(y,"legitimate")}}catch(N){console.error("Vote error:",N),alert("Error al votar. Intenta de nuevo.")}};return o?p.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-4xl mb-2 animate-bounce",children:""}),p.jsx("p",{className:"text-gray-400",children:"Cargando feed..."})]})}):p.jsxs("div",{className:"space-y-4 pb-24",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("h2",{className:"text-2xl font-black text-white",children:" Feed"}),p.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Actividad de toda la familia"})]}),e.length===0&&a.length===0?p.jsxs("div",{className:"bg-gray-800 rounded-2xl p-6 border border-gray-700 text-center",children:[p.jsx("div",{className:"text-4xl mb-2",children:""}),p.jsx("p",{className:"text-gray-400",children:"An no hay actividad. S el primero!"})]}):p.jsxs("div",{className:"space-y-4",children:[a.map(y=>{const _=v(y.userId);return p.jsxs("div",{className:`rounded-2xl overflow-hidden border ${y.aiVerdict?"bg-amber-900/10 border-amber-700/30":"bg-red-900/10 border-red-700/30"}`,children:[p.jsxs("div",{className:"flex items-center gap-3 p-3",children:[p.jsx(Zt,{src:_.avatar,name:_.name,size:"sm"}),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"font-semibold text-white text-sm",children:_.name}),p.jsx("p",{className:"text-gray-500 text-xs",children:R(y.createdAt)})]}),p.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${y.aiVerdict?"bg-amber-600/20 text-amber-400":"bg-red-600/20 text-red-400"}`,children:y.aiVerdict?" Aceptada":" Rechazada"})]}),y.evidencePhotoURL&&p.jsx("button",{onClick:()=>f(y.evidencePhotoURL),className:"w-full",children:p.jsx("img",{src:y.evidencePhotoURL,alt:"Evidencia",className:"w-full max-h-64 object-cover hover:opacity-90 transition-opacity"})}),p.jsxs("div",{className:"p-3",children:[p.jsxs("p",{className:"text-gray-300 text-sm",children:[p.jsxs("span",{className:"font-semibold text-white",children:[_.name,":"]})," ","",y.excuse,""]}),p.jsxs("div",{className:`mt-2 text-xs px-2 py-1 rounded-lg inline-block ${y.aiVerdict?"bg-amber-900/30 text-amber-300":"bg-red-900/30 text-red-300"}`,children:[" ",y.aiReason]})]})]},`j-${y.id}`)}),e.map(y=>{const _=v(y.userId),N=O(y.id),V=y.userId===(t==null?void 0:t.id);return p.jsxs("div",{className:`rounded-2xl overflow-hidden border ${N?"bg-red-900/5 border-red-700/40":"bg-gray-800 border-gray-700"}`,children:[p.jsxs("div",{className:"flex items-center gap-3 p-3",children:[p.jsx(Zt,{src:_.avatar,name:_.name,size:"sm"}),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"font-semibold text-white text-sm",children:_.name}),p.jsx("p",{className:"text-gray-500 text-xs",children:R(y.createdAt)})]}),N&&p.jsx("span",{className:"bg-red-600/20 text-red-400 text-xs font-semibold px-2 py-0.5 rounded-full animate-pulse",children:" En revisin"}),p.jsx("span",{className:"bg-indigo-600/20 text-indigo-400 text-xs font-semibold px-2 py-0.5 rounded-full",children:y.exerciseType})]}),y.photoURL&&p.jsx("button",{onClick:()=>f(y.photoURL),className:"w-full",children:p.jsx("img",{src:y.photoURL,alt:y.exerciseType,className:"w-full max-h-96 object-cover hover:opacity-90 transition-opacity"})}),p.jsxs("div",{className:"p-3",children:[p.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-400 mb-1",children:[p.jsxs("span",{children:[" ",y.duration," min"]}),p.jsxs("span",{children:[" ",y.date]})]}),y.description&&p.jsxs("p",{className:"text-gray-300 text-sm",children:[p.jsx("span",{className:"font-semibold text-white",children:_.name})," ",y.description]})]}),(()=>{if(!N&&!V)return p.jsx("div",{className:"px-3 pb-3",children:p.jsx("button",{onClick:()=>d(y.id),className:"text-xs text-gray-500 hover:text-red-400 transition-colors",children:" Reportar foto"})});if(N&&!V&&!N.votes[t==null?void 0:t.id]){const k=v(N.flaggedBy);return p.jsxs("div",{className:"px-3 pb-3 bg-amber-900/10 border-t border-amber-700/30",children:[p.jsxs("p",{className:"text-xs text-amber-300 font-semibold py-2",children:[" ",k.name," report esta foto. Es ejercicio legtimo?"]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>x(y.id,"legitimate"),className:"flex-1 py-2 rounded-xl text-sm font-bold bg-green-600/20 text-green-400 hover:bg-green-600/30 transition-all active:scale-95",children:" Legtima"}),p.jsx("button",{onClick:()=>x(y.id,"fake"),className:"flex-1 py-2 rounded-xl text-sm font-bold bg-red-600/20 text-red-400 hover:bg-red-600/30 transition-all active:scale-95",children:" Falsa"})]})]})}if(N&&!V&&N.votes[t==null?void 0:t.id]){const k=N.votes[t.id],E=Object.keys(N.votes).length;return p.jsx("div",{className:"px-3 pb-3",children:p.jsxs("p",{className:"text-xs text-gray-500",children:[" Votaste: ",k==="fake"?" Falsa":" Legtima","  ",E,"/3 votos"]})})}if(N&&V){const k=Object.keys(N.votes).length;return p.jsx("div",{className:"px-3 pb-3",children:p.jsxs("p",{className:"text-xs text-red-400",children:[" Tu ejercicio est siendo revisado por la familia (",k,"/3 votos)"]})})}return null})()]},y.id)})]}),m&&(()=>{const y=e.find(N=>N.id===m);if(!y)return null;const _=v(y.userId);return p.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>d(null),children:p.jsxs("div",{className:"bg-gray-800 rounded-2xl p-6 max-w-sm w-full space-y-4 border border-gray-700",onClick:N=>N.stopPropagation(),children:[p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-4xl mb-2",children:""}),p.jsx("h3",{className:"text-lg font-bold text-white",children:"Reportar ejercicio"})]}),p.jsxs("div",{className:"flex items-center gap-3 bg-gray-700/50 rounded-xl p-3",children:[p.jsx(Zt,{src:_.avatar,name:_.name,size:"sm"}),p.jsxs("div",{children:[p.jsx("p",{className:"font-semibold text-white text-sm",children:_.name}),p.jsxs("p",{className:"text-xs text-gray-400",children:[y.exerciseType,"  ",y.date]})]})]}),p.jsxs("p",{className:"text-sm text-gray-300 text-center",children:["Crees que esta foto no corresponde a ejercicio real? Tu voto contar automticamente como ",p.jsx("span",{className:"text-red-400 font-semibold",children:'"Falsa"'}),". Los dems miembros votarn tambin."]}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{onClick:()=>d(null),className:"flex-1 py-3 rounded-xl font-bold text-gray-400 bg-gray-700 hover:bg-gray-600 transition-all",children:"Cancelar"}),p.jsx("button",{onClick:()=>D(y),className:"flex-1 py-3 rounded-xl font-bold bg-red-600 hover:bg-red-500 text-white transition-all active:scale-95",children:" Reportar"})]})]})})})(),c&&p.jsxs("div",{className:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4",onClick:()=>f(null),children:[p.jsx("button",{className:"absolute top-4 right-4 text-white text-3xl z-10",onClick:()=>f(null),children:""}),p.jsx("img",{src:c,alt:"Foto ampliada",className:"max-w-full max-h-full object-contain rounded-lg"})]})]})}function _6({gameState:t}){const{userId:e}=SR(),n=tg(),[a,i]=M.useState([]),[r,s]=M.useState(!0),[o,u]=M.useState(null),c=hn.find(d=>d.id===e),f=t.users.find(d=>d.id===e);if(M.useEffect(()=>{let d=!1;return s(!0),aS(e).then(v=>{d||(i(v),s(!1))}).catch(v=>{console.error(v),d||s(!1)}),()=>{d=!0}},[e]),!c)return p.jsxs("div",{className:"text-center py-12",children:[p.jsx("p",{className:"text-gray-400",children:"Usuario no encontrado"}),p.jsx("button",{onClick:()=>n("/"),className:"text-indigo-400 mt-2",children:"Volver al inicio"})]});const m={...c,...f};return p.jsxs("div",{className:"space-y-4 pb-24",children:[p.jsx("button",{onClick:()=>n("/"),className:"text-gray-400 hover:text-white text-sm flex items-center gap-1",children:" Volver"}),p.jsxs("div",{className:"bg-gray-800 rounded-2xl p-4 border border-gray-700 text-center",children:[p.jsx("div",{className:"mb-2 flex justify-center",children:p.jsx(Zt,{src:m.avatar,name:m.name,size:"xl",hasShield:m.hasShield})}),p.jsx("h2",{className:"text-2xl font-black text-white",children:m.name}),p.jsx("div",{className:"flex justify-center gap-4 mt-2 text-sm",children:p.jsxs("span",{children:["".repeat(m.extraLives||0),"".repeat(Math.max(0,3-(m.extraLives||0)))]})}),(m.consecutiveSuccesses||0)>0&&p.jsxs("div",{className:`mt-1 text-sm font-semibold ${m.hasShield?"text-cyan-400":"text-orange-400"}`,children:[" Racha: ",m.consecutiveSuccesses," semanas",m.hasShield&&"   Escudo activo (prxima multa -50%)",!m.hasShield&&(m.consecutiveSuccesses||0)<4&&` (${4-m.consecutiveSuccesses} ms para escudo)`]}),p.jsxs("div",{className:"mt-2 text-sm text-gray-400",children:["Multa acumulada:"," ",p.jsx("span",{className:"text-red-400 font-bold",children:co(m.walletBalance||0)})]})]}),p.jsx("div",{className:"flex justify-between items-center",children:p.jsxs("h3",{className:"text-lg font-bold text-white",children:[" Entrenamientos (",a.length,")"]})}),r?p.jsxs("div",{className:"text-center py-8",children:[p.jsx("div",{className:"text-3xl mb-2 animate-bounce",children:""}),p.jsx("p",{className:"text-gray-400",children:"Cargando entrenamientos..."})]}):a.length===0?p.jsx("div",{className:"bg-gray-800 rounded-2xl p-6 border border-gray-700 text-center",children:p.jsx("p",{className:"text-gray-400",children:"An no hay entrenamientos registrados."})}):p.jsx("div",{className:"space-y-4",children:a.map(d=>p.jsxs("div",{className:"bg-gray-800 rounded-2xl overflow-hidden border border-gray-700",children:[d.photoURL&&p.jsx("button",{onClick:()=>u(d.photoURL),className:"w-full",children:p.jsx("img",{src:d.photoURL,alt:d.exerciseType,className:"w-full h-64 object-cover hover:opacity-90 transition-opacity"})}),p.jsxs("div",{className:"p-4",children:[p.jsxs("div",{className:"flex items-center justify-between mb-1",children:[p.jsx("span",{className:"bg-indigo-600/20 text-indigo-400 text-sm font-semibold px-2 py-0.5 rounded-full",children:d.exerciseType}),p.jsxs("span",{className:"text-gray-400 text-sm",children:[d.duration," min"]})]}),p.jsxs("p",{className:"text-gray-400 text-sm mt-1",children:[" ",d.date]}),d.description&&p.jsx("p",{className:"text-gray-300 text-sm mt-2",children:d.description})]})]},d.id))}),o&&p.jsxs("div",{className:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4",onClick:()=>u(null),children:[p.jsx("button",{className:"absolute top-4 right-4 text-white text-3xl z-10",onClick:()=>u(null),children:""}),p.jsx("img",{src:o,alt:"Foto ampliada",className:"max-w-full max-h-full object-contain rounded-lg"})]})]})}function b6({onSuccess:t}){const{currentUser:e}=mi(),n=(e==null?void 0:e.id)||"",[a,i]=M.useState(""),[r,s]=M.useState([]),[o,u]=M.useState(!1),[c,f]=M.useState(""),[m,d]=M.useState(!1),v=[],R=new Date;for(let _=1;_<=8;_++){const N=fh(R,_);v.push(is(N))}const O=a?is(new Date(a+"T12:00:00")):null,D=O?WV(O):[],x=_=>{s(N=>N.includes(_)?N.filter(V=>V!==_):[...N,_])},y=async _=>{if(_.preventDefault(),f(""),d(!1),!n||!O||r.length===0){f("Selecciona la semana de ausencia y al menos una semana de recuperacin.");return}u(!0);try{const N={},V=Math.ceil(Nr/r.length);let k=Nr;for(const E of r){const b=Math.min(V,k);N[E]=b,k-=b}await k3({userId:n,frozenWeekId:O,recoveryWeeks:r,missedSessionsPerRecoveryWeek:N,status:"active"}),d(!0),i(""),s([]),t==null||t()}catch(N){console.error(N),f("Error al guardar la ausencia.")}finally{u(!1)}};return p.jsxs("div",{className:"bg-gray-800 rounded-2xl p-4 border border-gray-700",children:[p.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:" Planificar Ausencia"}),p.jsxs("form",{onSubmit:y,className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center gap-3 bg-gray-700/50 rounded-xl p-3",children:[p.jsx(Zt,{src:e==null?void 0:e.avatar,name:e==null?void 0:e.name,size:"md"}),p.jsxs("div",{children:[p.jsx("p",{className:"font-semibold text-white",children:e==null?void 0:e.name}),p.jsxs("p",{className:"text-xs text-gray-400",children:["Planificando ausencia para ",e==null?void 0:e.name]})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Fecha dentro de la semana de ausencia"}),p.jsx("input",{type:"date",value:a,onChange:_=>{i(_.target.value),s([])},className:"w-full bg-gray-700 border border-gray-600 rounded-xl px-3 py-2 text-white focus:ring-2 focus:ring-indigo-500 focus:outline-none"}),O&&p.jsxs("p",{className:"text-sm text-blue-400 mt-1",children:["Semana congelada: ",Tc(O)]})]}),D.length>0&&p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Semanas de recuperacin (selecciona una o ms)"}),p.jsx("div",{className:"space-y-2",children:D.map(_=>p.jsxs("button",{type:"button",onClick:()=>x(_),className:`w-full text-left px-3 py-2 rounded-xl transition-all ${r.includes(_)?"bg-green-600/20 ring-2 ring-green-400 text-green-300":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[Tc(_),r.includes(_)&&" "]},_))})]}),c&&p.jsx("p",{className:"text-red-400 text-sm bg-red-900/20 rounded-xl p-2",children:c}),m&&p.jsx("p",{className:"text-green-400 text-sm bg-green-900/20 rounded-xl p-2",children:" Ausencia planificada correctamente."}),p.jsx("button",{type:"submit",disabled:o,className:`w-full py-3 rounded-xl font-bold transition-all ${o?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-500 text-white active:scale-95"}`,children:o?" Guardando...":" Registrar Ausencia"})]})]})}function E6(){const[t,e]=M.useState(hn[0].id),[n,a]=M.useState([]),[i,r]=M.useState([]),[s,o]=M.useState(!1);M.useEffect(()=>{let c=!1;return o(!0),Promise.all([L3(t),aS(t)]).then(([f,m])=>{c||(a(f),r(m),o(!1))}).catch(f=>{console.error("WeeklyHistory load error:",f),c||(a([]),r([]),o(!1))}),()=>{c=!0}},[t]);const u=c=>{switch(c){case"completed":return{text:"Cumplida",color:"text-green-400"};case"missed":return{text:"Multada",color:"text-red-400"};case"frozen":return{text:"Congelada",color:"text-blue-400"};case"justified":return{text:" Justificada",color:"text-amber-400"};default:return{text:c,color:"text-gray-400"}}};return p.jsxs("div",{className:"bg-gray-800 rounded-2xl p-4 border border-gray-700",children:[p.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:" Historial Semanal"}),p.jsx("div",{className:"grid grid-cols-4 gap-2 mb-4",children:hn.map(c=>p.jsxs("button",{onClick:()=>e(c.id),className:`p-2 rounded-xl text-center transition-all ${t===c.id?"bg-indigo-600 ring-2 ring-indigo-400":"bg-gray-700 hover:bg-gray-600"}`,children:[p.jsx(Zt,{src:c.avatar,name:c.name,size:"sm"}),p.jsx("div",{className:"text-xs mt-1 text-gray-300 truncate",children:c.name})]},c.id))}),s?p.jsx("p",{className:"text-gray-400 text-center py-4",children:"Cargando..."}):n.length===0?p.jsx("p",{className:"text-gray-400 text-center py-4",children:"Sin historial an."}):p.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:n.map(c=>{const f=u(c.status);return p.jsxs("div",{className:"flex items-center justify-between bg-gray-900/50 rounded-xl px-3 py-2",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-medium text-white",children:Tc(c.weekId)}),p.jsxs("p",{className:"text-xs text-gray-400",children:[c.sessions," sesiones",c.lifeUsed&&" |  Vida usada",c.lifeEarned&&" |  Vida ganada",c.shieldEarned&&" |  Escudo ganado",c.shieldBroken&&" |  Escudo roto"]})]}),p.jsxs("div",{className:"text-right",children:[p.jsx("p",{className:`text-sm font-bold ${f.color}`,children:f.text}),c.fineApplied>0&&p.jsx("p",{className:"text-xs text-red-400",children:co(c.fineApplied)})]})]},c.id)})}),i.length>0&&p.jsxs("div",{className:"mt-4",children:[p.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:"ltimos entrenamientos"}),p.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:i.slice(0,10).map(c=>p.jsxs("div",{className:"flex items-center gap-3 bg-gray-900/50 rounded-xl px-3 py-2",children:[c.photoURL&&p.jsx("img",{src:c.photoURL,alt:"",className:"w-12 h-12 rounded-lg object-cover flex-shrink-0"}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("p",{className:"text-sm font-medium text-white",children:c.exerciseType}),p.jsxs("p",{className:"text-xs text-gray-400",children:[c.date,"  ",c.duration," min"]}),c.description&&p.jsx("p",{className:"text-xs text-gray-500 truncate",children:c.description})]})]},c.id))})]})]})}function T6({onProcess:t,currentWeekId:e}){const[n,a]=M.useState(!1),[i,r]=M.useState(!1),s=async()=>{if(confirm("Ests seguro de cerrar esta semana y calcular multas/vidas?")){a(!0);try{await t(e),r(!0)}catch(o){console.error(o),alert("Error al procesar la semana.")}finally{a(!1)}}};return p.jsxs("div",{className:"bg-gray-800 rounded-2xl p-4 border border-gray-700",children:[p.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:" Cierre Semanal"}),p.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Ejecuta el cierre de la semana actual para calcular multas, vidas ganadas y vidas consumidas. Solo hazlo cuando la semana haya terminado."}),p.jsx("button",{onClick:s,disabled:n||i,className:`w-full py-3 rounded-xl font-bold transition-all ${n||i?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-red-600 hover:bg-red-500 text-white active:scale-95"}`,children:n?" Procesando...":i?" Semana procesada":" Cerrar Semana y Calcular"})]})}function x6({gameState:t}){const{processWeekEnd:e,currentWeekId:n}=t,{currentUser:a,logout:i}=mi();return p.jsxs("div",{className:"space-y-4 pb-24",children:[p.jsx("h2",{className:"text-2xl font-black text-white text-center",children:" Administracin"}),p.jsxs("div",{className:"bg-gray-800 rounded-2xl p-4 border border-gray-700 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(Zt,{src:a==null?void 0:a.avatar,name:a==null?void 0:a.name,size:"md"}),p.jsxs("div",{children:[p.jsx("p",{className:"font-semibold text-white",children:a==null?void 0:a.name}),p.jsx("p",{className:"text-xs text-gray-400",children:"Sesin activa"})]})]}),p.jsx("button",{onClick:i,className:"bg-red-600/20 text-red-400 hover:bg-red-600/30 px-3 py-2 rounded-xl text-sm font-medium transition-colors",children:"Cerrar sesin"})]}),p.jsx(T6,{onProcess:e,currentWeekId:n}),p.jsx(b6,{}),p.jsx(E6,{})]})}function S6(){const{isLoggedIn:t,loading:e}=mi(),n=ZV();return e?p.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center",children:p.jsx("div",{className:"text-4xl animate-bounce",children:""})}):t?p.jsxs("div",{className:"min-h-screen bg-gray-950 text-white",children:[p.jsx("main",{className:"max-w-lg mx-auto px-4 pt-4",children:p.jsxs(PR,{children:[p.jsx(Zs,{path:"/",element:p.jsx(y6,{gameState:n})}),p.jsx(Zs,{path:"/feed",element:p.jsx(v6,{})}),p.jsx(Zs,{path:"/user/:userId",element:p.jsx(_6,{gameState:n})}),p.jsx(Zs,{path:"/admin",element:p.jsx(x6,{gameState:n})})]})}),p.jsx("nav",{className:"fixed bottom-0 inset-x-0 bg-gray-900/95 backdrop-blur border-t border-gray-800 z-30",children:p.jsxs("div",{className:"max-w-lg mx-auto flex",children:[p.jsxs(Tu,{to:"/",className:({isActive:a})=>`flex-1 py-3 text-center text-sm font-medium transition-colors ${a?"text-indigo-400":"text-gray-500 hover:text-gray-300"}`,children:[p.jsx("div",{className:"text-xl",children:""}),p.jsx("div",{children:"Inicio"})]}),p.jsxs(Tu,{to:"/feed",className:({isActive:a})=>`flex-1 py-3 text-center text-sm font-medium transition-colors ${a?"text-indigo-400":"text-gray-500 hover:text-gray-300"}`,children:[p.jsx("div",{className:"text-xl",children:""}),p.jsx("div",{children:"Feed"})]}),p.jsxs(Tu,{to:"/admin",className:({isActive:a})=>`flex-1 py-3 text-center text-sm font-medium transition-colors ${a?"text-indigo-400":"text-gray-500 hover:text-gray-300"}`,children:[p.jsx("div",{className:"text-xl",children:""}),p.jsx("div",{children:"Admin"})]})]})})]}):p.jsx(t6,{})}function w6(){return p.jsx(K3,{children:p.jsx(S6,{})})}B2.createRoot(document.getElementById("root")).render(p.jsx(lw.StrictMode,{children:p.jsx(uC,{children:p.jsx(w6,{})})}));
